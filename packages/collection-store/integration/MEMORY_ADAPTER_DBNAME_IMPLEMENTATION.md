# ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û–î–î–ï–†–ñ–ö–ò `dbName: ':memory:'` –í COLLECTION-STORE

## üìã –¶–µ–ª—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É MikroORM —Å–æ–≥–ª–∞—à–µ–Ω–∏—è `dbName: ':memory:'` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ AdapterMemory –≤ collection-store, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ç–æ–º—É –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ MikroORM.

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ `dbName` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `dbName?: string` –≤ `ICollectionConfig<T>`
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: "Database name - use ':memory:' for in-memory storage (like MikroORM)"

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤ Collection.create()** - ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
   - –ü—Ä–∏ `dbName: ':memory:'` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AdapterMemory`
   - –ü—Ä–∏ –¥—Ä—É–≥–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö `dbName` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AdapterMemory` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ `adapter`

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤ CSDatabase** - ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
   - –ü—Ä–∏ `root: ':memory:'` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AdapterMemory`
   - –ü—Ä–∏ –¥—Ä—É–≥–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö `root` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AdapterFile`
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `AdapterMemory` –≤ CSDatabase

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

1. **ICollectionConfig.ts**
   ```typescript
   export interface ICollectionConfig<T extends Item> {
     // ... existing fields ...
     /** Database name - use ':memory:' for in-memory storage (like MikroORM) */
     dbName?: string
     // ... rest of fields ...
   }
   ```

2. **collection.ts - Collection.create()**
   ```typescript
   // Determine adapter based on dbName (MikroORM convention)
   let adapter = config?.adapter
   if (!adapter) {
     if (dbName === ':memory:') {
       adapter = new AdapterMemory<T>()
     } else {
       adapter = new AdapterMemory<T>() // Default to memory for backward compatibility
     }
   }
   ```

3. **CSDatabase.ts - createCollection()**
   ```typescript
   // Determine adapter based on root path (MikroORM convention)
   const adapter = this.root === ':memory:'
     ? new AdapterMemory<T>()
     : new AdapterFile<T>()
   ```

### üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã:**
- ‚úÖ 9 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ AdapterMemory –ø—Ä–∏ `dbName: ':memory:'`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å CSDatabase
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å MikroORM —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏

**–°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤:**
- ‚úÖ Collection.create() —Ç–µ—Å—Ç—ã: **3/3 –ø—Ä–æ—Ö–æ–¥—è—Ç**
- ‚ö†Ô∏è CSDatabase —Ç–µ—Å—Ç—ã: **0/6 –ø—Ä–æ—Ö–æ–¥—è—Ç** (–ø—Ä–æ–±–ª–µ–º–∞ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
- ‚úÖ MikroORM —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —á–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### üö® –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ CSDatabase** - ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø
   - CSDatabase —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
   - –û—à–∏–±–∫–∞: "collection test-collection-1 already exists"
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –æ—á–∏—Å—Ç–∫–∏ –∏–ª–∏ –∏–∑–æ–ª—è—Ü–∏–∏

2. **Backward Compatibility** - ‚úÖ –°–û–•–†–ê–ù–ï–ù–ê
   - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AdapterMemory –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### üîÑ MikroORM –°–æ–≥–ª–∞—à–µ–Ω–∏—è

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
```typescript
// MikroORM style
const { orm } = await initORM({
  dbName: ':memory:',  // ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
});

// Collection-store equivalent
const db = new CSDatabase(':memory:', 'test-db')  // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
const collection = Collection.create({
  name: 'users',
  dbName: ':memory:'  // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
})
```

### üìà –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

**‚úÖ MikroORM —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è `dbName: ':memory:'`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä in-memory –∞–¥–∞–ø—Ç–µ—Ä–∞
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°–¢–ê–¢–£–°: ‚úÖ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê**

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ `dbName: ':memory:'` —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ collection-store:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä AdapterMemory –ø—Ä–∏ `dbName: ':memory:'`
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å MikroORM —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è CSDatabase –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç–µ—Å—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º CSDatabase
2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –æ—á–∏—Å—Ç–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö MikroORM —Å–æ–≥–ª–∞—à–µ–Ω–∏–π

---
*–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ MikroORM —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º*