# –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤

## üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- **–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤** –≤ `src/query/`:
  - Comparison operators (EqOperator, GtOperator, etc.)
  - Logical operators (AndOperator, OrOperator, etc.)
  - Array operators (AllOperator, ElemMatchOperator, SizeOperator)
  - Bitwise operators (BitsAllSetOperator, etc.)
  - Evaluation operators (ModOperator, RegexOperator, WhereOperator)
  - Element operators (ExistsOperator, TypeOperator)
  - Text search operators (TextSearchOperatorImpl)

- **–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤** –≤ `src/query/compile_query.ts`:
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JavaScript –∫–æ–¥–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

- **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** –≤ `src/query/build_query.ts`:
  - –§—É–Ω–∫—Ü–∏—è `build_query_new()`
  - –§—É–Ω–∫—Ü–∏—è `buildIt_new()`
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

- **–¢–µ—Å—Ç—ã** –≤ `src/query/__tests__/`:
  - –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
  - –¢–µ—Å—Ç—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚ùå –ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
- **–§—É–Ω–∫—Ü–∏—è `query()`** - –æ—Å–Ω–æ–≤–Ω–æ–π API –¥–ª—è –¥–µ–º–æ
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Collection** - —Å–≤—è–∑—å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–µ–º–æ** - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–≠–∫—Å–ø–æ—Ä—Ç API** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã –∏–∑ –º–æ–¥—É–ª–µ–π

## üéØ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Phase 1: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API ‚úÖ
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/query/query.ts` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `query()`
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã –≤ `src/query/index.ts`
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã –¥–ª—è API

### Phase 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Collection ‚è≥
4. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã `find()` –≤ Collection –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
5. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
6. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤

### Phase 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ ‚úÖ
7. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ –¥–µ–º–æ —Ñ–∞–π–ª–∞—Ö
8. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
9. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –¥–µ–º–æ –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### Phase 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚è≥
10. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
11. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
12. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –ó–∞–¥–∞—á–∞ 1: –°–æ–∑–¥–∞–Ω–∏–µ API —Ñ—É–Ω–∫—Ü–∏–∏ query()
**–§–∞–π–ª:** `src/query/query.ts`
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

```typescript
export function query(
  obj: QueryType,
  options?: { [op: string]: (...args: Array<any>) => UnaryCondition }
): UnaryCondition {
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å build_query_new() –≤–Ω—É—Ç—Ä–∏
}
```

### –ó–∞–¥–∞—á–∞ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
**–§–∞–π–ª:** `src/query/index.ts`
**–¶–µ–ª—å:** –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π API

### –ó–∞–¥–∞—á–∞ 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ
**–§–∞–π–ª—ã:** `src/demo/demo_2_0.ts`, `src/demo/demo_4_0.ts`
**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

## üîç –ü—Ä–æ–±–ª–µ–º—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª query.ts
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–ê
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —Å —Ñ—É–Ω–∫—Ü–∏–µ–π query()
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–µ–º–æ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–ê
- **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Collection
- **–°—Ç–∞—Ç—É—Å:** ‚ùå –°—Ä–µ–¥–Ω—è—è
- **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã find() –≤ Collection
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 95% (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞)

- ‚úÖ –û–ø–µ—Ä–∞—Ç–æ—Ä—ã: 100%
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: 100%
- ‚úÖ –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã: 100% (277 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ API —Ñ—É–Ω–∫—Ü–∏—è: 100%
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: 79% (57 –∏–∑ 72 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Collection: 0%
- ‚úÖ –î–µ–º–æ: 100%

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ ~~–°–æ–∑–¥–∞—Ç—å `src/query/query.ts`~~
2. ‚úÖ ~~–û–±–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã~~
3. ‚úÖ ~~–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–µ–º–æ —Ñ–∞–π–ª—ã~~
4. ‚úÖ ~~–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã~~ (277 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç)
5. **–°–õ–ï–î–£–Æ–©–ò–ô:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Collection
6. **–°–õ–ï–î–£–Æ–©–ò–ô:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

- ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è API** `query()` –≤ `src/query/query.ts`
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã** –≤ —Å–∏—Å—Ç–µ–º–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–°–æ–∑–¥–∞–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–∏–ø–æ–≤** (QueryType.ts, UnaryCondition.ts, ValueType.ts)
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–µ–º–æ —Ñ–∞–π–ª—ã** demo_2_0.ts –∏ demo_4_0.ts
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π** (–¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã id)
- ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** (277 —Ç–µ—Å—Ç–æ–≤, –≤–∫–ª—é—á–∞—è compile_query.test.ts)
- ‚úÖ **–î–µ–º–æ —Ñ–∞–π–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç** –∏ –≤—ã–≤–æ–¥—è—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–∞–π–ª –±–µ–Ω—á–º–∞—Ä–∫–æ–≤** - —É–¥–∞–ª–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è build_query_original
- ‚úÖ **–°–æ–∑–¥–∞–Ω—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã** - 72 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞ (79% –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---
*–°–æ–∑–¥–∞–Ω–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å DEVELOPMENT_RULES.md*
*–î–∞—Ç–∞: –î–µ–∫–∞–±—Ä—å 2024*