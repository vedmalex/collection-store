# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∞—Ö —Å–∏—Å—Ç–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### ‚úÖ 1. `src/__test__/query-integration.test.ts`
**–ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
- **–¢–µ—Å—Ç–æ–≤:** 25
- **–ü—Ä–æ—Ö–æ–¥—è—Ç:** 22 ‚úÖ
- **–ü–∞–¥–∞—é—Ç:** 3 ‚ùå

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- –ë–∞–∑–æ–≤–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –ø–æ–ª–µ–π
- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è ($gt, $gte, $lt, $lte, $ne)
- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–∞—Å—Å–∏–≤–æ–≤ ($in, $nin, $all, $size)
- –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã ($and, $or, $not, $nor)
- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ($exists, $type)
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ 2. `src/__test__/query-advanced.test.ts`
**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
- **–¢–µ—Å—Ç–æ–≤:** 27
- **–ü—Ä–æ—Ö–æ–¥—è—Ç:** 15 ‚úÖ
- **–ü–∞–¥–∞—é—Ç:** 12 ‚ùå

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è ($regex)
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—è (nested fields)
- –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–æ–≤ ($elemMatch)
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã ($mod)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ ($type)
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ 3. `src/__test__/query-simple-integration.test.ts`
**–†–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- **–¢–µ—Å—Ç–æ–≤:** 20
- **–ü—Ä–æ—Ö–æ–¥—è—Ç:** 15 ‚úÖ
- **–ü–∞–¥–∞—é—Ç:** 5 ‚ùå

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- –†–µ–∞–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 72
- **–ü—Ä–æ—Ö–æ–¥—è—â–∏—Ö:** 57 (79%) ‚úÖ
- **–ü–∞–¥–∞—é—â–∏—Ö:** 15 (21%) ‚ùå
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 44ms ‚ö°

## üéØ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1. **–ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è**
   - `$eq`, `$gt`, `$gte`, `$lt`, `$lte`, `$ne`
   - –†–∞–±–æ—Ç–∞—é—Ç —Å —á–∏—Å–ª–∞–º–∏, —Å—Ç—Ä–æ–∫–∞–º–∏, –¥–∞—Ç–∞–º–∏

2. **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–∞—Å—Å–∏–≤–æ–≤**
   - `$in`, `$nin` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è
   - `$all` - –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
   - `$size` - —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞

3. **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã**
   - `$and`, `$or` - –±–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
   - `$not` - –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ (—á–∞—Å—Ç–∏—á–Ω–æ)

4. **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤**
   - `$exists` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—è
   - `$type` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ (–¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–æ–≤)

5. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è**
   - `$regex` - –±–∞–∑–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö –¥–∞–Ω–Ω—ã—Ö
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:

1. **–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—è (Nested Fields)**
   ```javascript
   // –ù–ï –†–ê–ë–û–¢–ê–ï–¢:
   { 'profile.skills': { $in: ['React'] } }
   { 'metadata.views': { $gte: 1000 } }
   ```

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –≤ $type**
   ```javascript
   // –ù–ï –†–ê–ë–û–¢–ê–ï–¢:
   { field: { $type: 'boolean' } }
   ```

3. **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–∞—Å—Å–∏–≤–æ–≤**
   ```javascript
   // –ß–ê–°–¢–ò–ß–ù–û –†–ê–ë–û–¢–ê–ï–¢:
   { 'skills': { $elemMatch: { $regex: /Script$/ } } }
   ```

4. **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏**
   - –°–ª–æ–∂–Ω—ã–µ `$nor` –∑–∞–ø—Ä–æ—Å—ã
   - –í–ª–æ–∂–µ–Ω–Ω—ã–µ `$and`/`$or` —Å –º–∞—Å—Å–∏–≤–∞–º–∏

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
```javascript
// –ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
query({ 'user.profile.name': 'John' })
query({ 'metadata.stats.views': { $gt: 100 } })
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ $type
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É:
'boolean', 'function', 'symbol', 'bigint'
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–µ–Ω–∏–µ $elemMatch
```javascript
// –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤:
{ items: { $elemMatch: { price: { $gt: 100 }, category: 'electronics' } } }
```

## üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. **–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞** - 72 —Ç–µ—Å—Ç–∞ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
2. **–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è** - 79% —Ç–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **–†–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** - —Ç–µ—Å—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á–∞—Ö
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è:**
- ‚úÖ –ë–∞–∑–æ–≤–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ—Å—Ç—ã—Ö –±–∏–∑–Ω–µ—Å-–∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –†–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ (–±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- ‚úÖ –õ–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π

**–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è:**
- ‚ùå –†–∞–±–æ—Ç—ã —Å –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
- ‚ùå –°–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- ‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: –î–µ–∫–∞–±—Ä—å 2024*
*–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞*