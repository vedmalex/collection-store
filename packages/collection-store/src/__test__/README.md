# Тесты для Collection Store

Этот каталог содержит тесты для библиотеки Collection Store.

## Структура тестов

### `collection.node.test.ts`
Основные тесты функциональности коллекций:
- Клонирование коллекций
- Ротация логов
- Работа со списками
- Загрузка индексов
- TTL (Time To Live) функциональность
- Автоинкремент
- Уникальные индексы
- CRUD операции (создание, чтение, обновление, удаление)
- Работа с индексами

### `demo-simple.test.ts`
Тесты демо-функциональности на основе типа `Person`:

#### Валидация типов
- Проверка структуры типа `Person`
- Обработка опциональных полей (например, `apartment`)
- Поддержка различных типов данных для полей

#### Создание демо-данных
- Создание коллекции с FileStorage и демо-данными
- Создание коллекции с List storage и демо-данными
- Проверка уникальности SSN

#### Базовые операции с коллекцией
- Создание пустой коллекции и добавление записей
- Выполнение запросов к демо-данным
- Обработка уникальных ограничений

#### Граничные случаи
- Обработка записей без опциональных полей
- Запросы с пустыми результатами

## Демо-данные

Тесты используют демо-данные типа `Person` со следующей структурой:

```typescript
interface Person {
  id?: number
  name: string
  age: number
  ssn: string
  address: {
    appart?: string | { stage: string; place: string }
    home: string
    city: string
  }
  page: string
}
```

## Запуск тестов

```bash
# Запуск всех тестов
bun test src/__test__/

# Запуск конкретного файла тестов
bun test src/__test__/demo-simple.test.ts
bun test src/__test__/collection.node.test.ts
```

## Конфигурация

Тесты используют две основные конфигурации хранения:
- **FileStorage**: Хранение данных в файлах
- **List Storage**: Хранение данных в памяти

Каждый тест создает изолированные директории для данных, чтобы избежать конфликтов между тестами.