bun test v1.2.16 (631e6748)

debug_test.js:
Starting optimizer...
[RealTimeOptimizer] Real-time optimizer started {
  config: {
    monitoringInterval: 1000,
    cooldownPeriod: 5,
    emergencyThresholds: {
      criticalCpuUsage: 90,
      criticalMemoryUsage: 95,
      criticalErrorRate: 10,
      criticalResponseTime: 500,
      criticalThroughputDrop: 50,
    },
  },
}
Getting active thresholds...
Active thresholds: {
  "responseTime": {
    "warning": 100,
    "critical": 150,
    "unit": "ms",
    "direction": "above"
  },
  "throughput": {
    "warning": 80,
    "critical": 50,
    "unit": "ops/sec",
    "direction": "below"
  },
  "errorRate": {
    "warning": 5,
    "critical": 10,
    "unit": "%",
    "direction": "above"
  },
  "resourceUsage": {
    "cpu": {
      "warning": 70,
      "critical": 80,
      "unit": "%",
      "direction": "above"
    },
    "memory": {
      "warning": 75,
      "critical": 85,
      "unit": "%",
      "direction": "above"
    },
    "network": {
      "warning": 80,
      "critical": 95,
      "unit": "%",
      "direction": "above"
    },
    "disk": {
      "warning": 80,
      "critical": 95,
      "unit": "%",
      "direction": "above"
    }
  }
}
Creating metrics with CPU 80%...
Metrics: {
  "timestamp": "2025-06-13T17:03:20.786Z",
  "responseTime": {
    "min": 25,
    "max": 100,
    "avg": 50,
    "p50": 45,
    "p95": 75,
    "p99": 90
  },
  "throughput": {
    "totalOperations": 1000,
    "operationsPerSecond": 100,
    "successfulOperations": 900,
    "failedOperations": 10
  },
  "errors": {
    "totalErrors": 10,
    "errorRate": 1,
    "errorTypes": {}
  },
  "system": {
    "cpuUsage": 80,
    "memoryUsage": 3435973836,
    "networkBandwidth": 124.48454238910614,
    "diskIO": 72.43590193723841
  }
}
Applying dynamic optimization...
DEBUG: CPU check {
  cpuUsage: 80,
  threshold: 70,
  condition: true,
}
DEBUG: Adding CPU action
[RealTimeOptimizer] Dynamic optimization applied {
  actionsCount: 1,
  metrics: {
    responseTime: 50,
    throughput: 100,
    errorRate: 1,
    cpuUsage: 80,
  },
}
Actions: [
  {
    "type": "configuration",
    "component": "system",
    "action": "reduce_cpu_load",
    "parameters": {
      "targetUsage": 56,
      "method": "throttling"
    },
    "reversible": true,
    "impact": "medium"
  }
]
[RealTimeOptimizer] Real-time optimizer stopped 

integration/debug_test.js:
Starting optimizer...
[RealTimeOptimizer] Real-time optimizer started {
  config: {
    monitoringInterval: 1000,
    cooldownPeriod: 5,
    emergencyThresholds: {
      criticalCpuUsage: 90,
      criticalMemoryUsage: 95,
      criticalErrorRate: 10,
      criticalResponseTime: 500,
      criticalThroughputDrop: 50,
    },
  },
}
Getting active thresholds...
Active thresholds: {
  "responseTime": {
    "warning": 100,
    "critical": 150,
    "unit": "ms",
    "direction": "above"
  },
  "throughput": {
    "warning": 80,
    "critical": 50,
    "unit": "ops/sec",
    "direction": "below"
  },
  "errorRate": {
    "warning": 5,
    "critical": 10,
    "unit": "%",
    "direction": "above"
  },
  "resourceUsage": {
    "cpu": {
      "warning": 70,
      "critical": 80,
      "unit": "%",
      "direction": "above"
    },
    "memory": {
      "warning": 75,
      "critical": 85,
      "unit": "%",
      "direction": "above"
    },
    "network": {
      "warning": 80,
      "critical": 95,
      "unit": "%",
      "direction": "above"
    },
    "disk": {
      "warning": 80,
      "critical": 95,
      "unit": "%",
      "direction": "above"
    }
  }
}
Creating metrics with CPU 80%...
Metrics: {
  "timestamp": "2025-06-13T17:03:20.790Z",
  "responseTime": {
    "min": 25,
    "max": 100,
    "avg": 50,
    "p50": 45,
    "p95": 75,
    "p99": 90
  },
  "throughput": {
    "totalOperations": 1000,
    "operationsPerSecond": 100,
    "successfulOperations": 900,
    "failedOperations": 10
  },
  "errors": {
    "totalErrors": 10,
    "errorRate": 1,
    "errorTypes": {}
  },
  "system": {
    "cpuUsage": 80,
    "memoryUsage": 3435973836,
    "networkBandwidth": 133.78313489269618,
    "diskIO": 73.62638182112337
  }
}
Applying dynamic optimization...
DEBUG: CPU check {
  cpuUsage: 80,
  threshold: 70,
  condition: true,
}
DEBUG: Adding CPU action
[RealTimeOptimizer] Dynamic optimization applied {
  actionsCount: 1,
  metrics: {
    responseTime: 50,
    throughput: 100,
    errorRate: 1,
    cpuUsage: 80,
  },
}
Actions: [
  {
    "type": "configuration",
    "component": "system",
    "action": "reduce_cpu_load",
    "parameters": {
      "targetUsage": 56,
      "method": "throttling"
    },
    "reversible": true,
    "impact": "medium"
  }
]
[RealTimeOptimizer] Real-time optimizer stopped 

src/__test__/TransactionManager.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../TransactionManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/TransactionManager.test.ts'
-------------------------------


src/__test__/raft-leader-election.test.ts:
(pass) Raft Leader Election > Initialization > should initialize as follower [0.86ms]
(pass) Raft Leader Election > Initialization > should start election timers
(pass) Raft Leader Election > Vote Request Handling > should grant vote for valid request [0.22ms]
(pass) Raft Leader Election > Vote Request Handling > should reject vote for outdated term [0.07ms]
(pass) Raft Leader Election > Vote Request Handling > should reject vote if already voted for different candidate [0.05ms]
(pass) Raft Leader Election > Vote Request Handling > should allow vote for same candidate multiple times [0.47ms]
(pass) Raft Leader Election > Heartbeat Handling > should accept heartbeat from leader [0.24ms]
(pass) Raft Leader Election > Heartbeat Handling > should update term from heartbeat [0.03ms]
(pass) Raft Leader Election > Heartbeat Handling > should ignore heartbeat with older term [0.01ms]
(pass) Raft Leader Election > Election Process > should become candidate when election triggered [0.65ms]
(pass) Raft Leader Election > Election Process > should become leader with majority votes [0.10ms]
(pass) Raft Leader Election > Election Process > should remain candidate without majority votes [0.06ms]
(pass) Raft Leader Election > Election Process > should step down if higher term received during election [0.06ms]
(pass) Raft Leader Election > Single Node Cluster > should become leader immediately in single node cluster [0.03ms]
(pass) Raft Leader Election > Leader Behavior > should send heartbeats as leader [26.36ms]
(pass) Raft Leader Election > Leader Behavior > should have heartbeat timer as leader [0.06ms]
(pass) Raft Leader Election > Error Handling > should handle RPC failures gracefully [0.59ms]
(pass) Raft Leader Election > Error Handling > should throw error when triggering election from non-follower state [0.50ms]
(pass) Raft Leader Election > Metrics > should provide accurate metrics [0.04ms]

src/__test__/global-cleanup.test.ts:
(pass) Global Cleanup > should be the last test to run [0.02ms]
ðŸ§¹ Running global cleanup of test data...
âœ… Global cleanup completed

src/__test__/replication-wal-streaming.test.ts:
NetworkManager started on node leader, port 8372
NetworkManager started on node follower-1, port 8373
NetworkManager started on node follower-2, port 8374
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Node leader connected to follower-1
Connected to node follower-2 at localhost:8374
Connected to node follower-1 at localhost:8373
(pass) Replication WAL Streaming Integration > WAL Entry Streaming > should replicate WAL entries from leader to followers [506.48ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8820
NetworkManager started on node follower-1, port 8821
NetworkManager started on node follower-2, port 8822
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Node leader connected to follower-1
Connected to node follower-2 at localhost:8822
Connected to node follower-1 at localhost:8821
(pass) Replication WAL Streaming Integration > WAL Entry Streaming > should handle multiple WAL entries in sequence [604.20ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8979
NetworkManager started on node follower-1, port 8980
NetworkManager started on node follower-2, port 8981
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Connected to node follower-2 at localhost:8981
Node leader connected to follower-1
Connected to node follower-1 at localhost:8980
(pass) Replication WAL Streaming Integration > WAL Entry Streaming > should handle sync mode replication with acknowledgments [2.91ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 9025
NetworkManager started on node follower-1, port 9026
NetworkManager started on node follower-2, port 9027
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Connected to node follower-2 at localhost:9027
Node leader connected to follower-1
Connected to node follower-1 at localhost:9026
Promoting node to LEADER
Syncing with cluster from sequence 0
Requested sync from node leader starting from sequence 1
(pass) Replication WAL Streaming Integration > Role Management > should handle leader promotion [0.58ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8643
NetworkManager started on node follower-1, port 8644
NetworkManager started on node follower-2, port 8645
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Node leader connected to follower-1
Connected to node follower-2 at localhost:8645
Connected to node follower-1 at localhost:8644
Demoting node to FOLLOWER
(pass) Replication WAL Streaming Integration > Role Management > should handle leader demotion [0.19ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8175
NetworkManager started on node follower-1, port 8176
NetworkManager started on node follower-2, port 8177
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Node leader connected to follower-1
Connected to node follower-2 at localhost:8177
Connected to node follower-1 at localhost:8176
Promoting node to LEADER
Syncing with cluster from sequence 0
Requested sync from node leader starting from sequence 1
(pass) Replication WAL Streaming Integration > Role Management > should emit role change events [0.40ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8113
NetworkManager started on node follower-1, port 8114
NetworkManager started on node follower-2, port 8115
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Connected to node follower-2 at localhost:8115
Node leader connected to follower-1
Connected to node follower-1 at localhost:8114
Node follower-1 disconnected from leader
Disconnected from node follower-1
Node follower-2 disconnected from leader
Disconnected from node follower-2
Node leader disconnected from follower-1
Node leader disconnected from follower-2
(pass) Replication WAL Streaming Integration > Error Handling > should handle replication failures gracefully [1.07ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Closing NetworkManager for node follower-1
Closing NetworkManager for node follower-2
WebSocket server closed for node leader
WebSocket server closed for node follower-1
WebSocket server closed for node follower-2
NetworkManager started on node leader, port 8350
NetworkManager started on node follower-1, port 8351
NetworkManager started on node follower-2, port 8352
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Node leader connected to follower-1
Connected to node follower-2 at localhost:8352
Connected to node follower-1 at localhost:8351
(pass) Replication WAL Streaming Integration > Error Handling > should handle invalid WAL entries [0.43ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8122
NetworkManager started on node follower-1, port 8123
NetworkManager started on node follower-2, port 8124
ReplicatedWALManager initialized with role: LEADER
ReplicatedWALManager initialized with role: FOLLOWER
ReplicatedWALManager initialized with role: FOLLOWER
Node leader connected to follower-2
Node leader connected to follower-1
Connected to node follower-2 at localhost:8124
Connected to node follower-1 at localhost:8123
Wrote 10 entries in 0ms
Received 10 entries
(pass) Replication WAL Streaming Integration > Performance > should handle moderate-volume WAL streaming [1001.60ms]
WALReplicationManager closed for node leader
WALReplicationManager closed for node follower-1
WALReplicationManager closed for node follower-2
Closing NetworkManager for node leader
Node follower-2 disconnected from leader
Node follower-1 disconnected from leader
Closing NetworkManager for node follower-1
Node leader disconnected from follower-1
Closing NetworkManager for node follower-2
Node leader disconnected from follower-2
WebSocket server closed for node leader
NetworkManager started on node leader, port 8674
ReplicatedWALManager initialized with role: FOLLOWER
Starting WAL-based transaction recovery...
Starting WAL recovery...
NetworkManager started on node follower, port 8675
ReplicatedWALManager initialized with role: FOLLOWER
Starting WAL-based transaction recovery...
Starting WAL recovery...
Initializing replicated collection test-collection-1749834222788 on node leader
Initializing replicated collection test-collection-1749834222793 on node follower
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Node follower connected to leader
Node leader connected to follower
Connected to node leader at localhost:8674
Connected to node leader
Connected to node follower at localhost:8675
Connected to node follower
Syncing with cluster from sequence 0
Requested sync from node leader starting from sequence 1
Replicated collection test-collection-1749834222793 initialized successfully
Syncing with cluster from sequence 0
Requested sync from node follower starting from sequence 1
Replicated collection test-collection-1749834222788 initialized successfully
Promoting node to LEADER
Syncing with cluster from sequence 0
Requested sync from node follower starting from sequence 1
Node leader promoted to LEADER
Sent 0 WAL entries to follower for sync
Sent 0 WAL entries to leader for sync
Sent 0 WAL entries to leader for sync
(pass) Replicated WAL Collection Integration > should handle basic collection operations [505.72ms]
Closing replicated collection test-collection-1749834222788
WALReplicationManager closed for node leader
Closing replicated collection test-collection-1749834222793
WALReplicationManager closed for node follower
Closing NetworkManager for node leader
Node follower disconnected from leader
Closing NetworkManager for node follower
Node leader disconnected from follower
Node leader disconnected from follower
Node follower disconnected from leader
WebSocket server closed for node follower
Replicated collection test-collection-1749834222793 closed
WebSocket server closed for node leader
Replicated collection test-collection-1749834222788 closed
NetworkManager started on node leader, port 8674
ReplicatedWALManager initialized with role: FOLLOWER
Starting WAL-based transaction recovery...
Starting WAL recovery...
NetworkManager started on node follower, port 8675
ReplicatedWALManager initialized with role: FOLLOWER
Starting WAL-based transaction recovery...
Starting WAL recovery...
Initializing replicated collection test-collection-1749834224008 on node leader
Initializing replicated collection test-collection-1749834224011 on node follower
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Node follower connected to leader
Node leader connected to follower
Connected to node leader at localhost:8674
Connected to node leader
Connected to node follower at localhost:8675
Connected to node follower
Syncing with cluster from sequence 0
Requested sync from node leader starting from sequence 1
Replicated collection test-collection-1749834224011 initialized successfully
Syncing with cluster from sequence 0
Requested sync from node follower starting from sequence 1
Replicated collection test-collection-1749834224008 initialized successfully
Promoting node to LEADER
Syncing with cluster from sequence 0
Requested sync from node follower starting from sequence 1
Node leader promoted to LEADER
Sent 0 WAL entries to follower for sync
Sent 0 WAL entries to leader for sync
Sent 0 WAL entries to leader for sync
(pass) Replicated WAL Collection Integration > should handle cluster status monitoring [1.05ms]
Closing replicated collection test-collection-1749834224008
WALReplicationManager closed for node leader
Closing replicated collection test-collection-1749834224011
WALReplicationManager closed for node follower
Closing NetworkManager for node leader
Node follower disconnected from leader
Closing NetworkManager for node follower
Node leader disconnected from follower
Node leader disconnected from follower
Node follower disconnected from leader
WebSocket server closed for node follower
Replicated collection test-collection-1749834224011 closed
WebSocket server closed for node leader
Replicated collection test-collection-1749834224008 closed

src/__test__/CompositeKeyUtils.unified.test.ts:
(pass) CompositeKeyUtils Unified API > isCompositeIndex > should detect single key index
(pass) CompositeKeyUtils Unified API > isCompositeIndex > should detect composite index with multiple keys [0.42ms]
(pass) CompositeKeyUtils Unified API > isCompositeIndex > should not consider single key in array as composite [0.08ms]
(pass) CompositeKeyUtils Unified API > isCompositeIndex > should handle empty keys array [0.03ms]
(pass) CompositeKeyUtils Unified API > normalizeIndexFields > should normalize single key definition [0.45ms]
(pass) CompositeKeyUtils Unified API > normalizeIndexFields > should normalize single key without order [0.09ms]
(pass) CompositeKeyUtils Unified API > normalizeIndexFields > should normalize composite keys with strings [0.16ms]
(pass) CompositeKeyUtils Unified API > normalizeIndexFields > should normalize composite keys with mixed types [0.10ms]
(pass) CompositeKeyUtils Unified API > normalizeIndexFields > should handle IndexField objects without order [0.05ms]
(pass) CompositeKeyUtils Unified API > normalizeIndexFields > should throw error for invalid definition [0.11ms]
(pass) CompositeKeyUtils Unified API > generateIndexName > should generate name for single field [0.04ms]
(pass) CompositeKeyUtils Unified API > generateIndexName > should generate name for composite fields with all ascending [0.08ms]
(pass) CompositeKeyUtils Unified API > generateIndexName > should generate name for composite fields with mixed order [0.04ms]
(pass) CompositeKeyUtils Unified API > generateIndexName > should generate name for all descending fields [0.05ms]
(pass) CompositeKeyUtils Unified API > createProcessFunction > should create process function for single field [0.05ms]
(pass) CompositeKeyUtils Unified API > createProcessFunction > should create process function for composite fields [0.22ms]
(pass) CompositeKeyUtils Unified API > createProcessFunction > should use custom separator [0.25ms]
(pass) CompositeKeyUtils Unified API > createProcessFunction > should handle nested paths [1.26ms]
(pass) CompositeKeyUtils Unified API > createComparator > should return undefined for single ascending field [0.46ms]
(pass) CompositeKeyUtils Unified API > createComparator > should create comparator for single descending field [0.10ms]
(pass) CompositeKeyUtils Unified API > createComparator > should create comparator for composite fields with mixed order [4.42ms]
(pass) CompositeKeyUtils Unified API > createComparator > should handle null values in comparison [0.11ms]
(pass) CompositeKeyUtils Unified API > createComparator > should handle different data types [0.02ms]
(pass) CompositeKeyUtils Unified API > Integration with serialization > should work with serialize/deserialize [0.10ms]
(pass) CompositeKeyUtils Unified API > Integration with serialization > should maintain sort order consistency [0.09ms]
(pass) CompositeKeyUtils Unified API > Error handling > should handle missing fields gracefully [0.05ms]
(pass) CompositeKeyUtils Unified API > Error handling > should handle empty fields array [0.02ms]
(pass) CompositeKeyUtils Unified API > Performance considerations > should handle large composite keys efficiently [0.10ms]

src/__test__/compile-query-compatibility.test.ts:
(pass) Compile Query Compatibility Tests > Basic Field Equality > should match simple string equality [1.56ms]
(pass) Compile Query Compatibility Tests > Basic Field Equality > should match numeric equality [0.10ms]
(pass) Compile Query Compatibility Tests > Basic Field Equality > should match boolean equality [0.51ms]
(pass) Compile Query Compatibility Tests > Basic Field Equality > should match null equality [0.12ms]
(pass) Compile Query Compatibility Tests > Basic Field Equality > should match nested field equality [0.18ms]
(pass) Compile Query Compatibility Tests > Basic Field Equality > should match multiple fields (implicit $and) [0.55ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $eq operator [0.83ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $gt operator [0.36ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $gte operator [0.21ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $lt operator [0.13ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $lte operator [0.13ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $ne operator [0.14ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $in operator with simple values [0.23ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $in operator with array field [0.21ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $nin operator [0.10ms]
(pass) Compile Query Compatibility Tests > Comparison Operators > should match $nin operator with array field [0.08ms]
(pass) Compile Query Compatibility Tests > Logical Operators > should match $and operator [0.17ms]
(pass) Compile Query Compatibility Tests > Logical Operators > should match $or operator [0.14ms]
(pass) Compile Query Compatibility Tests > Logical Operators > should match $not operator [0.03ms]
(pass) Compile Query Compatibility Tests > Logical Operators > should match $not with complex condition [0.24ms]
(pass) Compile Query Compatibility Tests > Logical Operators > should match $nor operator [0.13ms]
(pass) Compile Query Compatibility Tests > Logical Operators > should match complex nested logical operators [0.12ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $exists true [0.08ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $exists false [0.08ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type string [0.19ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type number [0.09ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type boolean [0.08ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type array [0.08ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type object [0.13ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type null [0.09ms]
(pass) Compile Query Compatibility Tests > Element Operators > should match $type with multiple types [0.08ms]
(pass) Compile Query Compatibility Tests > Array Operators > should match $all operator [0.18ms]
(pass) Compile Query Compatibility Tests > Array Operators > should match $all with multiple elements [0.07ms]
(pass) Compile Query Compatibility Tests > Array Operators > should match $all with empty array [0.05ms]
(pass) Compile Query Compatibility Tests > Array Operators > should match $size operator [0.09ms]
(pass) Compile Query Compatibility Tests > Array Operators > should match $size with different sizes [0.10ms]
(pass) Compile Query Compatibility Tests > Array Operators > should match $elemMatch operator [0.07ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $mod operator [0.08ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $mod with different values [0.05ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $regex with string pattern [0.37ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $regex with options [0.11ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $regex with RegExp object [0.17ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $regex with complex pattern [0.07ms]
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $where operator with function [0.06ms]
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
(pass) Compile Query Compatibility Tests > Evaluation Operators > should match $where operator with string [0.09ms]
(pass) Compile Query Compatibility Tests > Bitwise Operators > should match $bitsAllSet operator [0.07ms]
(pass) Compile Query Compatibility Tests > Bitwise Operators > should match $bitsAnySet operator [0.09ms]
(pass) Compile Query Compatibility Tests > Bitwise Operators > should match $bitsAllClear operator [0.01ms]
(pass) Compile Query Compatibility Tests > Bitwise Operators > should match $bitsAnyClear operator [0.25ms]
(pass) Compile Query Compatibility Tests > Bitwise Operators > should match bitwise operators with array positions [0.07ms]
(pass) Compile Query Compatibility Tests > Text Search Operator > should match $text operator [0.16ms]
(pass) Compile Query Compatibility Tests > Text Search Operator > should match $text with case sensitivity [0.39ms]
(pass) Compile Query Compatibility Tests > Complex Queries > should match complex nested query [0.38ms]
(pass) Compile Query Compatibility Tests > Complex Queries > should match query with mixed operators [0.08ms]
(pass) Compile Query Compatibility Tests > Complex Queries > should match query with array operations [0.25ms]
(pass) Compile Query Compatibility Tests > Complex Queries > should match query with bitwise and regex [0.25ms]
(pass) Compile Query Compatibility Tests > Edge Cases > should handle empty query [0.07ms]
(pass) Compile Query Compatibility Tests > Edge Cases > should handle query with undefined values [0.06ms]
(pass) Compile Query Compatibility Tests > Edge Cases > should handle query with nested undefined [0.11ms]
(pass) Compile Query Compatibility Tests > Edge Cases > should handle regex with special characters [0.09ms]
(pass) Compile Query Compatibility Tests > Edge Cases > should handle $in with mixed types [0.12ms]
(pass) Compile Query Compatibility Tests > Edge Cases > should handle deeply nested fields [0.37ms]

src/__test__/typed-collection.test.ts:
(pass) TypedCollection > Schema Integration > should automatically create indexes from schema [0.10ms]
(pass) TypedCollection > Schema Integration > should validate schema on document insertion [1.28ms]
(pass) TypedCollection > Schema Integration > should reject invalid documents in strict mode [0.19ms]
(pass) TypedCollection > Schema Integration > should coerce types when enabled [0.42ms]
(pass) TypedCollection > Type-Safe Queries > should support type-safe field queries [2.37ms]
(pass) TypedCollection > Type-Safe Queries > should support complex type-safe queries [1.16ms]
(pass) TypedCollection > Type-Safe Queries > should support type-safe field-based queries [1.61ms]
(pass) TypedCollection > Type-Safe Queries > should validate query operators against field types [0.22ms]
(pass) TypedCollection > Type-Safe Updates > should support type-safe updates [3.07ms]
(pass) TypedCollection > Type-Safe Updates > should support type-safe partial updates [0.64ms]
(pass) TypedCollection > Type-Safe Updates > should support type-safe updates by ID [1.08ms]
(pass) TypedCollection > Index Management > should support creating additional indexes [0.26ms]
(pass) TypedCollection > Index Management > should support dropping indexes [0.05ms]
(pass) TypedCollection > Schema Utilities > should provide access to schema [0.10ms]
(pass) TypedCollection > Schema Utilities > should validate documents against schema [0.24ms]
Inserted 100 records in 7.620208000000275ms
(pass) TypedCollection > Performance and Integration > should maintain performance with schema validation [7.82ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $set operator [2.16ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $inc operator
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $mul operator [0.41ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $min and $max operators [0.59ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $currentDate operator [0.24ms]
Initial product: undefined
Modified product: {
  id: "prod-301",
  name: "Laptop",
  price: 999.99,
  category: "electronics",
  inStock: true,
}
Has rating property: false
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $unset operator [0.49ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $addToSet operation [0.40ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $addToSet with $each [0.12ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $push operation [0.10ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $push with $each and options [0.04ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pull operation [0.16ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pullAll operation [0.15ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pop operation [0.37ms]
(pass) TypedCollection Type-safe Update Operations > Bulk Update Operations > should perform ordered bulk updates [1.07ms]
(pass) TypedCollection Type-safe Update Operations > Bulk Update Operations > should perform parallel bulk updates [0.41ms]
(pass) TypedCollection Type-safe Update Operations > Upsert Operations > should perform upsert when no documents match
(pass) TypedCollection Type-safe Update Operations > Schema Validation in Updates > should validate schema during updates [0.09ms]
(pass) TypedCollection Type-safe Update Operations > Schema Validation in Updates > should skip validation when disabled
(pass) TypedCollection Type-safe Update Operations > Mixed Update Operations > should handle mixed direct and operator updates

src/__test__/CSDatabase.transaction.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../CSDatabase' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/CSDatabase.transaction.test.ts'
-------------------------------


src/__test__/TransactionalCollection.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../TransactionalCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/TransactionalCollection.test.ts'
-------------------------------


src/__test__/query-integration.test.ts:
(pass) Query Integration Tests > Basic Field Equality > should find users by exact name match [1.36ms]
(pass) Query Integration Tests > Basic Field Equality > should find users by status [0.23ms]
(pass) Query Integration Tests > Basic Field Equality > should find users by numeric id [0.05ms]
(pass) Query Integration Tests > Comparison Operators > should find users older than 30 using $gt [0.06ms]
(pass) Query Integration Tests > Comparison Operators > should find users with age >= 30 using $gte [0.05ms]
(pass) Query Integration Tests > Comparison Operators > should find users younger than 30 using $lt [0.05ms]
(pass) Query Integration Tests > Comparison Operators > should find users with score <= 85 using $lte [0.04ms]
(pass) Query Integration Tests > Comparison Operators > should find users not named Alice using $ne [0.05ms]
(pass) Query Integration Tests > Array Operators > should find users with specific status using $in [0.09ms]
(pass) Query Integration Tests > Array Operators > should find users without specific status using $nin [0.05ms]
(pass) Query Integration Tests > Array Operators > should find users with all specified tags using $all [0.07ms]
(pass) Query Integration Tests > Array Operators > should find users with arrays of specific size using $size [0.07ms]
(pass) Query Integration Tests > Logical Operators > should find active developers using $and [0.05ms]
(pass) Query Integration Tests > Logical Operators > should find users who are either young or have high score using $or [0.12ms]
(pass) Query Integration Tests > Logical Operators > should find users who are NOT inactive using $not [0.05ms]
(pass) Query Integration Tests > Logical Operators > should find users who are neither young nor have low score using $nor [0.04ms]
(pass) Query Integration Tests > Element Operators > should find users where age field exists using $exists [0.05ms]
(pass) Query Integration Tests > Element Operators > should find users where non-existent field does not exist using $exists [0.04ms]
(pass) Query Integration Tests > Element Operators > should find users by field type using $type [0.04ms]
(pass) Query Integration Tests > Element Operators > should find numeric fields using $type [0.03ms]
(pass) Query Integration Tests > Complex Queries > should handle complex nested query with multiple operators [0.05ms]
(pass) Query Integration Tests > Complex Queries > should handle query with implicit AND (multiple fields) [0.16ms]
(pass) Query Integration Tests > Complex Queries > should handle empty query (matches all) [0.04ms]
(pass) Query Integration Tests > Edge Cases > should handle query that matches no documents [0.03ms]
(pass) Query Integration Tests > Edge Cases > should handle query with null values [0.04ms]
(pass) Query Integration Tests > Edge Cases > should handle query with undefined values [0.06ms]
(pass) Query Integration Tests > Performance and Functionality > should work with large dataset efficiently [0.90ms]
(pass) Query Integration Tests > Performance and Functionality > should be reusable across different datasets [0.03ms]

src/__test__/typed-collection-updates.test.ts:
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $set operator [0.62ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $inc operator [0.04ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $mul operator [0.26ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $min and $max operators [0.23ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $currentDate operator [0.18ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $unset operator [0.10ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $addToSet operation
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $push operation [0.11ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pull operation
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pop operation
(pass) TypedCollection Type-safe Update Operations > Mixed Update Operations > should handle mixed direct and operator updates [0.10ms]

src/__test__/SingleKeyUtils.test.ts:
(pass) SingleKeyUtils > createComparator > ascending order (default) > should handle numbers correctly [0.60ms]
(pass) SingleKeyUtils > createComparator > ascending order (default) > should handle strings correctly [0.04ms]
(pass) SingleKeyUtils > createComparator > ascending order (default) > should handle booleans correctly
(pass) SingleKeyUtils > createComparator > ascending order (default) > should handle dates correctly [0.01ms]
(pass) SingleKeyUtils > createComparator > ascending order (default) > should handle null values correctly
(pass) SingleKeyUtils > createComparator > ascending order (default) > should handle undefined values correctly [0.03ms]
(pass) SingleKeyUtils > createComparator > ascending order (default) > should fallback to string comparison for mixed types [0.01ms]
(pass) SingleKeyUtils > createComparator > descending order > should handle numbers correctly in descending order [0.01ms]
(pass) SingleKeyUtils > createComparator > descending order > should handle strings correctly in descending order [0.01ms]
(pass) SingleKeyUtils > createComparator > descending order > should handle null values correctly in descending order
(pass) SingleKeyUtils > createComparator > default behavior > should default to ascending order when no order specified [0.02ms]
(pass) SingleKeyUtils > validateSortOrder > should validate correct sort orders [0.03ms]
(pass) SingleKeyUtils > validateSortOrder > should reject invalid sort orders
(pass) SingleKeyUtils > normalizeSortOrder > should return valid sort orders as-is [0.02ms]
(pass) SingleKeyUtils > normalizeSortOrder > should default to asc for invalid values

src/__test__/wal-transaction-coordination.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALTransactionManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/wal-transaction-coordination.test.ts'
-------------------------------


src/__test__/advanced-features.test.ts:
(pass) Advanced Features Test Suite > WAL Compression > Basic Compression Operations > should compress and decompress WAL entries with gzip [1.22ms]
(pass) Advanced Features Test Suite > WAL Compression > Basic Compression Operations > should compress and decompress WAL entries with lz4 [0.40ms]
(pass) Advanced Features Test Suite > WAL Compression > Basic Compression Operations > should skip compression for small entries
(pass) Advanced Features Test Suite > WAL Compression > Basic Compression Operations > should skip compression when ratio is poor [0.22ms]
(pass) Advanced Features Test Suite > WAL Compression > Basic Compression Operations > should handle compression disabled
(pass) Advanced Features Test Suite > WAL Compression > Compression Statistics > should calculate compression statistics correctly [0.25ms]
(pass) Advanced Features Test Suite > WAL Compression > Compression Statistics > should update compression options [0.03ms]
(pass) Advanced Features Test Suite > WAL Compression > Batch Operations > should handle batch compression and decompression [0.32ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Basic Monitoring Operations > should initialize with default configuration
(pass) Advanced Features Test Suite > Performance Monitoring > Basic Monitoring Operations > should initialize with custom configuration
(pass) Advanced Features Test Suite > Performance Monitoring > Basic Monitoring Operations > should record operation metrics [260.21ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Basic Monitoring Operations > should record WAL operations
(pass) Advanced Features Test Suite > Performance Monitoring > Basic Monitoring Operations > should record transaction operations
(pass) Advanced Features Test Suite > Performance Monitoring > Basic Monitoring Operations > should record compression operations [0.08ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Metrics Collection > should collect metrics periodically [278.86ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Metrics Collection > should maintain bounded history [301.18ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Alert System > should generate latency alerts [554.31ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Alert System > should generate error rate alerts [257.10ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Alert System > should clear alerts [0.20ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Configuration Management > should update configuration [0.16ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Configuration Management > should reset metrics [0.19ms]
(pass) Advanced Features Test Suite > Performance Monitoring > Summary Statistics > should provide comprehensive summary [250.77ms]
(pass) Advanced Features Test Suite > Integration Tests > should integrate compression with monitoring [151.55ms]

src/__test__/composite-index-basic.test.ts:
(pass) Composite Index Basic Functionality > CompositeKeyUtils Core Functions > should serialize and deserialize composite keys correctly
(pass) Composite Index Basic Functionality > CompositeKeyUtils Core Functions > should handle null and undefined values [0.06ms]
(pass) Composite Index Basic Functionality > CompositeKeyUtils Core Functions > should escape special characters correctly [0.08ms]
(pass) Composite Index Basic Functionality > CompositeKeyUtils Core Functions > should use custom separator [0.06ms]
(pass) Composite Index Basic Functionality > Index Field Normalization > should normalize single key definition [0.08ms]
(pass) Composite Index Basic Functionality > Index Field Normalization > should normalize composite key definition [0.06ms]
(pass) Composite Index Basic Functionality > Index Name Generation > should generate name for single field [0.01ms]
(pass) Composite Index Basic Functionality > Index Name Generation > should generate name for composite fields [0.02ms]
(pass) Composite Index Basic Functionality > Process Function Creation > should create process function for single field [0.03ms]
(pass) Composite Index Basic Functionality > Process Function Creation > should create process function for composite fields [0.05ms]
(pass) Composite Index Basic Functionality > Process Function Creation > should use custom separator in process function [0.02ms]
(pass) Composite Index Basic Functionality > Comparator Creation > should return undefined for single ascending field [0.01ms]
(pass) Composite Index Basic Functionality > Comparator Creation > should create comparator for single descending field [0.03ms]
(pass) Composite Index Basic Functionality > Comparator Creation > should create comparator for composite fields [0.07ms]
(pass) Composite Index Basic Functionality > Index Detection > should detect single key index [0.02ms]
(pass) Composite Index Basic Functionality > Index Detection > should detect composite index [0.02ms]
(pass) Composite Index Basic Functionality > Index Detection > should not consider single key in array as composite [0.02ms]
(pass) Composite Index Basic Functionality > Edge Cases > should handle empty values [0.04ms]
(pass) Composite Index Basic Functionality > Edge Cases > should handle very long keys [0.34ms]
(pass) Composite Index Basic Functionality > Edge Cases > should handle unicode characters [0.22ms]

src/__test__/wal-basic.test.ts:
(pass) WAL Basic Functionality > MemoryWALManager > should write and read WAL entries [0.46ms]
(pass) WAL Basic Functionality > MemoryWALManager > should assign sequential sequence numbers [0.31ms]
(pass) WAL Basic Functionality > MemoryWALManager > should filter entries by sequence number [0.27ms]
(pass) WAL Basic Functionality > MemoryWALManager > should truncate entries before sequence number [0.07ms]
(pass) WAL Basic Functionality > MemoryWALManager > should create checkpoints [0.20ms]
(pass) WAL Basic Functionality > FileWALManager > should persist WAL entries to file [0.76ms]
(pass) WAL Basic Functionality > FileWALManager > should recover from existing WAL file [1.07ms]
WAL entry checksum mismatch for sequence 1
(pass) WAL Basic Functionality > FileWALManager > should validate checksums [1.39ms]
WAL entry checksum mismatch for sequence 1
Starting memory WAL recovery...
Replaying memory transaction tx-001 with 3 entries
Memory Replay: INSERT on users
Memory WAL recovery completed: 1 recovered, 0 rolled back
(pass) WAL Basic Functionality > WAL Recovery Scenarios > should recover committed transactions [0.66ms]
Starting memory WAL recovery...
Rolling back memory transaction tx-001
Memory Rollback: INSERT on users
Memory WAL recovery completed: 0 recovered, 1 rolled back
(pass) WAL Basic Functionality > WAL Recovery Scenarios > should rollback incomplete transactions [0.29ms]
Starting memory WAL recovery...
Rolling back memory transaction tx-001
Memory Rollback: INSERT on users
Memory WAL recovery completed: 0 recovered, 1 rolled back
(pass) WAL Basic Functionality > WAL Recovery Scenarios > should handle explicitly rolled back transactions [0.21ms]

src/__test__/query-simple-integration.test.ts:
(pass) Query Simple Integration Tests > Real-world Query Scenarios > should find products in stock under $50 [1.07ms]
(pass) Query Simple Integration Tests > Real-world Query Scenarios > should find electronics with high ratings [0.13ms]
(pass) Query Simple Integration Tests > Real-world Query Scenarios > should find products with office-related tags [0.13ms]
(pass) Query Simple Integration Tests > Real-world Query Scenarios > should find products created in 2023 with high view counts [0.17ms]
(pass) Query Simple Integration Tests > Complex Business Logic Queries > should find recommended products (in stock, rated, popular) [0.08ms]
(pass) Query Simple Integration Tests > Complex Business Logic Queries > should find products needing restocking or promotion [0.08ms]
(pass) Query Simple Integration Tests > Complex Business Logic Queries > should find premium products (expensive or highly rated) [0.07ms]
(pass) Query Simple Integration Tests > Complex Business Logic Queries > should find products for office setup (furniture or electronics) [0.18ms]
(pass) Query Simple Integration Tests > Data Analysis Queries > should segment products by price range [0.28ms]
(pass) Query Simple Integration Tests > Data Analysis Queries > should find products with missing or low ratings [0.11ms]
(pass) Query Simple Integration Tests > Data Analysis Queries > should find recently updated popular products [0.15ms]
(pass) Query Simple Integration Tests > Query Performance and Optimization > should handle multiple filters efficiently [0.14ms]
(pass) Query Simple Integration Tests > Query Performance and Optimization > should handle regex patterns efficiently [0.25ms]
(pass) Query Simple Integration Tests > Query Performance and Optimization > should handle complex nested queries efficiently [0.11ms]
(pass) Query Simple Integration Tests > Edge Cases and Robustness > should handle empty result sets gracefully [0.08ms]
(pass) Query Simple Integration Tests > Edge Cases and Robustness > should handle queries matching all products [0.08ms]
(pass) Query Simple Integration Tests > Edge Cases and Robustness > should handle null and undefined values correctly [0.11ms]
(pass) Query Simple Integration Tests > Edge Cases and Robustness > should handle type coercion appropriately [0.05ms]

src/__test__/raft-log-replication.test.ts:
(pass) Raft Log Replication > Initialization > should initialize with correct peer state [0.05ms]
(pass) Raft Log Replication > AppendEntries Handling (Follower) > should accept valid AppendEntries request [0.53ms]
(pass) Raft Log Replication > AppendEntries Handling (Follower) > should reject AppendEntries with mismatched prevLog [0.15ms]
(pass) Raft Log Replication > AppendEntries Handling (Follower) > should handle empty AppendEntries (heartbeat) [0.12ms]
(pass) Raft Log Replication > Leader Replication > should start replication as leader [0.15ms]
(pass) Raft Log Replication > Leader Replication > should replicate to all peers successfully [0.21ms]
(pass) Raft Log Replication > Leader Replication > should handle replication failures [0.13ms]
(pass) Raft Log Replication > Leader Replication > should advance commit index with majority replication [0.16ms]
(pass) Raft Log Replication > Error Handling > should handle RPC errors gracefully [0.36ms]
(pass) Raft Log Replication > Error Handling > should throw error when RPC handler not set [0.05ms]
(pass) Raft Log Replication > Log Conflicts > should detect log conflicts [0.19ms]
(pass) Raft Log Replication > Metrics > should provide accurate replication metrics [0.10ms]

src/__test__/CompositeKeyUtils.test.ts:
(pass) CompositeKeyUtils > serialize > should serialize simple values
(pass) CompositeKeyUtils > serialize > should handle null and undefined values [0.03ms]
(pass) CompositeKeyUtils > serialize > should handle empty array
(pass) CompositeKeyUtils > serialize > should use custom separator
(pass) CompositeKeyUtils > serialize > should escape separator characters in values
(pass) CompositeKeyUtils > serialize > should handle different data types [4.12ms]
(pass) CompositeKeyUtils > serialize > should handle empty strings [0.06ms]
(pass) CompositeKeyUtils > deserialize > should deserialize simple values [0.02ms]
(pass) CompositeKeyUtils > deserialize > should handle null values
(pass) CompositeKeyUtils > deserialize > should handle empty string [0.01ms]
(pass) CompositeKeyUtils > deserialize > should use custom separator
(pass) CompositeKeyUtils > deserialize > should unescape separator characters [0.02ms]
(pass) CompositeKeyUtils > deserialize > should handle single value [0.01ms]
(pass) CompositeKeyUtils > compare > should compare compound keys lexicographically [0.04ms]
(pass) CompositeKeyUtils > compare > should handle equal keys
(pass) CompositeKeyUtils > compare > should handle reverse comparison
(pass) CompositeKeyUtils > compare > should handle different length keys [0.02ms]
(pass) CompositeKeyUtils > compare > should handle numeric comparison as strings [0.03ms]
(pass) CompositeKeyUtils > extractValues > should extract simple property values [0.08ms]
(pass) CompositeKeyUtils > extractValues > should extract nested property values [0.07ms]
(pass) CompositeKeyUtils > extractValues > should handle missing properties [0.01ms]
(pass) CompositeKeyUtils > extractValues > should handle array access [0.02ms]
(pass) CompositeKeyUtils > extractValues > should handle mixed path types [0.05ms]
(pass) CompositeKeyUtils > createKey > should create compound key from item [0.03ms]
(pass) CompositeKeyUtils > createKey > should use custom separator [0.02ms]
(pass) CompositeKeyUtils > createKey > should handle single key path [0.02ms]
(pass) CompositeKeyUtils > validateKeyPaths > should validate correct key paths [0.04ms]
(pass) CompositeKeyUtils > validateKeyPaths > should reject empty array
(pass) CompositeKeyUtils > validateKeyPaths > should reject non-array input
(pass) CompositeKeyUtils > validateKeyPaths > should reject empty strings
(pass) CompositeKeyUtils > validateKeyPaths > should reject non-string paths [0.01ms]
(pass) CompositeKeyUtils > generateIndexName > should generate index name from key paths [0.01ms]
(pass) CompositeKeyUtils > generateIndexName > should handle single key path
(pass) CompositeKeyUtils > generateIndexName > should handle nested paths
(pass) CompositeKeyUtils > isEmptyValue > should identify null as empty [0.02ms]
(pass) CompositeKeyUtils > isEmptyValue > should identify undefined as empty
(pass) CompositeKeyUtils > isEmptyValue > should identify empty string as empty
(pass) CompositeKeyUtils > isEmptyValue > should not identify zero as empty
(pass) CompositeKeyUtils > isEmptyValue > should not identify false as empty
(pass) CompositeKeyUtils > isEmptyValue > should not identify non-empty string as empty
(pass) CompositeKeyUtils > createPartialKey > should create partial key with all values [0.04ms]
(pass) CompositeKeyUtils > createPartialKey > should create partial key stopping at undefined
(pass) CompositeKeyUtils > createPartialKey > should handle leading undefined [0.01ms]
(pass) CompositeKeyUtils > createPartialKey > should handle all undefined
(pass) CompositeKeyUtils > createPartialKey > should include null values but stop at undefined
(pass) CompositeKeyUtils > Edge Cases > should handle very long compound keys [0.11ms]
(pass) CompositeKeyUtils > Edge Cases > should handle special characters in values [0.01ms]
(pass) CompositeKeyUtils > Edge Cases > should handle unicode characters [0.02ms]
(pass) CompositeKeyUtils > Edge Cases > should maintain order consistency [0.03ms]

src/__test__/wal-storage-integration.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/wal-storage-integration.test.ts'
-------------------------------


src/__test__/performance-benchmarks.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/performance-benchmarks.test.ts'
-------------------------------


src/__test__/replication-network.test.ts:
NetworkManager started on node node1, port 8421
NetworkManager started on node node2, port 8422
NetworkManager started on node node3, port 8423
(pass) Replication Network Layer > Basic Network Operations > should create NetworkManager instances [0.21ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8591
NetworkManager started on node node2, port 8592
NetworkManager started on node node3, port 8593
Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8383/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Connection test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8383/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Basic Network Operations > should establish connections between nodes [2.88ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8202
NetworkManager started on node node2, port 8203
NetworkManager started on node node3, port 8204
Failed to connect to node nonexistent (attempt 1): 115 |         this.#createWebSocket(url, protocols, headers, method);
116 |       return;
117 |     }
118 |     this.#createWebSocket(url, protocols, headers, method);
119 |   }
120 |     let ws = this.#ws = new WebSocket(url, headers ? { headers, method, protocols } : protocols);
                              ^
SyntaxError: Invalid url for WebSocket ws://localhost:99999?nodeId=node1
      at #createWebSocket (ws:120:25)
      at new WebSocket (ws:117:26)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:219:18)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/replication-network.test.ts:80:51)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/replication-network.test.ts:77:58)

Retrying connection to nonexistent in 1000ms
(pass) Replication Network Layer > Basic Network Operations > should handle connection failures gracefully [3.47ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8649
NetworkManager started on node node2, port 8650
NetworkManager started on node node3, port 8651
Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8266/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Message test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8266/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Message Communication > should send and receive messages [0.76ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8988
NetworkManager started on node node2, port 8989
NetworkManager started on node node3, port 8990
Failed to connect to node node3 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8198/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node3 in 1000ms
Broadcast test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8198/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Message Communication > should broadcast messages to multiple nodes [0.98ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8220
NetworkManager started on node node2, port 8221
NetworkManager started on node node3, port 8222
Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8197/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8337/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Checksum test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8337/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Message Communication > should validate message checksums [1.44ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8645
NetworkManager started on node node2, port 8646
NetworkManager started on node node3, port 8647
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8639/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Connection tracking test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8639/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Connection Management > should track connected nodes [0.64ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8451
NetworkManager started on node node2, port 8452
NetworkManager started on node node3, port 8453
Retry failed for node nonexistent: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8948/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Disconnection test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8948/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Connection Management > should handle disconnections [1.02ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8821
NetworkManager started on node node2, port 8822
NetworkManager started on node node3, port 8823
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8754/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Event test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8754/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Connection Management > should emit connection events [0.95ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8563
NetworkManager started on node node2, port 8564
NetworkManager started on node node3, port 8565
Retry failed for node node3: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

(pass) Replication Network Layer > Error Handling > should handle invalid message formats
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8487
NetworkManager started on node node2, port 8488
NetworkManager started on node node3, port 8489
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node timeout-test (attempt 1): 115 |         this.#createWebSocket(url, protocols, headers, method);
116 |       return;
117 |     }
118 |     this.#createWebSocket(url, protocols, headers, method);
119 |   }
120 |     let ws = this.#ws = new WebSocket(url, headers ? { headers, method, protocols } : protocols);
                              ^
SyntaxError: Invalid url for WebSocket ws://localhost:99998?nodeId=node1
      at #createWebSocket (ws:120:25)
      at new WebSocket (ws:117:26)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:219:18)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/replication-network.test.ts:326:27)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/replication-network.test.ts:322:44)

Retrying connection to timeout-test in 1000ms
(pass) Replication Network Layer > Error Handling > should handle network timeouts [0.61ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8736
NetworkManager started on node node2, port 8737
NetworkManager started on node node3, port 8738
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8217/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Recovery test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8217/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Error Handling > should recover from connection failures [1.02ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8532
NetworkManager started on node node2, port 8533
NetworkManager started on node node3, port 8534
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8294/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Failed to connect to node node3 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8295/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node3 in 1000ms
(pass) Replication Network Layer > Performance & Reliability > should handle multiple rapid connections [1.19ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3
NetworkManager started on node node1, port 8811
NetworkManager started on node node2, port 8812
NetworkManager started on node node3, port 8813
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Failed to connect to node node2 (attempt 1): ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8733/?nodeId=node1' failed: Failed to connect",
  error: null,
}
Retrying connection to node2 in 1000ms
Performance test failed: ErrorEvent {
  type: "error",
  message: "WebSocket connection to 'ws://localhost:8733/?nodeId=node1' failed: Failed to connect",
  error: null,
}
(pass) Replication Network Layer > Performance & Reliability > should maintain performance under load [1.11ms]
Closing NetworkManager for node node1
Closing NetworkManager for node node2
Closing NetworkManager for node node3
WebSocket server closed for node node1
WebSocket server closed for node node2
WebSocket server closed for node node3

src/__test__/autoinc-and-default-index.test.ts:
(pass) AutoInc and Default Index Tests > âœ… AutoInc ID Generation > should auto-generate sequential IDs when auto is true [0.34ms]
(pass) AutoInc and Default Index Tests > âœ… AutoInc ID Generation > should use provided ID when auto is false [0.21ms]
(pass) AutoInc and Default Index Tests > âœ… AutoInc ID Generation > should handle custom ID field name with autoinc [0.14ms]
(pass) AutoInc and Default Index Tests > âœ… Default Index Creation > should automatically create unique required index for ID field [0.04ms]
(pass) AutoInc and Default Index Tests > âœ… Default Index Creation > should create index with custom ID field name [0.11ms]
(pass) AutoInc and Default Index Tests > âœ… Default Index Creation > should not override explicitly provided index for ID field [0.05ms]
(pass) AutoInc and Default Index Tests > âœ… Edge Cases and Error Handling > should handle missing name in config
(pass) AutoInc and Default Index Tests > âœ… Edge Cases and Error Handling > should use default values when config is minimal [0.06ms]
(pass) AutoInc and Default Index Tests > âœ… Edge Cases and Error Handling > should handle string ID configuration [0.05ms]
(pass) AutoInc and Default Index Tests > âœ… Integration with Indexes > should work correctly with additional indexes [0.24ms]
(pass) AutoInc and Default Index Tests > âœ… Integration with Indexes > should maintain index consistency during operations [0.21ms]

src/__test__/single-key-sort-order.test.ts:
(pass) Single Key Sort Order Tests > Sort Order Validation > should validate ascending sort order
(pass) Single Key Sort Order Tests > Sort Order Validation > should validate descending sort order
(pass) Single Key Sort Order Tests > Sort Order Validation > should reject invalid sort orders [0.05ms]
(pass) Single Key Sort Order Tests > Sort Order Normalization > should normalize valid sort orders to standard format [0.08ms]
(pass) Single Key Sort Order Tests > Sort Order Normalization > should default to ascending for undefined [0.09ms]
(pass) Single Key Sort Order Tests > Comparator Creation > should create ascending comparator for numbers [0.09ms]
(pass) Single Key Sort Order Tests > Comparator Creation > should create descending comparator for numbers [0.03ms]
(pass) Single Key Sort Order Tests > Comparator Creation > should handle string comparison [0.10ms]
(pass) Single Key Sort Order Tests > Comparator Creation > should handle null and undefined values [0.04ms]
(pass) Single Key Sort Order Tests > Comparator Creation > should handle mixed types with fallback to string comparison [0.04ms]
(pass) Single Key Sort Order Tests > Edge Cases > should handle boolean values [0.03ms]
(pass) Single Key Sort Order Tests > Edge Cases > should handle date objects [0.06ms]
(pass) Single Key Sort Order Tests > Edge Cases > should handle array values [0.04ms]

src/__test__/stress-testing.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/stress-testing.test.ts'
-------------------------------


src/__test__/raft-state-machine.test.ts:
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Initialization > should initialize successfully [0.07ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Command Application > should apply CREATE command [1.77ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
(pass) Raft State Machine > Command Application > should apply UPDATE command [1.12ms]
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Command Application > should apply DELETE command [1.00ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Command Application > should reject entries with invalid index [0.11ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
(pass) Raft State Machine > Transaction Commands > should handle transaction begin [0.47ms]
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Transaction Commands > should handle transaction commit [1.47ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Snapshots > should create snapshot [0.46ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Snapshots > should restore from snapshot [0.77ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Snapshots > should trigger automatic snapshot [0.53ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
(pass) Raft State Machine > Read Operations > should perform read operations [0.63ms]
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Read Operations > should throw error for non-existent collection [0.10ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > State Management > should track last applied index [0.16ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > State Management > should not allow decreasing last applied index [0.06ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
Starting WAL-based transaction recovery...
Starting WAL recovery...
Global WAL sharing not yet implemented, using per-collection WAL
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Error Handling > should handle unknown command types [0.37ms]
Starting WAL-based transaction recovery...
Starting WAL recovery...
WAL recovery completed: 0 recovered, 0 rolled back
WAL recovery completed successfully
(pass) Raft State Machine > Metrics > should provide accurate metrics [0.10ms]

src/__test__/raft-network-layer.test.ts:
(pass) Raft Network Layer > Initialization > should initialize with correct peer metrics
(pass) Raft Network Layer > Initialization > should report healthy status initially [0.03ms]
(pass) Raft Network Layer > RPC Operations > should send RequestVote RPC successfully [4.03ms]
(pass) Raft Network Layer > RPC Operations > should send AppendEntries RPC successfully [1.28ms]
(pass) Raft Network Layer > RPC Operations > should send InstallSnapshot RPC successfully [2.36ms]
(pass) Raft Network Layer > Retry Mechanism > should retry failed requests with exponential backoff [9.45ms]
(pass) Raft Network Layer > Retry Mechanism > should respect maximum retry attempts [0.56ms]
(pass) Raft Network Layer > Broadcast Operations > should broadcast to all peers [2.60ms]
(pass) Raft Network Layer > Broadcast Operations > should handle majority requirement in broadcast [2.35ms]
(pass) Raft Network Layer > Partition Detection > should detect network partitions [0.17ms]
(pass) Raft Network Layer > Partition Detection > should track partition metrics [0.07ms]
(pass) Raft Network Layer > Partition Detection > should handle partition recovery simulation [151.28ms]
(pass) Raft Network Layer > Timeout Handling > should handle request timeouts [1.50ms]
(pass) Raft Network Layer > Metrics > should track network metrics accurately [10.47ms]
(pass) Raft Network Layer > Metrics > should track latency metrics [1.34ms]
(pass) Raft Network Layer > Health Status > should report unhealthy when majority of peers are partitioned [0.06ms]
(pass) Raft Network Layer > Health Status > should remain healthy with minority partitioned [0.02ms]
(pass) Raft Network Layer > Error Handling > should handle unknown peer requests [0.06ms]
(pass) Raft Network Layer > Error Handling > should emit appropriate events on failures [0.08ms]
(pass) Raft Network Layer > Cleanup > should clean up resources properly [0.04ms]

src/__test__/IndexManager.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../IndexManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/IndexManager.test.ts'
-------------------------------


src/__test__/CSDatabase.savepoint.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../CSDatabase' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/CSDatabase.savepoint.test.ts'
-------------------------------


src/__test__/query-advanced.test.ts:
(pass) Query Advanced Features Tests > Regular Expression Queries > should find users by email domain using regex [1.65ms]
(pass) Query Advanced Features Tests > Regular Expression Queries > should find users by name pattern using string regex [0.22ms]
(pass) Query Advanced Features Tests > Regular Expression Queries > should find users by bio content using case-insensitive regex [0.09ms]
(pass) Query Advanced Features Tests > Regular Expression Queries > should find users with specific skills using regex [0.10ms]
(pass) Query Advanced Features Tests > Nested Field Queries > should query nested object fields [0.21ms]
(pass) Query Advanced Features Tests > Nested Field Queries > should query deeply nested fields with comparison operators [0.17ms]
(pass) Query Advanced Features Tests > Nested Field Queries > should query nested array fields [0.13ms]
(pass) Query Advanced Features Tests > Nested Field Queries > should query nested date fields [0.18ms]
(pass) Query Advanced Features Tests > Array Element Matching > should find users with all specified skills using $all [0.16ms]
(pass) Query Advanced Features Tests > Array Element Matching > should find users with specific number of skills using $size [0.23ms]
(pass) Query Advanced Features Tests > Array Element Matching > should find users with skills containing specific pattern using $elemMatch [0.21ms]
(pass) Query Advanced Features Tests > Modulo and Mathematical Operators > should find users with even login counts using $mod [0.09ms]
(pass) Query Advanced Features Tests > Modulo and Mathematical Operators > should find users with login count remainder 1 when divided by 3 [0.12ms]
(pass) Query Advanced Features Tests > Type Checking > should find fields of specific types [0.12ms]
(pass) Query Advanced Features Tests > Type Checking > should find boolean fields [0.08ms]
(pass) Query Advanced Features Tests > Type Checking > should find date fields [0.03ms]
(pass) Query Advanced Features Tests > Type Checking > should find array fields [0.08ms]
(pass) Query Advanced Features Tests > Complex Logical Combinations > should find verified users with high ratings and recent activity [0.26ms]
(pass) Query Advanced Features Tests > Complex Logical Combinations > should find users who are either new or very active [0.35ms]
(pass) Query Advanced Features Tests > Complex Logical Combinations > should find users with complex skill requirements [0.40ms]
(pass) Query Advanced Features Tests > Edge Cases and Error Handling > should handle queries on non-existent nested fields [0.14ms]
(pass) Query Advanced Features Tests > Edge Cases and Error Handling > should handle mixed type comparisons gracefully [0.17ms]
(pass) Query Advanced Features Tests > Edge Cases and Error Handling > should handle empty arrays in $in operator [0.08ms]
(pass) Query Advanced Features Tests > Edge Cases and Error Handling > should handle null values in nested queries [0.10ms]
(pass) Query Advanced Features Tests > Performance with Complex Queries > should handle deeply nested queries efficiently [0.12ms]
(pass) Query Advanced Features Tests > Performance with Complex Queries > should handle multiple regex patterns efficiently [0.22ms]

src/__test__/raft-log-manager.test.ts:
(pass) Raft Log Manager > Basic Operations > should initialize successfully [0.14ms]
(pass) Raft Log Manager > Basic Operations > should append single entry
(pass) Raft Log Manager > Basic Operations > should append multiple entries [0.16ms]
(pass) Raft Log Manager > Commit Index Management > should set commit index [0.05ms]
(pass) Raft Log Manager > Commit Index Management > should not allow decreasing commit index [0.05ms]
(pass) Raft Log Manager > Metrics > should provide accurate metrics [0.14ms]

src/__test__/memory-adapter-selection.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../CSDatabase' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/memory-adapter-selection.test.ts'
-------------------------------


src/performance/IndexManager.perf.test.ts:
Non-Unique Inserts: 19.74ms
(pass) IndexManager Performance > with non-unique index > should handle 10000 non-unique inserts in a reasonable time [19.93ms]
Unique Inserts: 20.33ms
(pass) IndexManager Performance > should handle 10000 unique inserts in a reasonable time [20.48ms]
Unique Finds: 9.68ms
(pass) IndexManager Performance > should handle 10000 unique finds in a reasonable time [9.93ms]
Unique Removes: 19.65ms
(pass) IndexManager Performance > should handle 10000 unique removes in a reasonable time [19.90ms]

src/collection/__test__/CollectionFactory.test.ts:
Retry failed for node timeout-test: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

17 |     factory = new CollectionFactory<TestDoc>(storageAdapter);
18 |   });
19 | 
20 |   it('should create a new collection if it does not exist', async () => {
21 |     const collection = await factory.getCollection('users', [{ field: 'email', unique: true }]);
22 |     expect(collection).toBeInstanceOf(Collection);
                            ^
error: expect(received).toBeInstanceOf(expected)

Expected constructor: [class Collection]
Received value: Collection {
  root: "./data/",
  cronJob: undefined,
  storage: Promise { <resolved> },
  ttl: undefined,
  rotate: undefined,
  name: "users",
  id: "id",
  auto: true,
  audit: false,
  validation: ZodObject {
    spa: [AsyncFunction: safeParseAsync],
    _def: {
      shape: [Function: shape],
      unknownKeys: "passthrough",
      catchall: ZodNever {
        spa: [AsyncFunction: safeParseAsync],
        _def: {
          typeName: "ZodNever",
        },
        parse: [Function: parse],
        safeParse: [Function: safeParse],
        parseAsync: [AsyncFunction: parseAsync],
        safeParseAsync: [AsyncFunction: safeParseAsync],
        refine: [Function: refine],
        refinement: [Function: refinement],
        superRefine: [Function: superRefine],
        optional: [Function: optional],
        nullable: [Function: nullable],
        nullish: [Function: nullish],
        array: [Function: array],
        promise: [Function: promise],
        or: [Function: or],
        and: [Function: and],
        transform: [Function: transform],
        brand: [Function: brand],
        default: [Function: default],
        catch: [Function: catch],
        describe: [Function: describe],
        pipe: [Function: pipe],
        readonly: [Function: readonly],
        isNullable: [Function: isNullable],
        isOptional: [Function: isOptional],
        "~standard": {
          version: 1,
          vendor: "zod",
          validate: [Function: validate],
        },
        _parse: [Function: _parse],
        description: [Getter],
        _getType: [Function: _getType],
        _getOrReturnCtx: [Function: _getOrReturnCtx],
        _processInputParams: [Function: _processInputParams],
        _parseSync: [Function: _parseSync],
        _parseAsync: [Function: _parseAsync],
        "~validate": [Function: ~validate],
        _refinement: [Function: _refinement],
      },
      typeName: "ZodObject",
    },
    parse: [Function: parse],
    safeParse: [Function: safeParse],
    parseAsync: [AsyncFunction: parseAsync],
    safeParseAsync: [AsyncFunction: safeParseAsync],
    refine: [Function: refine],
    refinement: [Function: refinement],
    superRefine: [Function: superRefine],
    optional: [Function: optional],
    nullable: [Function: nullable],
    nullish: [Function: nullish],
    array: [Function: array],
    promise: [Function: promise],
    or: [Function: or],
    and: [Function: and],
    transform: [Function: transform],
    brand: [Function: brand],
    default: [Function: default],
    catch: [Function: catch],
    describe: [Function: describe],
    pipe: [Function: pipe],
    readonly: [Function: readonly],
    isNullable: [Function: isNullable],
    isOptional: [Function: isOptional],
    "~standard": {
      version: 1,
      vendor: "zod",
      validate: [Function: validate],
    },
    _cached: {
      shape: {
        __ttltime: ZodOptional {
          spa: [AsyncFunction: safeParseAsync],
          _def: {
            innerType: ZodNumber {
              spa: [AsyncFunction: safeParseAsync],
              _def: {
                checks: [],
                typeName: "ZodNumber",
                coerce: false,
              },
              parse: [Function: parse],
              safeParse: [Function: safeParse],
              parseAsync: [AsyncFunction: parseAsync],
              safeParseAsync: [AsyncFunction: safeParseAsync],
              refine: [Function: refine],
              refinement: [Function: refinement],
              superRefine: [Function: superRefine],
              optional: [Function: optional],
              nullable: [Function: nullable],
              nullish: [Function: nullish],
              array: [Function: array],
              promise: [Function: promise],
              or: [Function: or],
              and: [Function: and],
              transform: [Function: transform],
              brand: [Function: brand],
              default: [Function: default],
              catch: [Function: catch],
              describe: [Function: describe],
              pipe: [Function: pipe],
              readonly: [Function: readonly],
              isNullable: [Function: isNullable],
              isOptional: [Function: isOptional],
              "~standard": {
                version: 1,
                vendor: "zod",
                validate: [Function: validate],
              },
              min: [Function: gte],
              max: [Function: lte],
              step: [Function: multipleOf],
              _parse: [Function: _parse],
              gte: [Function: gte],
              gt: [Function: gt],
              lte: [Function: lte],
              lt: [Function: lt],
              setLimit: [Function: setLimit],
              _addCheck: [Function: _addCheck],
              int: [Function: int],
              positive: [Function: positive],
              negative: [Function: negative],
              nonpositive: [Function: nonpositive],
              nonnegative: [Function: nonnegative],
              multipleOf: [Function: multipleOf],
              finite: [Function: finite],
              safe: [Function: safe],
              minValue: [Getter],
              maxValue: [Getter],
              isInt: [Getter],
              isFinite: [Getter],
              description: [Getter],
              _getType: [Function: _getType],
              _getOrReturnCtx: [Function: _getOrReturnCtx],
              _processInputParams: [Function: _processInputParams],
              _parseSync: [Function: _parseSync],
              _parseAsync: [Function: _parseAsync],
              "~validate": [Function: ~validate],
              _refinement: [Function: _refinement],
            },
            typeName: "ZodOptional",
            errorMap: [Function: errorMap],
            description: undefined,
          },
          parse: [Function: parse],
          safeParse: [Function: safeParse],
          parseAsync: [AsyncFunction: parseAsync],
          safeParseAsync: [AsyncFunction: safeParseAsync],
          refine: [Function: refine],
          refinement: [Function: refinement],
          superRefine: [Function: superRefine],
          optional: [Function: optional],
          nullable: [Function: nullable],
          nullish: [Function: nullish],
          array: [Function: array],
          promise: [Function: promise],
          or: [Function: or],
          and: [Function: and],
          transform: [Function: transform],
          brand: [Function: brand],
          default: [Function: default],
          catch: [Function: catch],
          describe: [Function: describe],
          pipe: [Function: pipe],
          readonly: [Function: readonly],
          isNullable: [Function: isNullable],
          isOptional: [Function: isOptional],
          "~standard": {
            version: 1,
            vendor: "zod",
            validate: [Function: validate],
          },
          _parse: [Function: _parse],
          unwrap: [Function: unwrap],
          description: [Getter],
          _getType: [Function: _getType],
          _getOrReturnCtx: [Function: _getOrReturnCtx],
          _processInputParams: [Function: _processInputParams],
          _parseSync: [Function: _parseSync],
          _parseAsync: [Function: _parseAsync],
          "~validate": [Function: ~validate],
          _refinement: [Function: _refinement],
        },
        id: ZodOptional {
          spa: [AsyncFunction: safeParseAsync],
          _def: {
            innerType: ZodUnion {
              spa: [AsyncFunction: safeParseAsync],
              _def: {
                options: [
                  [Object ...], [Object ...]
                ],
                typeName: "ZodUnion",
              },
              parse: [Function: parse],
              safeParse: [Function: safeParse],
              parseAsync: [AsyncFunction: parseAsync],
              safeParseAsync: [AsyncFunction: safeParseAsync],
              refine: [Function: refine],
              refinement: [Function: refinement],
              superRefine: [Function: superRefine],
              optional: [Function: optional],
              nullable: [Function: nullable],
              nullish: [Function: nullish],
              array: [Function: array],
              promise: [Function: promise],
              or: [Function: or],
              and: [Function: and],
              transform: [Function: transform],
              brand: [Function: brand],
              default: [Function: default],
              catch: [Function: catch],
              describe: [Function: describe],
              pipe: [Function: pipe],
              readonly: [Function: readonly],
              isNullable: [Function: isNullable],
              isOptional: [Function: isOptional],
              "~standard": {
                version: 1,
                vendor: "zod",
                validate: [Function: validate],
              },
              _parse: [Function: _parse],
              options: [Getter],
              description: [Getter],
              _getType: [Function: _getType],
              _getOrReturnCtx: [Function: _getOrReturnCtx],
              _processInputParams: [Function: _processInputParams],
              _parseSync: [Function: _parseSync],
              _parseAsync: [Function: _parseAsync],
              "~validate": [Function: ~validate],
              _refinement: [Function: _refinement],
            },
            typeName: "ZodOptional",
            errorMap: [Function: errorMap],
            description: undefined,
          },
          parse: [Function: parse],
          safeParse: [Function: safeParse],
          parseAsync: [AsyncFunction: parseAsync],
          safeParseAsync: [AsyncFunction: safeParseAsync],
          refine: [Function: refine],
          refinement: [Function: refinement],
          superRefine: [Function: superRefine],
          optional: [Function: optional],
          nullable: [Function: nullable],
          nullish: [Function: nullish],
          array: [Function: array],
          promise: [Function: promise],
          or: [Function: or],
          and: [Function: and],
          transform: [Function: transform],
          brand: [Function: brand],
          default: [Function: default],
          catch: [Function: catch],
          describe: [Function: describe],
          pipe: [Function: pipe],
          readonly: [Function: readonly],
          isNullable: [Function: isNullable],
          isOptional: [Function: isOptional],
          "~standard": {
            version: 1,
            vendor: "zod",
            validate: [Function: validate],
          },
          _parse: [Function: _parse],
          unwrap: [Function: unwrap],
          description: [Getter],
          _getType: [Function: _getType],
          _getOrReturnCtx: [Function: _getOrReturnCtx],
          _processInputParams: [Function: _processInputParams],
          _parseSync: [Function: _parseSync],
          _parseAsync: [Function: _parseAsync],
          "~validate": [Function: ~validate],
          _refinement: [Function: _refinement],
        },
      },
      keys: [ "__ttltime", "id" ],
    },
    nonstrict: [Function: passthrough],
    augment: [Function: extend],
    _getCached: [Function: _getCached],
    _parse: [Function: _parse],
    shape: [Getter],
    strict: [Function: strict],
    strip: [Function: strip],
    passthrough: [Function: passthrough],
    extend: [Function: extend],
    merge: [Function: merge],
    setKey: [Function: setKey],
    catchall: [Function: catchall],
    pick: [Function: pick],
    omit: [Function: omit],
    deepPartial: [Function: deepPartial],
    partial: [Function: partial],
    required: [Function: required],
    keyof: [Function: keyof],
    description: [Getter],
    _getType: [Function: _getType],
    _getOrReturnCtx: [Function: _getOrReturnCtx],
    _processInputParams: [Function: _processInputParams],
    _parseSync: [Function: _parseSync],
    _parseAsync: [Function: _parseAsync],
    "~validate": [Function: ~validate],
    _refinement: [Function: _refinement],
  },
  indexes: {
    id: BPlusTree {
      t: 32,
      root: 1,
      unique: true,
      nodes: Map(1) {
        1: Node {
          id: 1,
          length: undefined,
          leaf: true,
          key_num: 0,
          size: 0,
          keys: [],
          pointers: [],
          min: undefined,
          max: undefined,
          isFull: false,
          isEmpty: true,
          tree: [Circular],
          children: [],
          _parent: undefined,
          _left: undefined,
          _right: undefined,
          t: [Getter],
          parent: [Getter/Setter],
          left: [Getter/Setter],
          right: [Getter/Setter],
          delete: [Function: delete],
          insert: [Function: insert],
          remove: [Function: remove],
          commit: [Function: commit],
          errors: [Getter],
          toJSON: [Function: toJSON],
        },
      },
      comparator: [Function: compare_keys_primitive],
      defaultEmpty: -Infinity,
      keySerializer: [Function],
      keyDeserializer: [Function],
      next_node_id: 1,
      activeTransactions: Set {},
      get_next_id: [Function: get_next_id],
      includes: [Function: includes],
      equals: [Function: equals],
      equalsNulls: [Function: equalsNulls],
      range: [Function: range],
      rangeGenerator: [Function: rangeGenerator],
      range2: [Function: range2],
      each: [Function: each],
      gt: [Function: gt],
      gte: [Function: gte],
      lt: [Function: lt],
      lte: [Function: lte],
      find: [Function: find],
      list: [Function: list],
      findFirst: [Function: findFirst],
      findLast: [Function: findLast],
      cursor: [Function: cursor],
      reset: [Function: reset],
      min: [Getter],
      max: [Getter],
      size: [Getter],
      node: [Function: node],
      count: [Function: count],
      insert: [Function: insert],
      removeSpecific: [Function: removeSpecific],
      remove: [Function: remove],
      removeMany: [Function: removeMany],
      toJSON: [Function: toJSON],
      begin_transaction: [Function: begin_transaction],
      insert_in_transaction: [Function: insert_in_transaction],
      transaction: [AsyncFunction: transaction],
      find_in_transaction: [Function: find_in_transaction],
      find_all_in_transaction: [Function: find_all_in_transaction],
      get_all_in_transaction: [Function: get_all_in_transaction],
      remove_in_transaction: [Function: remove_in_transaction],
      _do_remove_cow_for_test: [Function: _do_remove_cow_for_test],
      findSiblingNode: [Function: findSiblingNode],
      ensureParentChildSync: [Function: ensureParentChildSync],
      fixDuplicateKeysInParents: [Function: fixDuplicateKeysInParents],
      validateTreeStructure: [Function: validateTreeStructure],
      fixDuplicateKeysOnly: [Function: fixDuplicateKeysOnly],
      ensureValidRoot: [Function: ensureValidRoot],
      findValidRoot: [Function: findValidRoot],
      cleanupOrphanedReferences: [Function: cleanupOrphanedReferences],
      removeDuplicateNodes: [Function: removeDuplicateNodes],
      removeNodeFromParents: [Function: removeNodeFromParents],
      isNodeReachableFromRoot: [Function: isNodeReachableFromRoot],
      isNodeReachableFromSpecificRoot: [Function: isNodeReachableFromSpecificRoot],
    },
    email: BPlusTree {
      t: 32,
      root: 1,
      unique: true,
      nodes: Map(1) {
        1: Node {
          id: 1,
          length: undefined,
          leaf: true,
          key_num: 0,
          size: 0,
          keys: [],
          pointers: [],
          min: undefined,
          max: undefined,
          isFull: false,
          isEmpty: true,
          tree: [Circular],
          children: [],
          _parent: undefined,
          _left: undefined,
          _right: undefined,
          t: [Getter],
          parent: [Getter/Setter],
          left: [Getter/Setter],
          right: [Getter/Setter],
          delete: [Function: delete],
          insert: [Function: insert],
          remove: [Function: remove],
          commit: [Function: commit],
          errors: [Getter],
          toJSON: [Function: toJSON],
        },
      },
      comparator: [Function: compare_keys_primitive],
      defaultEmpty: -Infinity,
      keySerializer: [Function],
      keyDeserializer: [Function],
      next_node_id: 1,
      activeTransactions: Set {},
      get_next_id: [Function: get_next_id],
      includes: [Function: includes],
      equals: [Function: equals],
      equalsNulls: [Function: equalsNulls],
      range: [Function: range],
      rangeGenerator: [Function: rangeGenerator],
      range2: [Function: range2],
      each: [Function: each],
      gt: [Function: gt],
      gte: [Function: gte],
      lt: [Function: lt],
      lte: [Function: lte],
      find: [Function: find],
      list: [Function: list],
      findFirst: [Function: findFirst],
      findLast: [Function: findLast],
      cursor: [Function: cursor],
      reset: [Function: reset],
      min: [Getter],
      max: [Getter],
      size: [Getter],
      node: [Function: node],
      count: [Function: count],
      insert: [Function: insert],
      removeSpecific: [Function: removeSpecific],
      remove: [Function: remove],
      removeMany: [Function: removeMany],
      toJSON: [Function: toJSON],
      begin_transaction: [Function: begin_transaction],
      insert_in_transaction: [Function: insert_in_transaction],
      transaction: [AsyncFunction: transaction],
      find_in_transaction: [Function: find_in_transaction],
      find_all_in_transaction: [Function: find_all_in_transaction],
      get_all_in_transaction: [Function: get_all_in_transaction],
      remove_in_transaction: [Function: remove_in_transaction],
      _do_remove_cow_for_test: [Function: _do_remove_cow_for_test],
      findSiblingNode: [Function: findSiblingNode],
      ensureParentChildSync: [Function: ensureParentChildSync],
      fixDuplicateKeysInParents: [Function: fixDuplicateKeysInParents],
      validateTreeStructure: [Function: validateTreeStructure],
      fixDuplicateKeysOnly: [Function: fixDuplicateKeysOnly],
      ensureValidRoot: [Function: ensureValidRoot],
      findValidRoot: [Function: findValidRoot],
      cleanupOrphanedReferences: [Function: cleanupOrphanedReferences],
      removeDuplicateNodes: [Function: removeDuplicateNodes],
      removeNodeFromParents: [Function: removeNodeFromParents],
      isNodeReachableFromRoot: [Function: isNodeReachableFromRoot],
      isNodeReachableFromSpecificRoot: [Function: isNodeReachableFromSpecificRoot],
    },
  },
  list: List {
    singlefile: true,
    hash: {},
    _counter: 0,
    _count: 0,
    collection: [Circular],
    exists: Promise { <resolved> },
    name: [Getter],
    init: [Function: init],
    clone: [AsyncFunction: clone],
    get: [AsyncFunction: get],
    counter: [Getter],
    length: [Getter/Setter],
    set: [AsyncFunction: set],
    update: [AsyncFunction: update],
    delete: [AsyncFunction: delete],
    reset: [AsyncFunction: reset],
    keys: [Getter],
    load: [Function: load],
    construct: [Function: construct],
    persist: [Function: persist],
    forward: [Getter],
    backward: [Getter],
    toArray: [AsyncGeneratorFunction: toArray],
    toArrayReverse: [AsyncGeneratorFunction: toArrayReverse],
  },
  inserts: [
    [Function], [Function]
  ],
  updates: [
    [AsyncFunction], [AsyncFunction]
  ],
  removes: [
    [Function], [Function]
  ],
  ensures: [
    [Function], [Function]
  ],
  rebuilds: [
    [AsyncFunction], [AsyncFunction]
  ],
  indexDefs: {
    id: {
      key: "id",
      keys: undefined,
      order: "asc",
      separator: undefined,
      auto: true,
      unique: true,
      gen: [Function: autoIncIdGen],
      sparse: false,
      required: true,
      ignoreCase: undefined,
      process: [Function],
    },
    email: {
      key: "email",
      keys: undefined,
      order: "asc",
      separator: undefined,
      auto: false,
      unique: true,
      gen: undefined,
      sparse: false,
      required: false,
      ignoreCase: undefined,
      process: [Function],
    },
  },
  config: [Getter],
  createIndex: [AsyncFunction: createIndex],
  listIndexes: [Function: listIndexes],
  dropIndex: [Function: dropIndex],
  validator: [Function: validator],
  reset: [AsyncFunction: reset],
  load: [AsyncFunction: load],
  store: [Function: store],
  persist: [AsyncFunction: persist],
  push: [AsyncFunction: push],
  create: [AsyncFunction: create],
  save: [AsyncFunction: save],
  first: [AsyncFunction: first],
  last: [AsyncFunction: last],
  lowest: [Function: lowest],
  greatest: [Function: greatest],
  oldest: [Function: oldest],
  latest: [Function: latest],
  findById: [AsyncFunction: findById],
  findBy: [AsyncFunction: findBy],
  findFirstBy: [AsyncFunction: findFirstBy],
  findLastBy: [AsyncFunction: findLastBy],
  find: [AsyncFunction: find],
  findFirst: [AsyncFunction: findFirst],
  findLast: [AsyncFunction: findLast],
  update: [AsyncFunction: update],
  updateFirst: [AsyncFunction: updateFirst],
  updateLast: [AsyncFunction: updateLast],
  updateWithId: [AsyncFunction: updateWithId],
  removeWithId: [AsyncFunction: removeWithId],
  remove: [AsyncFunction: remove],
  removeFirst: [AsyncFunction: removeFirst],
  removeLast: [AsyncFunction: removeLast],
}

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/collection/__test__/CollectionFactory.test.ts:22:24)
(fail) CollectionFactory > should create a new collection if it does not exist [1.93ms]
(pass) CollectionFactory > should return the same collection instance for the same name [0.07ms]
34 |       { field: 'name', unique: false },
35 |       { field: 'email', unique: true },
36 |     ]);
37 | 
38 |     // Test inserting data that would violate a unique index
39 |     await collection.insert({ name: 'Laptop', email: 'prod1@a.com' });
                          ^
TypeError: collection.insert is not a function. (In 'collection.insert({ name: "Laptop", email: "prod1@a.com" })', 'collection.insert' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/collection/__test__/CollectionFactory.test.ts:39:22)
(fail) CollectionFactory > should create collections with the specified indexes [0.24ms]
(pass) CollectionFactory > should use a default AdapterMemory if none is provided [0.02ms]

src/collection/__test__/IndexManager.transactions.test.ts:
(pass) IndexManager Transactions > should correctly add and remove a single docId from a non-unique index within a transaction [2.29ms]
(pass) IndexManager Transactions > should correctly rollback an add operation in a non-unique index [0.17ms]
(pass) IndexManager Transactions > should correctly rollback a remove operation in a non-unique index [0.50ms]

src/collection/__test__/Collection.test.ts:
(pass) Collection > find with QueryEngine > should find documents using a simple equality query [0.40ms]
(pass) Collection > find with QueryEngine > should find documents using a query with operators [0.09ms]
(pass) Collection > find with QueryEngine > should return an empty array for queries that match no documents [0.04ms]
(pass) Collection > find with QueryEngine > should handle complex queries with multiple fields [0.04ms]
(pass) Collection > find with QueryEngine > should use an index when a query on an indexed field is made [0.32ms]
(pass) Collection > find with QueryEngine > should not use an index for fields without one (full scan) [0.05ms]
(pass) Collection > should insert a document [0.21ms]
(pass) Collection > should update indexes after insert [0.05ms]
(pass) Collection > should rollback storage if indexing fails [0.11ms]
(pass) Collection > should find a document by ID [0.05ms]
(pass) Collection > should delete a document [0.10ms]
(pass) Collection > should update indexes on delete [0.05ms]
(pass) Collection > should update a document (storage only) [0.04ms]

src/collection/__test__/IndexManager.test.ts:
(pass) IndexManager > with unique index > should find a document by unique field [0.01ms]
(pass) IndexManager > with unique index > should return an empty array if not found [0.02ms]
(pass) IndexManager > with unique index > should throw on unique constraint violation [0.04ms]
(pass) IndexManager > with unique index > should remove a document from index [0.06ms]
(pass) IndexManager > with non-unique index > should find multiple documents by non-unique field [0.01ms]
(pass) IndexManager > with non-unique index > should add a new document to an existing key [0.03ms]
(pass) IndexManager > with non-unique index > should remove one document from a non-unique key [0.03ms]
(pass) IndexManager > with non-unique index > should remove the key if last document is removed [0.03ms]
(pass) IndexManager > findRange > should find documents with age > 30 [0.36ms]
(pass) IndexManager > findRange > should find documents with age < 40 [0.05ms]
(pass) IndexManager > findRange > should find documents with age >= 40 [0.04ms]
(pass) IndexManager > findRange > should find documents with age <= 30 [0.02ms]
(pass) IndexManager > findRange > should handle ranges with no results [0.03ms]
(pass) IndexManager > should create a unique index
(pass) IndexManager > should create a non-unique index [0.01ms]
(pass) IndexManager > should throw an error if index already exists [0.04ms]

src/config/__test__/QuotaManager.test.ts:
(pass) QuotaManager > getQuotas > should return the quota config if it exists [0.87ms]
(pass) QuotaManager > getQuotas > should return null if no quota config exists [0.53ms]
(pass) QuotaManager > isStorageExceeded > should return false if usage is below the quota [0.14ms]
(pass) QuotaManager > isStorageExceeded > should return true if usage is above the quota [0.01ms]
(pass) QuotaManager > isStorageExceeded > should return false if no storage quota is set [0.02ms]
(pass) QuotaManager > isStorageExceeded > should correctly parse different byte units [0.03ms]
(pass) QuotaManager > isStorageExceeded > should throw an error for invalid byte strings [0.05ms]

src/config/__test__/ConfigurationManager.test.ts:
24 |    * @throws {Error} If the file is not found, cannot be parsed, or is invalid.
25 |    */
26 |   public static loadFromFile(filePath: string, enableHotReload: boolean = false): CollectionStoreConfig {
27 |     const absolutePath = path.resolve(filePath);
28 |     if (!fs.existsSync(absolutePath)) {
29 |       throw new Error(`Configuration file not found at: ${absolutePath}`);
                                                                             ^
error: Configuration file not found at: /Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/valid.yml
      at loadFromFile (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/ConfigurationManager.ts:29:73)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/ConfigurationManager.test.ts:21:43)
(fail) ConfigurationManager > loadFromFile > should load and validate a correct YAML configuration file
24 |    * @throws {Error} If the file is not found, cannot be parsed, or is invalid.
25 |    */
26 |   public static loadFromFile(filePath: string, enableHotReload: boolean = false): CollectionStoreConfig {
27 |     const absolutePath = path.resolve(filePath);
28 |     if (!fs.existsSync(absolutePath)) {
29 |       throw new Error(`Configuration file not found at: ${absolutePath}`);
                                                                             ^
error: Configuration file not found at: /Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/valid.json
      at loadFromFile (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/ConfigurationManager.ts:29:73)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/ConfigurationManager.test.ts:29:43)
(fail) ConfigurationManager > loadFromFile > should load and validate a correct JSON configuration file [0.49ms]
(pass) ConfigurationManager > loadFromFile > should throw an error if the file does not exist [0.05ms]
39 |     });
40 | 
41 |     it('should throw an error for a file with invalid syntax', () => {
42 |       expect(() => {
43 |         ConfigurationManager.loadFromFile(invalidSyntaxPath);
44 |       }).toThrow(/Failed to parse configuration file/);
              ^
error: expect(received).toThrow(expected)

Expected pattern: /Failed to parse configuration file/
Received message: "Configuration file not found at: /Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/invalid-syntax.yml"

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/ConfigurationManager.test.ts:44:10)
(fail) ConfigurationManager > loadFromFile > should throw an error for a file with invalid syntax [0.38ms]
45 |     });
46 | 
47 |     it('should throw a validation error for a file with invalid structure', () => {
48 |       expect(() => {
49 |         ConfigurationManager.loadFromFile(invalidStructurePath);
50 |       }).toThrow(/Configuration validation failed/);
              ^
error: expect(received).toThrow(expected)

Expected pattern: /Configuration validation failed/
Received message: "Configuration file not found at: /Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/invalid-structure.yml"

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/ConfigurationManager.test.ts:50:10)
(fail) ConfigurationManager > loadFromFile > should throw a validation error for a file with invalid structure [0.06ms]
50 |       }).toThrow(/Configuration validation failed/);
51 |     });
52 | 
53 |     it('should throw an error for unsupported file formats', () => {
54 |       const unsupportedPath = path.join(import.meta.dir, '../../../test-data/config/valid.yml').replace('.yml', '.txt');
55 |       require('fs').copyFileSync(validYamlPath, unsupportedPath);
                         ^
error: ENOENT: no such file or directory, copyfile '/Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/valid.yml' -> '/Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/valid.txt'
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/ConfigurationManager.test.ts:55:21)
(fail) ConfigurationManager > loadFromFile > should throw an error for unsupported file formats [0.05ms]
24 |    * @throws {Error} If the file is not found, cannot be parsed, or is invalid.
25 |    */
26 |   public static loadFromFile(filePath: string, enableHotReload: boolean = false): CollectionStoreConfig {
27 |     const absolutePath = path.resolve(filePath);
28 |     if (!fs.existsSync(absolutePath)) {
29 |       throw new Error(`Configuration file not found at: ${absolutePath}`);
                                                                             ^
error: Configuration file not found at: /Users/vedmalex/work/collection-store/packages/collection-store/test-data/config/valid.yml
      at loadFromFile (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/ConfigurationManager.ts:29:73)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/ConfigurationManager.test.ts:67:28)
(fail) ConfigurationManager > getConfig > should return the loaded configuration [0.04ms]
(pass) ConfigurationManager > getConfig > should throw an error if getConfig is called before loadFromFile [0.03ms]

src/config/__test__/ConfigurationManager.hotreload.test.ts:
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-eNUGss/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-eNUGss/test-config.yaml
(pass) ConfigurationManager Hot Reload > Basic Hot Reload Functionality > should load configuration with hot reload enabled [2.77ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-eNUGss/test-config.yaml
Hot reload disabled
(pass) ConfigurationManager Hot Reload > Basic Hot Reload Functionality > should load configuration without hot reload by default [0.22ms]
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-xlu1xG/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-xlu1xG/test-config.yaml
(pass) ConfigurationManager Hot Reload > Basic Hot Reload Functionality > should enable hot reload after loading [0.33ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-xlu1xG/test-config.yaml
Hot reload disabled
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RfoNOJ/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RfoNOJ/test-config.yaml
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RfoNOJ/test-config.yaml
Hot reload disabled
(pass) ConfigurationManager Hot Reload > Basic Hot Reload Functionality > should disable hot reload [0.25ms]
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-hM6WvM/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-hM6WvM/test-config.yaml
Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-hM6WvM/test-config.yaml. Reloading...
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

(pass) ConfigurationManager Hot Reload > Configuration Change Detection > should detect file changes and reload configuration [301.99ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-hM6WvM/test-config.yaml
Hot reload disabled
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-LbxgKM/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-LbxgKM/test-config.yaml
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Retry failed for node node3: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-LbxgKM/test-config.yaml. Reloading...
Retry failed for node node2: 199 |     }
200 |   }
201 | 
202 |   async connect(nodeId: string, address: string, port: number): Promise<void> {
203 |     if (this.closed) {
204 |       throw new Error('NetworkManager is closed')
                  ^
error: NetworkManager is closed
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:204:13)
      at connect (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:202:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/replication/network/NetworkManager.ts:255:16)

(pass) ConfigurationManager Hot Reload > Configuration Change Detection > should handle multiple change callbacks [302.90ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-LbxgKM/test-config.yaml
Hot reload disabled
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-Vde1f6/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-Vde1f6/test-config.yaml
Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-Vde1f6/test-config.yaml. Reloading...
(pass) ConfigurationManager Hot Reload > Configuration Change Detection > should remove specific callbacks [302.97ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-Vde1f6/test-config.yaml
Hot reload disabled
(pass) ConfigurationManager Hot Reload > Manual Reload > should manually reload configuration [0.79ms]
(pass) ConfigurationManager Hot Reload > Manual Reload > should trigger callbacks on manual reload [0.40ms]
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-9TpDQr/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-9TpDQr/test-config.yaml
Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-9TpDQr/test-config.yaml. Reloading...
(pass) ConfigurationManager Hot Reload > Error Handling > should handle invalid configuration during hot reload [303.03ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-9TpDQr/test-config.yaml
Hot reload disabled
(pass) ConfigurationManager Hot Reload > Error Handling > should throw error when enabling hot reload without loaded config
(pass) ConfigurationManager Hot Reload > Error Handling > should throw error when manually reloading without loaded config [0.54ms]
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RT608k/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RT608k/test-config.yaml
Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RT608k/test-config.yaml. Reloading...
(pass) ConfigurationManager Hot Reload > Environment Configuration Integration > should handle environment-specific configuration changes [302.71ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-RT608k/test-config.yaml
Hot reload disabled
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-6YR7OY/test-config.yaml
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-6YR7OY/test-config.yaml
Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-6YR7OY/test-config.yaml. Reloading...
(pass) ConfigurationManager Hot Reload > IndexManager Integration > should handle IndexManager configuration changes [303.22ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-test-6YR7OY/test-config.yaml
Hot reload disabled

src/config/__test__/NodeRoleManager.test.ts:
(pass) NodeRoleManager > should return the correct role for a configured node [0.32ms]
(pass) NodeRoleManager > should throw an error if the node ID does not match the one in the config [0.09ms]
(pass) NodeRoleManager > should throw an error if no configuration is loaded [0.12ms]

src/config/__test__/ConfigWatcher.test.ts:
Started watching configuration file: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml
Configuration file changed: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml. Reloading...
(pass) ConfigWatcher > should call the callback with the new config when the file changes [103.16ms]
Stopped watching configuration file: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml
Started watching configuration file: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml
Stopped watching configuration file: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml
(pass) ConfigWatcher > should stop watching a file with unwatch() [302.52ms]
Started watching configuration file: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml
Configuration file changed: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml. Reloading...
(pass) ConfigWatcher > should handle errors gracefully if the updated file is invalid [203.48ms]
Stopped watching configuration file: /Users/vedmalex/work/collection-store/packages/collection-store/src/config/__test__/temp/test-config.yml

src/config/__test__/ConfigurationIntegration.test.ts:
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-2NzOf3/integration-config.json
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-2NzOf3/integration-config.json
Node initialized: test-node-integration as PRIMARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database transaction configuration initialized
(pass) Configuration-Driven Architecture Integration > Full System Integration > should initialize complete configuration-driven architecture [2.37ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-2NzOf3/integration-config.json
Hot reload disabled
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-8ijjkD/integration-config.json
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-8ijjkD/integration-config.json
Node initialized: test-node-integration as PRIMARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database transaction configuration initialized
Configuration file changed: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-8ijjkD/integration-config.json. Reloading...
Configuration change detected, updating role from PRIMARY to SECONDARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database configuration updated from config change
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database configuration updated from config change
(pass) Configuration-Driven Architecture Integration > Full System Integration > should handle configuration changes across all components [403.11ms]
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-8ijjkD/integration-config.json
Hot reload disabled
Node initialized: test-node-integration as PRIMARY
Node demoted from PRIMARY to SECONDARY
Invalid role transition from SECONDARY to BROWSER
Node promoted from SECONDARY to PRIMARY
(pass) Configuration-Driven Architecture Integration > Full System Integration > should support node role transitions with capability updates [0.71ms]
Node initialized: test-node-integration as PRIMARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database transaction configuration initialized
Cross-database transaction started: tx-mbv24fki-k36lxe
Transaction prepared: tx-mbv24fki-k36lxe
Transaction committed: tx-mbv24fki-k36lxe
(pass) Configuration-Driven Architecture Integration > Full System Integration > should manage cross-database transactions with 2PC [1.17ms]
Node initialized: test-node-integration as PRIMARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database transaction configuration initialized
Cross-database transaction started: tx-mbv24fkk-9j6d2u
Transaction aborted: tx-mbv24fkk-9j6d2u
(pass) Configuration-Driven Architecture Integration > Full System Integration > should handle transaction failures and rollback [0.52ms]
(pass) Configuration-Driven Architecture Integration > Full System Integration > should validate environment-specific configurations [0.06ms]
Node initialized: test-node-integration as PRIMARY
Node registered: secondary-node-1 as SECONDARY
Node registered: client-node-1 as CLIENT
(pass) Configuration-Driven Architecture Integration > Full System Integration > should support cluster health monitoring [0.43ms]
Started watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-uSCwAx/integration-config.json
Hot reload enabled for configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-uSCwAx/integration-config.json
Node initialized: test-node-integration as PRIMARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database transaction configuration initialized
Stopped watching configuration file: /var/folders/_y/w32ykyg53_d0kw28dq82k8g40000gn/T/config-integration-test-uSCwAx/integration-config.json
Hot reload disabled
(pass) Configuration-Driven Architecture Integration > Full System Integration > should cleanup all components properly [0.68ms]
(pass) Configuration-Driven Architecture Integration > Error Handling and Edge Cases > should handle missing configuration gracefully [0.10ms]
(pass) Configuration-Driven Architecture Integration > Error Handling and Edge Cases > should handle invalid node operations [0.29ms]
Node initialized: test-node-integration as PRIMARY
Database registered: primary (primary)
Database registered: mongodb (external)
Database registered: googlesheets (external)
Cross-database transaction configuration initialized
(pass) Configuration-Driven Architecture Integration > Error Handling and Edge Cases > should handle invalid transaction operations [0.39ms]

src/auth/tests/RoleManager.test.ts:

# Unhandled error between tests
-------------------------------
1 | (function (entry, fetcher)
              ^
SyntaxError: export 'ProcessRebuild' not found in './ProcessRebuild'
      at loadAndEvaluateModule (1:11)
-------------------------------


src/auth/tests/UserManager.test.ts:
(pass) UserManager > User Creation > should create user successfully [2.76ms]
(pass) UserManager > User Creation > should reject duplicate email [1.51ms]
(pass) UserManager > User Creation > should reject weak password [0.06ms]
(pass) UserManager > User Creation > should reject invalid email [0.05ms]
(pass) UserManager > User Retrieval > should get user by ID [1.26ms]
(pass) UserManager > User Retrieval > should get user by email [1.19ms]
(pass) UserManager > User Retrieval > should return undefined for non-existent user [0.09ms]
(pass) UserManager > User Updates > should update user data [1.50ms]
(pass) UserManager > User Updates > should update user email [1.40ms]
(pass) UserManager > User Updates > should reject duplicate email on update [2.30ms]
(pass) UserManager > Password Management > should verify correct password [2.92ms]
(pass) UserManager > Password Management > should reject incorrect password [2.80ms]
(pass) UserManager > Password Management > should change password [5.35ms]
(pass) UserManager > Password Management > should reject password change with wrong current password [2.14ms]
(pass) UserManager > Password Management > should reset password [3.19ms]
(pass) UserManager > User Status Management > should deactivate user [1.25ms]
(pass) UserManager > User Status Management > should activate user [1.81ms]
(pass) UserManager > User Status Management > should lock user [2.53ms]
(pass) UserManager > User Status Management > should unlock user [1.16ms]
(pass) UserManager > Role Management > should assign role to user [1.55ms]
(pass) UserManager > Role Management > should remove role from user [1.47ms]
(pass) UserManager > User Attributes > should set user attribute [1.28ms]
(pass) UserManager > User Attributes > should get all user attributes [1.16ms]
(pass) UserManager > User Attributes > should remove user attribute [1.66ms]
(pass) UserManager > User Search > should find users by criteria [2.28ms]
(pass) UserManager > User Search > should search users by text [3.05ms]
(pass) UserManager > User Search > should list users with pagination [6.70ms]
(pass) UserManager > Validation > should validate email availability [1.17ms]
(pass) UserManager > Validation > should validate password strength [0.08ms]
(pass) UserManager > Statistics > should get user statistics [2.31ms]

src/auth/tests/SessionManager.test.ts:

# Unhandled error between tests
-------------------------------
1 | (function (entry, fetcher)
              ^
SyntaxError: export 'ProcessRebuild' not found in './ProcessRebuild'
      at loadAndEvaluateModule (1:11)
-------------------------------


src/auth/tests/AuditLogger.test.ts:

src/auth/tests/TokenManager.test.ts:
(pass) TokenManager > Token Generation > should generate token pair successfully [6.30ms]
(pass) TokenManager > Token Generation > should generate access token successfully [10.95ms]
(pass) TokenManager > Token Generation > should generate refresh token successfully [16.42ms]
(pass) TokenManager > Token Generation > should generate API key successfully [8.59ms]
(pass) TokenManager > Token Validation > should validate access token successfully [39.05ms]
(pass) TokenManager > Token Validation > should validate refresh token successfully [0.60ms]
(pass) TokenManager > Token Validation > should validate API key successfully [0.26ms]
(pass) TokenManager > Token Validation > should reject invalid token [0.58ms]
(pass) TokenManager > Token Metadata > should extract token metadata correctly [0.12ms]
(pass) TokenManager > Token Metadata > should extract token claims correctly [0.31ms]
(pass) TokenManager > Configuration > should validate key configuration [0.17ms]
(pass) TokenManager > Configuration > should test token generation [0.45ms]
(pass) TokenManager > Token Expiration > should check token expiration correctly [0.21ms]
(pass) TokenManager > Token Expiration > should get token expiration time [0.96ms]
(pass) TokenManager > Statistics > should get token statistics [0.29ms]
(pass) TokenManager > Statistics > should get token metrics [0.14ms]

src/__test__/core/typed-collection.test.ts:
(pass) TypedCollection > Schema Integration > should automatically create indexes from schema [0.11ms]
(pass) TypedCollection > Schema Integration > should validate schema on document insertion [0.11ms]
(pass) TypedCollection > Schema Integration > should reject invalid documents in strict mode [0.18ms]
(pass) TypedCollection > Schema Integration > should coerce types when enabled [0.08ms]
(pass) TypedCollection > Type-Safe Queries > should support type-safe field queries [0.40ms]
(pass) TypedCollection > Type-Safe Queries > should support complex type-safe queries [0.24ms]
(pass) TypedCollection > Type-Safe Queries > should support type-safe field-based queries [0.36ms]
(pass) TypedCollection > Type-Safe Queries > should validate query operators against field types [0.02ms]
(pass) TypedCollection > Type-Safe Updates > should support type-safe updates [0.49ms]
(pass) TypedCollection > Type-Safe Updates > should support type-safe partial updates [0.21ms]
(pass) TypedCollection > Type-Safe Updates > should support type-safe updates by ID [0.15ms]
(pass) TypedCollection > Index Management > should support creating additional indexes
(pass) TypedCollection > Index Management > should support dropping indexes [0.18ms]
(pass) TypedCollection > Schema Utilities > should provide access to schema [0.02ms]
(pass) TypedCollection > Schema Utilities > should validate documents against schema
Inserted 100 records in 23.015625ms
(pass) TypedCollection > Performance and Integration > should maintain performance with schema validation [23.03ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $set operator [0.79ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $inc operator [0.45ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $mul operator [0.03ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $min and $max operators [0.29ms]
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $currentDate operator [0.18ms]
Initial product: undefined
Modified product: {
  id: "prod-301",
  name: "Laptop",
  price: 999.99,
  category: "electronics",
  inStock: true,
}
Has rating property: false
(pass) TypedCollection Type-safe Update Operations > Atomic Update Operations > should perform atomic update with $unset operator [0.18ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $addToSet operation [0.24ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $addToSet with $each [0.08ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $push operation [0.22ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $push with $each and options
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pull operation [0.04ms]
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pullAll operation
(pass) TypedCollection Type-safe Update Operations > Array Update Operations > should perform $pop operation [0.24ms]
(pass) TypedCollection Type-safe Update Operations > Bulk Update Operations > should perform ordered bulk updates [0.26ms]
(pass) TypedCollection Type-safe Update Operations > Bulk Update Operations > should perform parallel bulk updates [0.54ms]
(pass) TypedCollection Type-safe Update Operations > Upsert Operations > should perform upsert when no documents match [0.26ms]
(pass) TypedCollection Type-safe Update Operations > Schema Validation in Updates > should validate schema during updates
(pass) TypedCollection Type-safe Update Operations > Schema Validation in Updates > should skip validation when disabled [0.12ms]
(pass) TypedCollection Type-safe Update Operations > Mixed Update Operations > should handle mixed direct and operator updates [0.33ms]

src/__test__/core/CSDatabase.transaction.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../CSDatabase' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/core/CSDatabase.transaction.test.ts'
-------------------------------


src/__test__/core/typed-collection-updates.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../core/TypedCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/core/typed-collection-updates.test.ts'
-------------------------------


src/__test__/core/CSDatabase.savepoint.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../CSDatabase' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/core/CSDatabase.savepoint.test.ts'
-------------------------------


src/__test__/integration/performance.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/integration/performance.test.ts'
-------------------------------


src/__test__/integration/stress-testing.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/integration/stress-testing.test.ts'
-------------------------------


src/__test__/utils/CompositeKeyUtils.unified.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../utils/CompositeKeyUtils' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/utils/CompositeKeyUtils.unified.test.ts'
-------------------------------


src/__test__/utils/SingleKeyUtils.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../utils/SingleKeyUtils' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/utils/SingleKeyUtils.test.ts'
-------------------------------


src/__test__/utils/CompositeKeyUtils.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../utils/CompositeKeyUtils' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/utils/CompositeKeyUtils.test.ts'
-------------------------------


src/__test__/utils/IndexManager.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../IndexManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/utils/IndexManager.test.ts'
-------------------------------


src/__test__/transactions/TransactionManager.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../TransactionManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/transactions/TransactionManager.test.ts'
-------------------------------


src/__test__/transactions/TransactionalCollection.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../core/Collection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/transactions/TransactionalCollection.test.ts'
-------------------------------


src/filestorage/tests/CompressionEngine.test.ts:
(pass) CompressionEngine > Initialization > should initialize with default configuration
(pass) CompressionEngine > Initialization > should initialize with custom configuration [0.04ms]
(pass) CompressionEngine > Initialization > should initialize with empty stats [0.02ms]
(pass) CompressionEngine > Basic Compression > should compress data with gzip [3.92ms]
(pass) CompressionEngine > Basic Compression > should compress data with deflate [0.38ms]
(pass) CompressionEngine > Basic Compression > should compress data with brotli [2.44ms]
(pass) CompressionEngine > Basic Compression > should handle no compression [0.10ms]
(pass) CompressionEngine > Basic Compression > should use default algorithm when not specified [0.19ms]
(pass) CompressionEngine > Basic Compression > should compress stream data [0.54ms]
(pass) CompressionEngine > Decompression > should decompress gzip data [1.83ms]
(pass) CompressionEngine > Decompression > should decompress deflate data [0.34ms]
(pass) CompressionEngine > Decompression > should decompress brotli data [0.63ms]
(pass) CompressionEngine > Decompression > should handle no decompression [0.06ms]
(pass) CompressionEngine > Decompression > should decompress stream data [0.36ms]
(pass) CompressionEngine > Compression Levels > should compress with different levels [0.28ms]
(pass) CompressionEngine > Compression Levels > should compress brotli with different levels [1.67ms]
(pass) CompressionEngine > Batch Compression > should compress multiple files [0.50ms]
(pass) CompressionEngine > Batch Compression > should compress batch with different options [0.42ms]
(pass) CompressionEngine > Streaming > should create compression stream [0.06ms]
(pass) CompressionEngine > Streaming > should create decompression stream [0.04ms]
(pass) CompressionEngine > Streaming > should process data through compression stream [0.14ms]
(pass) CompressionEngine > Auto Algorithm Selection > should auto-select algorithm based on data size [0.68ms]
(pass) CompressionEngine > Compression Threshold > should skip compression for small files [0.06ms]
(pass) CompressionEngine > Compression Threshold > should compress files above threshold [0.12ms]
(pass) CompressionEngine > Job Management > should track job status [0.16ms]
(pass) CompressionEngine > Job Management > should clear completed jobs [0.09ms]
(pass) CompressionEngine > Statistics > should track compression statistics [0.20ms]
(pass) CompressionEngine > Statistics > should not track stats when disabled [0.15ms]
(pass) CompressionEngine > Configuration Management > should update configuration [0.05ms]
(pass) CompressionEngine > Event Emission > should emit compression events [0.15ms]
(pass) CompressionEngine > Event Emission > should emit decompression events [0.44ms]
(pass) CompressionEngine > Error Handling > should handle invalid compression algorithm [0.40ms]
(pass) CompressionEngine > Error Handling > should handle invalid decompression algorithm [0.11ms]
(pass) CompressionEngine > Error Handling > should emit error events on failure [0.13ms]
(pass) CompressionEngine > Error Handling > should track failed jobs in statistics [0.07ms]
(pass) CompressionEngine > Error Handling > should handle corrupted compressed data [0.57ms]
(pass) CompressionEngine > Performance > should handle large data efficiently [2.18ms]
(pass) CompressionEngine > Performance > should handle concurrent compressions [0.42ms]
(pass) CompressionEngine > Round-trip Integrity > should maintain data integrity through compression/decompression cycle [0.85ms]
(pass) CompressionEngine > Round-trip Integrity > should handle binary data correctly [0.39ms]
(pass) CompressionEngine > Round-trip Integrity > should handle empty data [0.10ms]

src/filestorage/tests/FileStorageIntegration.test.ts:
(pass) File Storage Component Integration > Replication Integration > should replicate files across cluster nodes [402.28ms]
(pass) File Storage Component Integration > Replication Integration > should handle replication of different file types with appropriate strategies [556.91ms]
Compression ratio: 222.61%
(pass) File Storage Component Integration > Compression Integration > should compress data successfully [0.70ms]
(pass) File Storage Component Integration > Compression Integration > should handle different compression algorithms [0.89ms]
Concurrent operations: 4 operations in 200.86ms
(pass) File Storage Component Integration > Multi-Component Performance Integration > should handle concurrent operations across components [201.40ms]
(pass) File Storage Component Integration > Multi-Component Performance Integration > should maintain data integrity across component interactions [403.52ms]
(pass) File Storage Component Integration > Error Handling Integration > should handle component failures gracefully [201.60ms]
(pass) File Storage Component Integration > Error Handling Integration > should maintain system stability during failures [0.53ms]
(pass) File Storage Component Integration > Configuration Integration > should handle configuration updates across components [50.64ms]
(pass) File Storage Component Integration > Health Monitoring Integration > should monitor system health across components [0.11ms]
(pass) File Storage Component Integration > Health Monitoring Integration > should handle health check failures gracefully [0.04ms]

src/filestorage/tests/ThumbnailGenerator.test.ts:
(pass) ThumbnailGenerator > Initialization > should initialize with default configuration [0.04ms]
(pass) ThumbnailGenerator > Initialization > should initialize with custom configuration
(pass) ThumbnailGenerator > Initialization > should emit initialized event [0.44ms]
(pass) ThumbnailGenerator > Initialization > should verify dependencies during initialization [0.05ms]
(pass) ThumbnailGenerator > Single Thumbnail Generation > should generate single thumbnail for image [0.77ms]
(pass) ThumbnailGenerator > Single Thumbnail Generation > should generate thumbnail with custom options [0.07ms]
(pass) ThumbnailGenerator > Single Thumbnail Generation > should use default options when not specified [0.05ms]
Failed to generate thumbnail for size 100x100: UnsupportedFileTypeError: Unsupported file type: application/unsupported
 details: {
  mimeType: "application/unsupported",
  supportedTypes: [ "image/jpeg", "image/png", "image/webp", "video/mp4", "video/webm", "video/avi",
    "application/pdf", "application/doc", "application/docx"
  ],
},
    code: "UNSUPPORTED_FILE_TYPE"

      at new FileStorageError (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/interfaces/errors.ts:11:5)
      at new UnsupportedFileTypeError (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/interfaces/errors.ts:58:5)
      at processJob (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/thumbnails/ThumbnailGenerator.ts:474:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/tests/ThumbnailGenerator.test.ts:142:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/tests/ThumbnailGenerator.test.ts:128:52)

(pass) ThumbnailGenerator > Single Thumbnail Generation > should throw error when generation fails [0.64ms]
(pass) ThumbnailGenerator > Multiple Thumbnail Generation > should generate multiple thumbnails for different sizes [0.07ms]
(pass) ThumbnailGenerator > Multiple Thumbnail Generation > should generate thumbnails with different formats [0.06ms]
(pass) ThumbnailGenerator > Multiple Thumbnail Generation > should handle partial failures gracefully [0.06ms]
Failed to generate thumbnail for size 100x100: UnsupportedFileTypeError: Unsupported file type: application/octet-stream
 details: {
  mimeType: "application/octet-stream",
  supportedTypes: [ "image/jpeg", "image/png", "image/webp", "video/mp4", "video/webm", "video/avi",
    "application/pdf", "application/doc", "application/docx"
  ],
},
    code: "UNSUPPORTED_FILE_TYPE"

      at new FileStorageError (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/interfaces/errors.ts:11:5)
      at new UnsupportedFileTypeError (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/interfaces/errors.ts:58:5)
      at processJob (/Users/vedmalex/work/collection-store/packages/collection-store/src/filestorage/thumbnails/ThumbnailGenerator.ts:474:17)

(pass) ThumbnailGenerator > Multiple Thumbnail Generation > should return empty array when no thumbnails can be generated [0.09ms]
(pass) ThumbnailGenerator > Buffer Processing > should generate thumbnails from buffer [0.27ms]
(pass) ThumbnailGenerator > Buffer Processing > should handle different MIME types from buffer [0.05ms]
(pass) ThumbnailGenerator > Buffer Processing > should cleanup temporary resources after buffer processing [0.07ms]
(pass) ThumbnailGenerator > Job Management > should track active jobs [0.05ms]
(pass) ThumbnailGenerator > Job Management > should provide job status [10.86ms]
(pass) ThumbnailGenerator > Job Management > should cancel pending jobs [0.29ms]
(pass) ThumbnailGenerator > Job Management > should return false when cancelling non-existent job [0.03ms]
(pass) ThumbnailGenerator > Caching > should cache generated thumbnails [0.09ms]
(pass) ThumbnailGenerator > Caching > should respect cache disabled setting [0.06ms]
(pass) ThumbnailGenerator > Caching > should clear cache [0.09ms]
(pass) ThumbnailGenerator > Caching > should emit cache cleared event [0.06ms]
(pass) ThumbnailGenerator > Configuration Management > should update configuration [0.02ms]
(pass) ThumbnailGenerator > Configuration Management > should emit config updated event [0.04ms]
(pass) ThumbnailGenerator > Configuration Management > should preserve existing config when updating [0.03ms]
(pass) ThumbnailGenerator > Event Emission > should emit job events during processing [0.18ms]
(pass) ThumbnailGenerator > Event Emission > should emit job failed event on error [0.16ms]
(pass) ThumbnailGenerator > File Type Support > should support image files [0.19ms]
(pass) ThumbnailGenerator > File Type Support > should support video files [0.23ms]
(pass) ThumbnailGenerator > File Type Support > should support document files [0.20ms]
(pass) ThumbnailGenerator > Performance > should handle multiple thumbnail requests efficiently [0.23ms]
(pass) ThumbnailGenerator > Performance > should handle large thumbnail sizes efficiently [0.09ms]
(pass) ThumbnailGenerator > Error Handling > should handle file metadata errors gracefully [0.10ms]
(pass) ThumbnailGenerator > Error Handling > should handle processing errors for individual sizes [0.06ms]
(pass) ThumbnailGenerator > Error Handling > should handle dependency verification errors [0.08ms]

src/filestorage/tests/FileMetadataManager.test.ts:
(pass) FileMetadataManager > Initialization and Lifecycle > should initialize successfully [0.13ms]
(pass) FileMetadataManager > Initialization and Lifecycle > should handle multiple initialization calls [0.07ms]
(pass) FileMetadataManager > Initialization and Lifecycle > should shutdown gracefully [0.24ms]
(pass) FileMetadataManager > CRUD Operations > Create > should create file metadata successfully [0.29ms]
(pass) FileMetadataManager > CRUD Operations > Create > should reject invalid metadata [0.11ms]
(pass) FileMetadataManager > CRUD Operations > Create > should validate required fields [0.27ms]
(pass) FileMetadataManager > CRUD Operations > Create > should validate access levels [0.16ms]
(pass) FileMetadataManager > CRUD Operations > Create > should validate file size [0.05ms]
(pass) FileMetadataManager > CRUD Operations > Read > should retrieve file metadata by ID
(pass) FileMetadataManager > CRUD Operations > Read > should return null for non-existent file [0.04ms]
(pass) FileMetadataManager > CRUD Operations > Read > should use getRequired for mandatory retrieval [0.10ms]
(pass) FileMetadataManager > CRUD Operations > Read > should throw FileNotFoundError for getRequired with non-existent file [0.08ms]
(pass) FileMetadataManager > CRUD Operations > Read > should use cache for repeated reads [0.03ms]
(pass) FileMetadataManager > CRUD Operations > Update > should update file metadata [0.29ms]
(pass) FileMetadataManager > CRUD Operations > Update > should prevent ID changes [0.09ms]
(pass) FileMetadataManager > CRUD Operations > Update > should validate updated metadata [0.10ms]
(pass) FileMetadataManager > CRUD Operations > Update > should throw FileNotFoundError for non-existent file [0.05ms]
(pass) FileMetadataManager > CRUD Operations > Update > should update cache after update [0.14ms]
(pass) FileMetadataManager > CRUD Operations > Delete > should delete file metadata [0.22ms]
(pass) FileMetadataManager > CRUD Operations > Delete > should throw FileNotFoundError for non-existent file [0.04ms]
(pass) FileMetadataManager > CRUD Operations > Delete > should remove from cache after deletion [0.03ms]
(pass) FileMetadataManager > Query Operations > List > should list all files without filters [0.22ms]
(pass) FileMetadataManager > Query Operations > List > should filter by owner [0.08ms]
(pass) FileMetadataManager > Query Operations > List > should filter by MIME type [0.06ms]
(pass) FileMetadataManager > Query Operations > List > should filter by access level
(pass) FileMetadataManager > Query Operations > List > should filter by size range [0.05ms]
(pass) FileMetadataManager > Query Operations > List > should apply pagination
(pass) FileMetadataManager > Query Operations > List > should sort by size descending [0.12ms]
(pass) FileMetadataManager > Query Operations > List > should combine multiple filters [0.06ms]
(pass) FileMetadataManager > Query Operations > Search > should search by filename [0.16ms]
(pass) FileMetadataManager > Query Operations > Search > should search by MIME type [0.03ms]
(pass) FileMetadataManager > Query Operations > Search > should search by owner [0.05ms]
(pass) FileMetadataManager > Query Operations > Search > should search by size range [0.22ms]
(pass) FileMetadataManager > Query Operations > Search > should search by date range [0.33ms]
(pass) FileMetadataManager > Query Operations > Count > should count all files [0.16ms]
(pass) FileMetadataManager > Query Operations > Count > should count with filters [0.22ms]
(pass) FileMetadataManager > Utility Operations > should get expired files [0.13ms]
(pass) FileMetadataManager > Utility Operations > should get files by owner [0.11ms]
(pass) FileMetadataManager > Utility Operations > should get files by MIME type [0.04ms]
(pass) FileMetadataManager > Utility Operations > should get recent files
(pass) FileMetadataManager > Utility Operations > should get largest files [0.11ms]
(pass) FileMetadataManager > Statistics > should calculate storage statistics [0.17ms]
(pass) FileMetadataManager > Statistics > should handle empty collection statistics [0.12ms]
(pass) FileMetadataManager > Caching > should cache metadata after retrieval [0.07ms]
(pass) FileMetadataManager > Caching > should update cache after metadata update [0.18ms]
(pass) FileMetadataManager > Caching > should remove from cache after deletion [0.10ms]
(pass) FileMetadataManager > Error Handling > should handle database connection errors gracefully [0.22ms]
(pass) FileMetadataManager > Error Handling > should emit events for operations [0.21ms]
(pass) FileMetadataManager > Performance > should handle bulk operations efficiently [3.34ms]
(pass) FileMetadataManager > Performance > should handle concurrent operations [0.40ms]

src/filestorage/tests/StreamingManager.test.ts:
(pass) StreamingManager > Configuration > should initialize with default configuration [0.05ms]
(pass) StreamingManager > Configuration > should update configuration [0.02ms]
(pass) StreamingManager > Configuration > should emit config update events [0.07ms]
(pass) StreamingManager > Upload Streaming > should create upload stream for small file [4.30ms]
(pass) StreamingManager > Upload Streaming > should create chunked upload stream for large file [0.30ms]
(pass) StreamingManager > Upload Streaming > should track upload progress [0.18ms]
(pass) StreamingManager > Upload Streaming > should emit stream events [0.11ms]
(pass) StreamingManager > Upload Streaming > should handle stream cancellation [0.45ms]
(pass) StreamingManager > Download Streaming > should create download stream [0.63ms]
(pass) StreamingManager > Download Streaming > should support range downloads [0.17ms]
(pass) StreamingManager > Download Streaming > should chunk large downloads [0.14ms]
(pass) StreamingManager > Download Streaming > should emit download events [0.12ms]
(pass) StreamingManager > Stream Transformations > should apply single transformation [0.16ms]
(pass) StreamingManager > Stream Transformations > should apply multiple transformations [0.14ms]
(pass) StreamingManager > Stream Transformations > should handle transformation with finalization [0.17ms]
(pass) StreamingManager > Stream Transformations > should emit transformation events [0.11ms]
(pass) StreamingManager > Stream Merging > should merge multiple streams [0.25ms]
(pass) StreamingManager > Stream Merging > should handle empty streams in merge [0.10ms]
(pass) StreamingManager > Stream Merging > should emit merge events [0.14ms]
(pass) StreamingManager > Stream Splitting > should split stream by size [0.76ms]
(pass) StreamingManager > Stream Splitting > should handle small data that fits in one stream [0.12ms]
(pass) StreamingManager > Stream Management > should track active streams [0.16ms]
(pass) StreamingManager > Stream Management > should provide stream statistics [0.08ms]
(pass) StreamingManager > Stream Management > should cancel specific stream [0.09ms]
(pass) StreamingManager > Stream Management > should cancel all streams [0.14ms]
(pass) StreamingManager > Stream Management > should return false when cancelling non-existent stream
(pass) StreamingManager > Error Handling > should handle stream errors gracefully [0.28ms]
(pass) StreamingManager > Error Handling > should handle transformation errors [0.17ms]
(pass) StreamingManager > Performance > should handle large files efficiently [1.53ms]
(pass) StreamingManager > Performance > should handle concurrent streams [0.16ms]

src/filestorage/tests/FileStorageManager.test.ts:
(pass) FileStorageManager > Initialization and Lifecycle > should initialize successfully with valid config [0.31ms]
(pass) FileStorageManager > Initialization and Lifecycle > should handle multiple initialization calls gracefully [0.42ms]
(pass) FileStorageManager > Initialization and Lifecycle > should emit initialization events [0.14ms]
(pass) FileStorageManager > Initialization and Lifecycle > should throw error when using uninitialized manager [0.36ms]
Upload completed in 1.57ms
(pass) FileStorageManager > File Upload Operations > should upload a simple text file successfully [1.69ms]
(pass) FileStorageManager > File Upload Operations > should generate file ID and checksum automatically [0.59ms]
(pass) FileStorageManager > File Upload Operations > should validate file size limits [0.18ms]
(pass) FileStorageManager > File Upload Operations > should validate blocked mime types [0.08ms]
(pass) FileStorageManager > File Upload Operations > should check user quota limits [0.07ms]
(pass) FileStorageManager > File Upload Operations > should emit upload events [0.62ms]
Download completed in 1.63ms
(pass) FileStorageManager > File Download Operations > should download file successfully [2.36ms]
(pass) FileStorageManager > File Download Operations > should support range downloads [0.37ms]
(pass) FileStorageManager > File Download Operations > should check access permissions [0.31ms]
(pass) FileStorageManager > File Download Operations > should handle non-existent files [0.12ms]
(pass) FileStorageManager > File Download Operations > should emit download events [0.17ms]
(pass) FileStorageManager > File Metadata Operations > should retrieve file metadata
(pass) FileStorageManager > File Metadata Operations > should update file metadata [1.26ms]
(pass) FileStorageManager > File Metadata Operations > should list user files with filters [0.82ms]
Delete completed in 0.41ms
(pass) FileStorageManager > File Deletion Operations > should delete file successfully [0.50ms]
(pass) FileStorageManager > File Deletion Operations > should check delete permissions [0.12ms]
(pass) FileStorageManager > File Deletion Operations > should emit delete events [0.25ms]
(pass) FileStorageManager > File Deletion Operations > should handle deletion of non-existent files [0.07ms]
(pass) FileStorageManager > Thumbnail Generation > should generate single thumbnail [0.20ms]
(pass) FileStorageManager > Thumbnail Generation > should generate multiple thumbnails [0.27ms]
(pass) FileStorageManager > Thumbnail Generation > should reject thumbnail generation for non-image files [0.47ms]
(pass) FileStorageManager > Health and Monitoring > should report healthy status when backends are working [0.94ms]
(pass) FileStorageManager > Health and Monitoring > should provide storage statistics [0.72ms]
(pass) FileStorageManager > Health and Monitoring > should track user storage usage [0.51ms]
Concurrent uploads: 10 files in 1.52ms (avg: 0.15ms per file)
(pass) FileStorageManager > Performance Benchmarks > should handle concurrent uploads efficiently [1.73ms]
Load test: 50 uploads, avg: 0.62ms, max: 3.15ms
(pass) FileStorageManager > Performance Benchmarks > should maintain performance under load [31.39ms]

src/filestorage/tests/FileReplicationManager.test.ts:
(pass) FileReplicationManager > Initialization and Lifecycle > should initialize successfully with valid config [0.08ms]
(pass) FileReplicationManager > Initialization and Lifecycle > should handle multiple initialization calls gracefully [0.07ms]
(pass) FileReplicationManager > Initialization and Lifecycle > should emit initialization events [0.04ms]
(pass) FileReplicationManager > Initialization and Lifecycle > should shutdown gracefully [0.04ms]
Replication completed in 402.33ms
(pass) FileReplicationManager > File Replication Operations > should replicate file to target nodes successfully [402.12ms]
(pass) FileReplicationManager > File Replication Operations > should select appropriate strategy based on file metadata [1268.08ms]
(pass) FileReplicationManager > File Replication Operations > should handle replication to multiple nodes [603.63ms]
(pass) FileReplicationManager > File Replication Operations > should reject replication with no target nodes [0.15ms]
(pass) FileReplicationManager > File Replication Operations > should prevent duplicate replication jobs [200.69ms]
(pass) FileReplicationManager > File Replication Operations > should emit WAL entries when enabled [201.35ms]
(pass) FileReplicationManager > Job Management > should track active replication jobs [400.91ms]
(pass) FileReplicationManager > Job Management > should provide job status information [201.39ms]
(pass) FileReplicationManager > Job Management > should update statistics correctly [201.21ms]
(pass) FileReplicationManager > File Synchronization > should sync files from source node [0.35ms]
(pass) FileReplicationManager > File Synchronization > should handle sync failures gracefully [0.12ms]
(pass) FileReplicationManager > File Synchronization > should emit sync progress events [0.10ms]
(pass) FileReplicationManager > Health Monitoring > should check replication health [0.12ms]
(pass) FileReplicationManager > Health Monitoring > should emit node health change events [101.17ms]
(pass) FileReplicationManager > Orphaned File Cleanup > should cleanup orphaned files [0.70ms]
(pass) FileReplicationManager > Orphaned File Cleanup > should emit orphaned file removal events [0.10ms]
(pass) FileReplicationManager > Configuration Management > should update configuration [0.20ms]
(pass) FileReplicationManager > Configuration Management > should preserve existing config when updating [0.09ms]
(pass) FileReplicationManager > Error Handling > should throw error when not initialized [0.21ms]
(pass) FileReplicationManager > Error Handling > should handle replication failures with retry [0.06ms]
(pass) FileReplicationManager > Error Handling > should emit replication failed events [0.07ms]
Concurrent replications: 3 files in 201.04ms
(pass) FileReplicationManager > Performance > should handle concurrent replications efficiently [201.19ms]
Load test: 10 replications, avg: 200.99ms, max: 201.26ms
(pass) FileReplicationManager > Performance > should maintain performance under load [2010.63ms]
(pass) FileReplicationManager > Strategy Selection > should use direct strategy for small files [201.29ms]
(pass) FileReplicationManager > Strategy Selection > should use chunked strategy for large files [1020.03ms]
(pass) FileReplicationManager > Strategy Selection > should use streaming strategy for media files [251.74ms]

src/filestorage/tests/PerformanceMonitor.test.ts:
(pass) FileStoragePerformanceMonitor > Initialization and Lifecycle > should initialize with default configuration [0.23ms]
(pass) FileStoragePerformanceMonitor > Initialization and Lifecycle > should initialize with custom configuration [0.07ms]
(pass) FileStoragePerformanceMonitor > Initialization and Lifecycle > should start and stop successfully [0.16ms]
(pass) FileStoragePerformanceMonitor > Initialization and Lifecycle > should handle multiple start/stop calls gracefully [0.06ms]
(pass) FileStoragePerformanceMonitor > Operation Measurement > should measure successful operations [51.79ms]
(pass) FileStoragePerformanceMonitor > Operation Measurement > should measure failed operations [31.11ms]
(pass) FileStoragePerformanceMonitor > Operation Measurement > should include metadata in measurements [0.17ms]
(pass) FileStoragePerformanceMonitor > Operation Measurement > should skip measurement when metrics disabled [0.07ms]
(pass) FileStoragePerformanceMonitor > Metrics Collection and Statistics > should calculate correct statistics [0.20ms]
(pass) FileStoragePerformanceMonitor > Metrics Collection and Statistics > should calculate percentiles correctly [564.19ms]
(pass) FileStoragePerformanceMonitor > Metrics Collection and Statistics > should track memory usage
(pass) FileStoragePerformanceMonitor > Metrics Collection and Statistics > should return null for non-existent operations
(pass) FileStoragePerformanceMonitor > Multiple Operations and Summary > should get all metrics
(pass) FileStoragePerformanceMonitor > Multiple Operations and Summary > should provide operation summary [0.22ms]
(pass) FileStoragePerformanceMonitor > Multiple Operations and Summary > should handle empty metrics in summary [0.16ms]
(pass) FileStoragePerformanceMonitor > Metrics History Management > should limit metrics history [0.36ms]
(pass) FileStoragePerformanceMonitor > Metrics History Management > should clear specific operation metrics [0.15ms]
(pass) FileStoragePerformanceMonitor > Metrics History Management > should clear all metrics [0.13ms]
(pass) FileStoragePerformanceMonitor > Configuration Management > should update configuration [0.16ms]
(pass) FileStoragePerformanceMonitor > Configuration Management > should preserve existing config when updating [0.08ms]
(pass) FileStoragePerformanceMonitor > Alert System > should emit duration alerts [1101.70ms]
(pass) FileStoragePerformanceMonitor > Alert System > should emit memory alerts [0.48ms]
(pass) FileStoragePerformanceMonitor > Alert System > should emit success rate alerts [0.72ms]
(pass) FileStoragePerformanceMonitor > Alert System > should not emit alerts when disabled [200.73ms]
(pass) FileStoragePerformanceMonitor > Metrics Aggregation > should emit aggregated metrics [1101.51ms]
(pass) FileStoragePerformanceMonitor > Metrics Aggregation > should not start aggregation timer when interval is 0 [101.57ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure file upload operations [51.90ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure file download operations [31.54ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure file delete operations [21.21ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure metadata operations [11.33ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure compression operations [41.32ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure replication operations [61.26ms]
(pass) FileStoragePerformanceMonitor > Utility Methods > should measure thumbnail generation operations [81.49ms]
Concurrent measurements: 20 operations in 57.79ms
(pass) FileStoragePerformanceMonitor > Performance and Load Testing > should handle concurrent measurements efficiently [58.37ms]
Load test: 100 measurements, avg: 1.23ms, max: 2.27ms
(pass) FileStoragePerformanceMonitor > Performance and Load Testing > should maintain performance under load [123.51ms]
Memory increase: 0.00 MB for 1000 operations
(pass) FileStoragePerformanceMonitor > Performance and Load Testing > should handle memory efficiently during extended use [34.91ms]
(pass) FileStoragePerformanceMonitor > Error Handling and Edge Cases > should handle operations that throw non-Error objects [0.27ms]
(pass) FileStoragePerformanceMonitor > Error Handling and Edge Cases > should handle operations that return undefined [0.10ms]
(pass) FileStoragePerformanceMonitor > Error Handling and Edge Cases > should handle very fast operations [0.07ms]
(pass) FileStoragePerformanceMonitor > Error Handling and Edge Cases > should handle operations with zero duration [0.08ms]

src/filestorage/tests/FileIdGenerator.test.ts:
(pass) FileIdGenerator > UUID Strategy > should generate valid UUID v4 format [0.07ms]
UUID generation: 10000 IDs in 2.71ms (3688391 IDs/sec)
(pass) FileIdGenerator > UUID Strategy > should generate unique IDs under high load [2.77ms]
(pass) FileIdGenerator > UUID Strategy > should handle concurrent ID generation [2.26ms]
(pass) FileIdGenerator > UUID Strategy > should validate UUID format correctly [0.03ms]
(pass) FileIdGenerator > Timestamp Counter Strategy > should generate sortable IDs with timestamp [1.28ms]
Generated 2683 unique IDs within ~1ms
(pass) FileIdGenerator > Timestamp Counter Strategy > should handle rapid generation within same millisecond [1.06ms]
(pass) FileIdGenerator > Timestamp Counter Strategy > should include node ID and counter in generated IDs [0.30ms]
(pass) FileIdGenerator > Timestamp Counter Strategy > should validate timestamp counter format correctly [0.07ms]
(pass) FileIdGenerator > Hybrid Strategy > should generate IDs with timestamp, random, node, and counter components [0.14ms]
Hybrid generation: 50000 IDs in 38.78ms (1289315 IDs/sec)
(pass) FileIdGenerator > Hybrid Strategy > should provide best collision resistance under extreme load [38.85ms]
(pass) FileIdGenerator > Hybrid Strategy > should maintain sortability while adding randomness [15.89ms]
(pass) FileIdGenerator > Global Generator Functions > should provide global access to file ID generation [0.07ms]
Batch generation: 1000 IDs in 0.40ms
(pass) FileIdGenerator > Global Generator Functions > should generate batch of IDs efficiently [0.54ms]
(pass) FileIdGenerator > Global Generator Functions > should provide ID information extraction [0.04ms]
(pass) FileIdGenerator > Global Generator Functions > should handle invalid IDs gracefully [0.06ms]
Performance: 2427909 IDs/sec
(pass) FileIdGenerator > Performance Benchmarks > should meet performance targets for ID generation [41.25ms]
Memory increase: 0.00 KB
(pass) FileIdGenerator > Performance Benchmarks > should have minimal memory footprint [4.02ms]
(pass) FileIdGenerator > Collision Resistance Tests > should handle multiple generators running concurrently [8.71ms]
Generated 129907 unique IDs in 100ms
(pass) FileIdGenerator > Collision Resistance Tests > should maintain uniqueness under time pressure [100.30ms]

src/filestorage/tests/FileValidator.test.ts:
(pass) FileValidator > Basic Validation > should validate a valid text file [1.56ms]
(pass) FileValidator > Basic Validation > should reject file with empty filename [0.06ms]
(pass) FileValidator > Basic Validation > should reject file with empty MIME type [0.06ms]
(pass) FileValidator > Basic Validation > should reject file with invalid size [0.07ms]
(pass) FileValidator > Basic Validation > should reject filename with dangerous characters [0.06ms]
(pass) FileValidator > Basic Validation > should reject filename that is too long [0.08ms]
(pass) FileValidator > File Size Validation > should accept file within size limit [0.07ms]
(pass) FileValidator > File Size Validation > should reject file exceeding size limit [4.35ms]
(pass) FileValidator > File Size Validation > should warn about size mismatch [0.24ms]
(pass) FileValidator > MIME Type Validation > should accept allowed MIME types [0.30ms]
(pass) FileValidator > MIME Type Validation > should reject blocked MIME types [0.12ms]
(pass) FileValidator > MIME Type Validation > should reject disallowed MIME types [0.08ms]
(pass) FileValidator > MIME Type Validation > should detect MIME type from extension [0.16ms]
(pass) FileValidator > MIME Type Validation > should warn about MIME type mismatch [0.10ms]
(pass) FileValidator > Content Validation > Image Files > should validate JPEG header [1.07ms]
(pass) FileValidator > Content Validation > Image Files > should validate PNG header [0.07ms]
(pass) FileValidator > Content Validation > Image Files > should warn about invalid image header [0.10ms]
(pass) FileValidator > Content Validation > PDF Files > should validate PDF header [0.07ms]
(pass) FileValidator > Content Validation > PDF Files > should reject invalid PDF header [0.07ms]
(pass) FileValidator > Content Validation > JSON Files > should validate valid JSON [0.06ms]
(pass) FileValidator > Content Validation > JSON Files > should reject invalid JSON [0.08ms]
(pass) FileValidator > Content Validation > Text Files > should validate clean text content [0.11ms]
(pass) FileValidator > Content Validation > Text Files > should warn about binary content in text files [0.07ms]
(pass) FileValidator > Content Validation > Security Checks > should detect executable signatures [0.22ms]
(pass) FileValidator > Content Validation > Security Checks > should detect script content in non-script files [0.08ms]
(pass) FileValidator > Content Validation > Security Checks > should allow script content in script files [0.07ms]
(pass) FileValidator > MIME Type Detection > should detect MIME type from content signatures [0.04ms]
(pass) FileValidator > MIME Type Detection > should fall back to extension-based detection [0.04ms]
(pass) FileValidator > MIME Type Detection > should use declared MIME type as last resort [0.26ms]
(pass) FileValidator > Custom Validators > should run custom validators [0.15ms]
(pass) FileValidator > Custom Validators > should handle custom validator errors [0.08ms]
(pass) FileValidator > Custom Validators > should handle custom validator exceptions [0.13ms]
(pass) FileValidator > Custom Validators > should manage custom validators [0.16ms]
(pass) FileValidator > Configuration Management > should update configuration [0.04ms]
(pass) FileValidator > Configuration Management > should emit configuration events [0.08ms]
(pass) FileValidator > Checksum Calculation > should calculate file checksum [0.19ms]
(pass) FileValidator > Event Emission > should emit validation events [0.13ms]
(pass) FileValidator > Performance > should handle multiple files efficiently [0.48ms]
(pass) FileValidator > Performance > should handle large files efficiently [1.15ms]
(pass) FileValidator > Error Handling > should handle stream reading errors gracefully [0.21ms]
(pass) FileValidator > Error Handling > should handle malformed file data [0.06ms]

src/storage/__test__/AdapterMemory.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module './adapters/AdapterMemory' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/storage/__test__/AdapterMemory.test.ts'
-------------------------------


src/subscriptions/tests/ConnectionManager.test.ts:
(pass) ConnectionManager > WebSocket Connections > should create WebSocket connection successfully [0.71ms]
(pass) ConnectionManager > WebSocket Connections > should handle WebSocket message events
(pass) ConnectionManager > WebSocket Connections > should handle WebSocket close events [0.07ms]
(pass) ConnectionManager > WebSocket Connections > should send WebSocket messages [0.06ms]
(pass) ConnectionManager > SSE Connections > should create SSE connection successfully [0.05ms]
(pass) ConnectionManager > SSE Connections > should handle SSE close events [0.07ms]
(pass) ConnectionManager > SSE Connections > should send SSE messages [0.07ms]
(pass) ConnectionManager > Connection Management > should get connection by ID [0.06ms]
(pass) ConnectionManager > Connection Management > should return undefined for non-existent connection [0.02ms]
(pass) ConnectionManager > Connection Management > should get user connections [0.06ms]
(pass) ConnectionManager > Connection Management > should get all connections [0.10ms]
(pass) ConnectionManager > Connection Management > should close connection manually [0.05ms]
(pass) ConnectionManager > Connection Management > should check if connection is alive [0.06ms]
(pass) ConnectionManager > Connection Management > should update connection activity [10.27ms]
(pass) ConnectionManager > Broadcasting > should broadcast message to multiple connections [0.30ms]
(pass) ConnectionManager > Broadcasting > should broadcast to all user connections [0.19ms]
(pass) ConnectionManager > Statistics > should track connection statistics [0.13ms]
(pass) ConnectionManager > Statistics > should track peak connections [0.07ms]
(pass) ConnectionManager > Cleanup and Maintenance > should cleanup expired connections [154.95ms]
(pass) ConnectionManager > Cleanup and Maintenance > should shutdown gracefully [0.26ms]
(pass) ConnectionManager > Error Handling > should handle WebSocket errors [0.11ms]
(pass) ConnectionManager > Error Handling > should handle SSE errors [0.12ms]
(pass) ConnectionManager > Error Handling > should handle sending message to non-existent connection [0.10ms]
(pass) ConnectionManager > Error Handling > should handle sending message to closed WebSocket [0.11ms]

src/subscriptions/tests/DataFilter.test.ts:
(pass) DataFilter > Scope Matching > should match collection-level changes [1.58ms]
(pass) DataFilter > Scope Matching > should match document-level changes [0.19ms]
(pass) DataFilter > Scope Matching > should match field-level changes [0.12ms]
(pass) DataFilter > Scope Matching > should not match different collections [0.07ms]
(pass) DataFilter > Scope Matching > should not match different documents [0.05ms]
(pass) DataFilter > Scope Matching > should not match different fields [0.06ms]
(pass) DataFilter > Field Filters > should apply equality field filter [0.09ms]
(pass) DataFilter > Field Filters > should reject non-matching field filter [0.24ms]
(pass) DataFilter > Field Filters > should apply numeric comparison filters [0.06ms]
(pass) DataFilter > Field Filters > should apply array inclusion filters [0.06ms]
(pass) DataFilter > Field Filters > should apply regex filters [0.07ms]
(pass) DataFilter > Field Filters > should handle case insensitive filters [0.10ms]
(pass) DataFilter > Field Filters > should handle nested field paths [0.07ms]
(pass) DataFilter > User Filters > should apply user field filters [0.08ms]
(pass) DataFilter > Custom Filters > should apply custom filters [0.18ms]
(pass) DataFilter > Custom Filters > should reject data not passing custom filter [0.15ms]
(pass) DataFilter > Multiple Filters > should apply multiple filters (AND logic) [0.07ms]
(pass) DataFilter > Multiple Filters > should reject if any filter fails [0.06ms]
(pass) DataFilter > Batch Filtering > should filter multiple changes [0.18ms]
(pass) DataFilter > Cache Management > should provide cache statistics [0.05ms]
(pass) DataFilter > Cache Management > should clear cache [0.01ms]
(pass) DataFilter > Error Handling > should handle missing data gracefully [0.07ms]
Error in custom filter: 760 |       }
761 | 
762 |       const customFilter: ParsedCustomFilter = {
763 |         type: 'custom',
764 |         evaluator: () => {
765 |           throw new Error('Filter error')
                      ^
error: Filter error
      at evaluator (/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/tests/DataFilter.test.ts:765:17)
      at applyCustomFilter (/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/core/DataFilter.ts:227:35)

(pass) DataFilter > Error Handling > should handle filter errors gracefully [0.07ms]

src/subscriptions/tests/SubscriptionEngine.test.ts:
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Engine Lifecycle > should start and stop correctly [0.72ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Engine Lifecycle > should not start if already running [0.04ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Engine Lifecycle > should not stop if not running [0.03ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Health and Metrics > should provide health status [0.07ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Health and Metrics > should provide metrics [0.06ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Health and Metrics > should show healthy status when running [1.22ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Management > should create a subscription successfully [0.96ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Management > should fail to create subscription when engine is not running [0.33ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Management > should unsubscribe successfully [0.07ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Management > should fail to unsubscribe non-existent subscription [0.04ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Management > should get all subscriptions [0.07ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Lifecycle > should pause and resume subscription
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Subscription Lifecycle > should update subscription query [0.04ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Connection Management > should handle connection close [0.06ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Connection Management > should update connection activity [11.34ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Statistics > should provide subscription statistics [0.22ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Statistics > should track subscriptions by user [0.06ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Statistics > should track subscriptions by collection [0.04ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Performance > should create subscriptions quickly [0.05ms]
Database change listeners setup - placeholder
(pass) SubscriptionEngine > Performance > should handle multiple subscriptions efficiently [0.22ms]

src/subscriptions/tests/QueryParser.test.ts:
(pass) QueryParser > Basic Query Parsing > should parse a simple collection subscription
(pass) QueryParser > Basic Query Parsing > should parse a document subscription [0.49ms]
(pass) QueryParser > Basic Query Parsing > should parse a field subscription [0.06ms]
(pass) QueryParser > Basic Query Parsing > should parse explicit resource type [0.05ms]
(pass) QueryParser > Options Parsing > should parse custom options [0.06ms]
(pass) QueryParser > Options Parsing > should apply default options [0.05ms]
(pass) QueryParser > Options Parsing > should validate batch size limits [0.06ms]
(pass) QueryParser > Options Parsing > should validate throttle limits [0.10ms]
(pass) QueryParser > Filter Parsing > should parse field filters [0.15ms]
(pass) QueryParser > Filter Parsing > should parse user filters [0.12ms]
(pass) QueryParser > Filter Parsing > should parse custom filters [0.19ms]
(pass) QueryParser > Filter Parsing > should validate field filter operators [0.11ms]
(pass) QueryParser > Filter Parsing > should validate regex patterns [0.09ms]
(pass) QueryParser > Filter Parsing > should validate array operators [0.06ms]
(pass) QueryParser > Filter Parsing > should reject custom filters when disabled [0.06ms]
(pass) QueryParser > Filter Parsing > should enforce filter limits [0.06ms]
(pass) QueryParser > Validation > should require collection for collection subscriptions [0.04ms]
(pass) QueryParser > Validation > should require documentId for document subscriptions [0.03ms]
(pass) QueryParser > Validation > should require fieldPath for field subscriptions [0.03ms]
(pass) QueryParser > Validation > should reject invalid resource types [0.02ms]
(pass) QueryParser > Validation > should reject duplicate field filters [0.11ms]
(pass) QueryParser > Validation > should reject multiple custom filters [0.07ms]
(pass) QueryParser > Validation > should reject null or undefined queries [0.08ms]
(pass) QueryParser > Query ID Generation > should generate unique IDs for different queries [0.10ms]
(pass) QueryParser > Query ID Generation > should generate deterministic IDs for equivalent queries [0.05ms]
(pass) QueryParser > Static Utility Methods > should detect equivalent queries [0.06ms]
(pass) QueryParser > Static Utility Methods > should detect different queries [0.04ms]
(pass) QueryParser > Static Utility Methods > should calculate query complexity [0.14ms]
(pass) QueryParser > Static Utility Methods > should optimize query filter order [0.07ms]
(pass) QueryParser > Edge Cases > should handle empty filters array [0.03ms]
(pass) QueryParser > Edge Cases > should handle case insensitive field filters [0.05ms]
(pass) QueryParser > Edge Cases > should handle numeric field values [0.04ms]
(pass) QueryParser > Edge Cases > should handle boolean field values [0.03ms]

src/subscriptions/tests/NotificationManager.test.ts:
(pass) NotificationManager > Lifecycle Management > should start and stop correctly
(pass) NotificationManager > Lifecycle Management > should not start if already running [0.06ms]
(pass) NotificationManager > Lifecycle Management > should not stop if not running [0.02ms]
(pass) NotificationManager > Single Notifications > should send high priority notification immediately [0.44ms]
(pass) NotificationManager > Single Notifications > should batch normal priority notifications [0.07ms]
(pass) NotificationManager > Single Notifications > should handle notification when manager is stopped [0.02ms]
(pass) NotificationManager > Batch Notifications > should send multiple notifications [0.30ms]
(pass) NotificationManager > Batch Notifications > should flush batch when size limit reached [0.06ms]
(pass) NotificationManager > Batch Notifications > should flush batch after timeout [151.24ms]
(pass) NotificationManager > Broadcasting > should broadcast change to multiple subscriptions [0.35ms]
(pass) NotificationManager > Broadcasting > should handle empty subscription list [0.05ms]
(pass) NotificationManager > Connection Notifications > should send message to specific connection [0.08ms]
(pass) NotificationManager > Connection Notifications > should batch connection messages [0.08ms]
(pass) NotificationManager > Statistics and Monitoring > should provide notification statistics [0.06ms]
(pass) NotificationManager > Statistics and Monitoring > should track pending notification count [0.07ms]
(pass) NotificationManager > Statistics and Monitoring > should provide health status [0.05ms]
(pass) NotificationManager > Batch Management > should flush all pending notifications on stop [0.11ms]
(pass) NotificationManager > Batch Management > should manually flush all pending notifications [0.07ms]
(pass) NotificationManager > Protocol Support > should handle WebSocket notifications [0.08ms]
(pass) NotificationManager > Protocol Support > should handle SSE notifications [0.06ms]
(pass) NotificationManager > Error Handling > should handle transport errors gracefully [0.07ms]
(pass) NotificationManager > Error Handling > should track error statistics [0.08ms]
(pass) NotificationManager > Priority Handling > should determine priority based on change type [0.07ms]
(pass) NotificationManager > Priority Handling > should handle mixed priority notifications [0.05ms]

src/subscriptions/tests/ClientSubscriptionManager.test.ts:
(pass) ClientSubscriptionManager > Initialization > should initialize successfully [0.01ms]
(pass) ClientSubscriptionManager > Initialization > should provide sync status
(pass) ClientSubscriptionManager > Subset Synchronization > should sync subset of collections [0.07ms]
(pass) ClientSubscriptionManager > Subset Synchronization > should handle sync errors gracefully [0.07ms]
(pass) ClientSubscriptionManager > Local Data Management > should get local data for collection [0.07ms]
(pass) ClientSubscriptionManager > Local Data Management > should get local data with query [0.05ms]
(pass) ClientSubscriptionManager > Local Data Management > should update local data [0.15ms]
(pass) ClientSubscriptionManager > Local Data Management > should handle delete operations [0.05ms]
(pass) ClientSubscriptionManager > Offline Mode > should enable offline mode [0.03ms]
(pass) ClientSubscriptionManager > Offline Mode > should disable offline mode [0.05ms]
(pass) ClientSubscriptionManager > Offline Mode > should queue changes in offline mode [0.05ms]
(pass) ClientSubscriptionManager > Conflict Resolution > should sync pending changes when going online [0.04ms]
(pass) ClientSubscriptionManager > Conflict Resolution > should handle conflicts with different strategies [0.05ms]
(pass) ClientSubscriptionManager > Cache Statistics > should provide cache statistics [0.04ms]
(pass) ClientSubscriptionManager > Cache Statistics > should track cache size [0.04ms]
(pass) ClientSubscriptionManager > Cache Management > should clear cache for specific collection [0.04ms]
(pass) ClientSubscriptionManager > Cache Management > should clear all cache [0.02ms]
(pass) ClientSubscriptionManager > Error Handling > should handle invalid collection names [0.04ms]
(pass) ClientSubscriptionManager > Error Handling > should handle sync failures gracefully [0.05ms]
(pass) ClientSubscriptionManager > Performance > should handle large datasets efficiently [0.04ms]
(pass) ClientSubscriptionManager > Performance > should maintain performance with many collections [0.05ms]
(pass) ClientSubscriptionManager > Memory Management > should cleanup resources on destroy [0.04ms]
Failed to broadcast message: DOMException {
  line: 165,
  column: 31,
  sourceURL: "/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/sync/CrossTabSynchronizer.ts",
  stack: "postMessage@[native code]\nbroadcastMessage@/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/sync/CrossTabSynchronizer.ts:165:31\nunregisterTab@/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/sync/CrossTabSynchronizer.ts:44:26\ndestroy@/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/sync/CrossTabSynchronizer.ts:133:23\ndestroy@/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/client/ClientSubscriptionManager.ts:137:30\n@/Users/vedmalex/work/collection-store/packages/collection-store/src/subscriptions/tests/ClientSubscriptionManager.test.ts:9:26",
  code: 11,
  name: "InvalidStateError",
  message: "This BroadcastChannel is closed",
  INDEX_SIZE_ERR: 1,
  DOMSTRING_SIZE_ERR: 2,
  HIERARCHY_REQUEST_ERR: 3,
  WRONG_DOCUMENT_ERR: 4,
  INVALID_CHARACTER_ERR: 5,
  NO_DATA_ALLOWED_ERR: 6,
  NO_MODIFICATION_ALLOWED_ERR: 7,
  NOT_FOUND_ERR: 8,
  NOT_SUPPORTED_ERR: 9,
  INUSE_ATTRIBUTE_ERR: 10,
  INVALID_STATE_ERR: 11,
  SYNTAX_ERR: 12,
  INVALID_MODIFICATION_ERR: 13,
  NAMESPACE_ERR: 14,
  INVALID_ACCESS_ERR: 15,
  VALIDATION_ERR: 16,
  TYPE_MISMATCH_ERR: 17,
  SECURITY_ERR: 18,
  NETWORK_ERR: 19,
  ABORT_ERR: 20,
  URL_MISMATCH_ERR: 21,
  QUOTA_EXCEEDED_ERR: 22,
  TIMEOUT_ERR: 23,
  INVALID_NODE_TYPE_ERR: 24,
  DATA_CLONE_ERR: 25,
  toString: [Function: toString],
}

src/subscriptions/tests/CrossTabSynchronizer.test.ts:
(pass) CrossTabSynchronizer > Tab Registration > should register tab successfully [0.06ms]
(pass) CrossTabSynchronizer > Tab Registration > should handle multiple tab registrations [11.09ms]
(pass) CrossTabSynchronizer > Tab Registration > should unregister tab on destroy [0.07ms]
(pass) CrossTabSynchronizer > Data Broadcasting > should broadcast data updates [51.15ms]
(pass) CrossTabSynchronizer > Data Broadcasting > should handle different update types [100.85ms]
(pass) CrossTabSynchronizer > Cache Management > should get cached data for collection [0.17ms]
(pass) CrossTabSynchronizer > Cache Management > should get cached data for specific document [0.02ms]
(pass) CrossTabSynchronizer > Error Handling > should handle BroadcastChannel errors gracefully [1.77ms]
(pass) CrossTabSynchronizer > Error Handling > should handle message parsing errors [50.52ms]
(pass) CrossTabSynchronizer > Browser Environment Detection > should handle non-browser environment gracefully [0.04ms]
(pass) CrossTabSynchronizer > Performance > should handle multiple updates efficiently [201.19ms]
(pass) CrossTabSynchronizer > Performance > should maintain performance with multiple tabs [0.16ms]

src/subscriptions/tests/Integration.test.ts:
Database change listeners setup - placeholder
Sending to WebSocket conn_1749834248987_ovsu7cstu: {
  type: "initial_data",
  subscriptionId: "sub_1749834248988_696df6ci5",
  data: [],
  timestamp: 1749834248988,
}
Sending to WebSocket conn_1749834248987_ovsu7cstu: {
  type: "data_change",
  subscriptionId: "sub_1749834248988_696df6ci5",
  change: {
    operation: "insert",
    collection: "users",
    documentId: "user456",
    data: {
      name: "Jane",
      status: "active",
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248988,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248987_ovsu7cstu",
    timestamp: 1749834248989,
  },
}
(pass) Subscription System Integration > End-to-End Subscription Flow > should handle complete subscription lifecycle [2.50ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > End-to-End Subscription Flow > should handle multiple concurrent subscriptions [0.69ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > End-to-End Subscription Flow > should handle authentication failures gracefully [0.20ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > End-to-End Subscription Flow > should handle connection failures gracefully [0.17ms]
Database change listeners setup - placeholder
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 0,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248991,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248991,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 1,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248992,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248991,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 2,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248993,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248991,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 3,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248994,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248991,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 4,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248995,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248991,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 5,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248996,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248992,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 6,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248997,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248992,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 7,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248998,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248992,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 8,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248999,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248992,
  },
}
Sending to WebSocket conn_1749834248991_k7t0dovh7: {
  type: "data_change",
  subscriptionId: "sub_1749834248991_tydt2r82c",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
      counter: 9,
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834249000,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248991_k7t0dovh7",
    timestamp: 1749834248992,
  },
}
(pass) Subscription System Integration > Performance and Scalability > should handle high-frequency data changes efficiently [0.92ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > Performance and Scalability > should maintain performance with many subscriptions [5.20ms]
Database change listeners setup - placeholder
Sending to WebSocket conn_1749834248998_oddwduvnu: {
  type: "data_change",
  subscriptionId: "sub_1749834248998_ft68r5snm",
  change: {
    operation: "update",
    collection: "users",
    documentId: undefined,
    data: {
      status: "active",
    },
    previousData: undefined,
    affectedFields: undefined,
    timestamp: 1749834248998,
  },
  metadata: {
    userId: "user123",
    connectionId: "conn_1749834248998_oddwduvnu",
    timestamp: 1749834248998,
  },
}
(pass) Subscription System Integration > Error Recovery > should recover from notification failures [0.66ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > Error Recovery > should handle component restart gracefully [0.22ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > Health Monitoring > should provide comprehensive health status [0.07ms]
Database change listeners setup - placeholder
(pass) Subscription System Integration > Health Monitoring > should track metrics accurately [0.13ms]

src/adapters/__test__/GoogleSheetsAdapter.test.ts:

# Unhandled error between tests
-------------------------------
225 |     // Mock event handler
226 |   }
227 | }
228 | 
229 | // Mock the actual classes
230 | jest.mock('../googlesheets/auth/GoogleSheetsAuth', () => ({
           ^
TypeError: jest.mock is not a function. (In 'jest.mock("../googlesheets/auth/GoogleSheetsAuth", () => ({
  GoogleSheetsAuth: MockGoogleSheetsAuth
}))', 'jest.mock' is undefined)
      at /Users/vedmalex/work/collection-store/packages/collection-store/src/adapters/__test__/GoogleSheetsAdapter.test.ts:230:6
      at loadAndEvaluateModule (2:1)
-------------------------------


src/adapters/__test__/AdapterFoundation.test.ts:
(pass) External Adapters Foundation > AdapterRegistry > should create registry with correct configuration
(pass) External Adapters Foundation > AdapterRegistry > should register and unregister adapters [0.21ms]
(pass) External Adapters Foundation > AdapterRegistry > should start and stop adapters [0.16ms]
(pass) External Adapters Foundation > AdapterRegistry > should check adapter health [0.25ms]
(pass) External Adapters Foundation > AdapterCoordinator > should create coordinator with correct configuration [0.01ms]
(pass) External Adapters Foundation > AdapterCoordinator > should execute single adapter operations [0.34ms]
(pass) External Adapters Foundation > AdapterCoordinator > should ping adapters [0.29ms]
(pass) External Adapters Foundation > Configuration Schemas > should validate MongoDB adapter configuration [0.65ms]
(pass) External Adapters Foundation > Configuration Schemas > should reject invalid MongoDB adapter configuration [0.52ms]
(pass) External Adapters Foundation > Configuration Schemas > should create schema using factory [0.08ms]
(pass) External Adapters Foundation > Type System > should have correct adapter types [0.02ms]
(pass) External Adapters Foundation > Type System > should have correct adapter states [0.03ms]

src/adapters/__test__/MongoDBEnhancement.test.ts:
(pass) MongoDB Connection Manager > should initialize with correct state
(pass) MongoDB Connection Manager > should connect successfully [0.39ms]
(pass) MongoDB Connection Manager > should handle connection metrics [0.04ms]
(pass) MongoDB Connection Manager > should ping successfully when connected [0.04ms]
(pass) MongoDB Connection Manager > should update configuration [0.04ms]
(pass) MongoDB Connection Manager > should handle reconnection [0.05ms]
(pass) Change Stream Manager > should create stream subscription
(pass) Change Stream Manager > should manage stream state
(pass) Change Stream Manager > should track stream metrics [0.03ms]
(pass) Change Stream Manager > should pause and resume streams [0.04ms]
(pass) Change Stream Manager > should destroy streams [0.04ms]
(pass) Change Stream Manager > should manage resume tokens [0.03ms]
(pass) Enhanced MongoDB Adapter > should be constructible
(pass) Enhanced MongoDB Adapter > should support enhanced connection management
(pass) Enhanced MongoDB Adapter > should support change streams
(pass) Enhanced MongoDB Adapter > should support advanced transactions
(pass) MongoDB Enhancement Phase 2 > should have enhanced connection management capabilities [0.01ms]
(pass) MongoDB Enhancement Phase 2 > should support change streams with resume tokens
(pass) MongoDB Enhancement Phase 2 > should provide query optimization
(pass) MongoDB Enhancement Phase 2 > should handle enhanced error recovery
(pass) MongoDB Enhancement Phase 2 > should monitor performance metrics
(pass) MongoDB Enhancement Phase 2 > should implement security enhancements

src/transactions/__tests__/TransactionManager.test.ts:
21 |     });
22 | 
23 |     it('should commit a successful transaction', async () => {
24 |         const doc = { id: '1', email: 'test@example.com' };
25 | 
26 |         const result = await transactionManager.execute(async (txStorage, txIndexes) => {
                                                     ^
TypeError: transactionManager.execute is not a function. (In 'transactionManager.execute(async (txStorage, txIndexes) => {
      await txStorage.set(doc.id, doc);
      await txIndexes.add("email", doc.email, doc.id);
      return "success";
    })', 'transactionManager.execute' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/transactions/__tests__/TransactionManager.test.ts:26:49)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/transactions/__tests__/TransactionManager.test.ts:23:50)
(fail) TransactionManager > should commit a successful transaction [0.01ms]
44 |         await storage.set(doc1.id, doc1);
45 |         await indexes.add('email', doc1.email, doc1.id);
46 | 
47 |         const doc2 = { id: '2', email: 'test@example.com' }; // Duplicate email
48 | 
49 |         const promise = transactionManager.execute(async (txStorage, txIndexes) => {
                                                ^
TypeError: transactionManager.execute is not a function. (In 'transactionManager.execute(async (txStorage, txIndexes) => {
      await txStorage.set(doc2.id, doc2);
      await txIndexes.add("email", doc2.email, doc2.id);
      throw new Error("Simulated unique constraint violation");
    })', 'transactionManager.execute' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/transactions/__tests__/TransactionManager.test.ts:49:44)
(fail) TransactionManager > should rollback a failed transaction [0.18ms]
64 | 
65 |     it('should correctly handle rollbacks on storage and indexes', async () => {
66 |         const storageRollbackSpy = spyOn(storage, 'rollback');
67 |         const indexRollbackSpy = spyOn(indexes, 'rollback');
68 | 
69 |         const promise = transactionManager.execute(async (txStorage, txIndexes) => {
                                                ^
TypeError: transactionManager.execute is not a function. (In 'transactionManager.execute(async (txStorage, txIndexes) => {
      throw new Error("Failure");
    })', 'transactionManager.execute' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/transactions/__tests__/TransactionManager.test.ts:69:44)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/transactions/__tests__/TransactionManager.test.ts:65:68)
(fail) TransactionManager > should correctly handle rollbacks on storage and indexes [0.12ms]

src/performance/__tests__/FileOperationsProfiler.test.ts:
(pass) FileOperationsProfiler > Monitoring Lifecycle > should start monitoring successfully [53.73ms]
(pass) FileOperationsProfiler > Monitoring Lifecycle > should stop monitoring and generate report [40.80ms]
(pass) FileOperationsProfiler > Monitoring Lifecycle > should throw error when starting monitoring twice [42.16ms]
(pass) FileOperationsProfiler > Monitoring Lifecycle > should throw error when stopping inactive monitoring [0.20ms]
(pass) FileOperationsProfiler > File Upload Profiling > should profile file upload performance [90.03ms]
(pass) FileOperationsProfiler > File Upload Profiling > should generate upload recommendations for poor performance [2352.42ms]
(pass) FileOperationsProfiler > File Upload Profiling > should record upload operations in history [18.44ms]
(pass) FileOperationsProfiler > File Download Profiling > should profile file download performance [11.28ms]
(pass) FileOperationsProfiler > File Download Profiling > should generate download recommendations for poor performance [48.38ms]
(pass) FileOperationsProfiler > File Download Profiling > should record download operations in history [2.61ms]
(pass) FileOperationsProfiler > Operation History Management > should maintain operation history [19.40ms]
(pass) FileOperationsProfiler > Operation History Management > should clear all monitoring history [36.43ms]
(pass) FileOperationsProfiler > Operation History Management > should return copy of operation history [19.06ms]
(pass) FileOperationsProfiler > Performance Report Generation > should generate comprehensive performance report [185.13ms]
(pass) FileOperationsProfiler > Performance Report Generation > should identify bottlenecks in performance report [642.95ms]
(pass) FileOperationsProfiler > Configuration > should use default configuration when none provided [0.11ms]
(pass) FileOperationsProfiler > Configuration > should merge provided configuration with defaults [0.07ms]
(pass) FileOperationsProfiler > Error Handling > should handle zero-size file uploads gracefully [1.35ms]
(pass) FileOperationsProfiler > Error Handling > should handle zero-size file downloads gracefully [1.23ms]
(pass) FileOperationsProfiler > Error Handling > should handle monitoring without operations [53.52ms]
(pass) FileOperationsProfiler > Performance Calculations > should calculate throughput correctly [255.14ms]
(pass) FileOperationsProfiler > Performance Calculations > should calculate success rate correctly [69.35ms]

src/performance/__tests__/RealtimeSubscriptionProfiler.test.ts:
(pass) RealtimeSubscriptionProfiler > Monitoring Lifecycle > should start monitoring successfully [333.71ms]
(pass) RealtimeSubscriptionProfiler > Monitoring Lifecycle > should stop monitoring and generate report [743.06ms]
(pass) RealtimeSubscriptionProfiler > Monitoring Lifecycle > should throw error when starting monitoring twice [578.75ms]
(pass) RealtimeSubscriptionProfiler > Monitoring Lifecycle > should throw error when stopping inactive monitoring [0.14ms]
(pass) RealtimeSubscriptionProfiler > Subscription Lifecycle Profiling > should profile subscription lifecycle [303.42ms]
(pass) RealtimeSubscriptionProfiler > Subscription Lifecycle Profiling > should generate recommendations for slow subscription creation [381.73ms]
(pass) RealtimeSubscriptionProfiler > Cross-Tab Synchronization Analysis > should analyze cross-tab synchronization [95.66ms]
(pass) RealtimeSubscriptionProfiler > Cross-Tab Synchronization Analysis > should generate recommendations for slow sync [154.30ms]
(pass) RealtimeSubscriptionProfiler > Metrics Collection > should collect subscription metrics during monitoring [817.26ms]
(pass) RealtimeSubscriptionProfiler > Metrics Collection > should clear history [753.21ms]
(pass) RealtimeSubscriptionProfiler > Performance Analysis Report > should generate comprehensive analysis report [1163.52ms]
(pass) RealtimeSubscriptionProfiler > Performance Analysis Report > should identify bottlenecks and provide recommendations [659.62ms]
(pass) RealtimeSubscriptionProfiler > Error Handling > should handle invalid configurations gracefully [382.87ms]
(pass) RealtimeSubscriptionProfiler > Error Handling > should handle zero tab count in cross-tab sync [23.12ms]
(pass) RealtimeSubscriptionProfiler > Configuration Options > should respect custom sampling interval [707.18ms]
(pass) RealtimeSubscriptionProfiler > Configuration Options > should handle detailed logging configuration [0.11ms]

src/performance/__tests__/PerformanceProfiler.test.ts:
(pass) Phase 6: PerformanceProfiler > Profiling Session Management > should start profiling session successfully [0.92ms]
(pass) Phase 6: PerformanceProfiler > Profiling Session Management > should throw error when starting duplicate session
(pass) Phase 6: PerformanceProfiler > Profiling Session Management > should start profiling with default components [0.10ms]
(pass) Phase 6: PerformanceProfiler > Profiling Session Management > should stop profiling session and generate report [101.17ms]
(pass) Phase 6: PerformanceProfiler > Profiling Session Management > should throw error when stopping non-existent session [0.24ms]
(pass) Phase 6: PerformanceProfiler > Component Profiling > should profile authentication component [101.43ms]
(pass) Phase 6: PerformanceProfiler > Component Profiling > should profile database component [101.49ms]
(pass) Phase 6: PerformanceProfiler > Component Profiling > should profile realtime component [101.43ms]
(pass) Phase 6: PerformanceProfiler > Component Profiling > should profile files component [101.60ms]
(pass) Phase 6: PerformanceProfiler > Component Profiling > should profile system component [101.36ms]
(pass) Phase 6: PerformanceProfiler > Bottleneck Analysis > should generate bottleneck report with summary [151.77ms]
(pass) Phase 6: PerformanceProfiler > Bottleneck Analysis > should categorize bottlenecks by severity [151.68ms]
(pass) Phase 6: PerformanceProfiler > Bottleneck Analysis > should sort bottlenecks by severity [151.73ms]
(pass) Phase 6: PerformanceProfiler > Bottleneck Analysis > should generate optimization recommendations [151.97ms]
(pass) Phase 6: PerformanceProfiler > CPU Hotspot Analysis > should analyze CPU hotspots [102.09ms]
(pass) Phase 6: PerformanceProfiler > CPU Hotspot Analysis > should throw error for non-existent session in CPU analysis [0.08ms]
(pass) Phase 6: PerformanceProfiler > Memory Usage Analysis > should analyze memory usage patterns [101.76ms]
(pass) Phase 6: PerformanceProfiler > Memory Usage Analysis > should throw error for non-existent session in memory analysis [0.10ms]
(pass) Phase 6: PerformanceProfiler > Database Query Profiling > should profile database queries [101.69ms]
(pass) Phase 6: PerformanceProfiler > Database Query Profiling > should throw error for non-existent session in query profiling [0.13ms]
(pass) Phase 6: PerformanceProfiler > Configuration & Edge Cases > should use custom configuration [0.05ms]
(pass) Phase 6: PerformanceProfiler > Configuration & Edge Cases > should handle multiple concurrent sessions [0.15ms]
(pass) Phase 6: PerformanceProfiler > Configuration & Edge Cases > should handle session status queries [0.16ms]
(pass) Phase 6: PerformanceProfiler > Performance Validation > should complete profiling efficiently [51.14ms]
(pass) Phase 6: PerformanceProfiler > Performance Validation > should handle rapid session creation and destruction [0.51ms]

src/performance/__tests__/BottleneckAnalyzer.test.ts:
(pass) Phase 6: BottleneckAnalyzer > Optimization Plan Generation > should generate optimization plan from bottleneck report [1.69ms]
(pass) Phase 6: BottleneckAnalyzer > Optimization Plan Generation > should prioritize optimizations by impact [0.41ms]
(pass) Phase 6: BottleneckAnalyzer > Component-Specific Optimizations > should generate authentication optimizations [0.06ms]
(pass) Phase 6: BottleneckAnalyzer > Component-Specific Optimizations > should generate database optimizations [0.04ms]
(pass) Phase 6: BottleneckAnalyzer > Component-Specific Optimizations > should handle empty bottlenecks gracefully [0.05ms]
(pass) Phase 6: BottleneckAnalyzer > Performance Target Validation > should validate performance metrics against targets [0.18ms]
(pass) Phase 6: BottleneckAnalyzer > Performance Target Validation > should pass validation when all targets are met [0.23ms]
(pass) Phase 6: BottleneckAnalyzer > Configuration & Edge Cases > should handle empty bottleneck report [0.11ms]
(pass) Phase 6: BottleneckAnalyzer > Configuration & Edge Cases > should use default configuration when none provided [0.05ms]

src/performance/__tests__/PerformanceScenarios.test.ts:
(pass) Phase 6: PerformanceScenarios > Authentication Scenarios > createAuthenticationScenario > should create authentication scenario with default config [0.09ms]
(pass) Phase 6: PerformanceScenarios > Authentication Scenarios > createAuthenticationScenario > should create authentication scenario with custom config [0.05ms]
(pass) Phase 6: PerformanceScenarios > Authentication Scenarios > createAuthenticationScenario > should include session duration in login operation [0.03ms]
(pass) Phase 6: PerformanceScenarios > Authentication Scenarios > createAuthenticationStressScenario > should create high-load authentication scenario [0.10ms]
(pass) Phase 6: PerformanceScenarios > Authentication Scenarios > createAuthenticationStressScenario > should allow custom config override [0.04ms]
(pass) Phase 6: PerformanceScenarios > Database Scenarios > createDatabaseScenario > should create database scenario with default config [0.17ms]
(pass) Phase 6: PerformanceScenarios > Database Scenarios > createDatabaseScenario > should use first collection from collections array [0.07ms]
(pass) Phase 6: PerformanceScenarios > Database Scenarios > createDatabaseScenario > should use default collection when collections array is empty [0.08ms]
(pass) Phase 6: PerformanceScenarios > Database Scenarios > createDatabaseScenario > should configure indexed vs non-indexed queries [0.12ms]
(pass) Phase 6: PerformanceScenarios > Database Scenarios > createDatabaseScenario > should include aggregation pipeline [0.06ms]
(pass) Phase 6: PerformanceScenarios > Database Scenarios > createDatabaseStressScenario > should create high-load database scenario [0.26ms]
(pass) Phase 6: PerformanceScenarios > Real-time Scenarios > createRealtimeScenario > should create realtime scenario with default config [0.25ms]
(pass) Phase 6: PerformanceScenarios > Real-time Scenarios > createRealtimeScenario > should use first channel from channels array [0.10ms]
(pass) Phase 6: PerformanceScenarios > Real-time Scenarios > createRealtimeScenario > should use default channel when channels array is empty [0.04ms]
(pass) Phase 6: PerformanceScenarios > Real-time Scenarios > createRealtimeScenario > should include cross-tab sync operation [0.05ms]
(pass) Phase 6: PerformanceScenarios > Real-time Scenarios > createRealtimeStressScenario > should create high-concurrency realtime scenario [0.10ms]
(pass) Phase 6: PerformanceScenarios > File Storage Scenarios > createFileStorageScenario > should create file storage scenario with default config [0.10ms]
(pass) Phase 6: PerformanceScenarios > File Storage Scenarios > createFileStorageScenario > should configure file operations correctly [0.06ms]
(pass) Phase 6: PerformanceScenarios > File Storage Scenarios > createFileStorageScenario > should include all file operations [0.05ms]
(pass) Phase 6: PerformanceScenarios > Computed Attributes Scenarios > createComputedAttributesScenario > should create computed attributes scenario with default config [0.08ms]
(pass) Phase 6: PerformanceScenarios > Computed Attributes Scenarios > createComputedAttributesScenario > should configure different computation types [0.08ms]
(pass) Phase 6: PerformanceScenarios > Computed Attributes Scenarios > createComputedAttributesScenario > should configure cache hit ratio [0.04ms]
(pass) Phase 6: PerformanceScenarios > Stored Functions Scenarios > createStoredFunctionsScenario > should create stored functions scenario with default config [0.06ms]
(pass) Phase 6: PerformanceScenarios > Stored Functions Scenarios > createStoredFunctionsScenario > should configure different function types [0.30ms]
(pass) Phase 6: PerformanceScenarios > Stored Functions Scenarios > createStoredFunctionsScenario > should include function parameters [0.08ms]
(pass) Phase 6: PerformanceScenarios > Mixed Workload Scenarios > createMixedWorkloadScenario > should create comprehensive mixed workload scenario [0.08ms]
(pass) Phase 6: PerformanceScenarios > Mixed Workload Scenarios > createMixedWorkloadScenario > should include all operation types [0.05ms]
(pass) Phase 6: PerformanceScenarios > Mixed Workload Scenarios > createMixedWorkloadScenario > should distribute workload across features [0.06ms]
(pass) Phase 6: PerformanceScenarios > Utility Methods > getAvailableScenarios > should return all available scenario types [0.05ms]
(pass) Phase 6: PerformanceScenarios > Utility Methods > createScenarioByName > should create scenarios by name [0.07ms]
(pass) Phase 6: PerformanceScenarios > Utility Methods > createScenarioByName > should pass config to scenario creation [0.04ms]
(pass) Phase 6: PerformanceScenarios > Utility Methods > createScenarioByName > should throw error for unknown scenario type [0.07ms]
(pass) Phase 6: PerformanceScenarios > Utility Methods > createScenarioByName > should create all available scenario types [0.08ms]
(pass) Phase 6: PerformanceScenarios > Data Generation > should generate different record sizes [0.14ms]
(pass) Phase 6: PerformanceScenarios > Data Generation > should generate different message sizes [0.19ms]
(pass) Phase 6: PerformanceScenarios > Performance Validation > should create scenarios efficiently [0.95ms]
(pass) Phase 6: PerformanceScenarios > Performance Validation > should create scenarios by name efficiently [2.26ms]

src/performance/__tests__/NetworkProfiler.test.ts:
(pass) NetworkProfiler > Monitoring Lifecycle > should start monitoring successfully [361.09ms]
(pass) NetworkProfiler > Monitoring Lifecycle > should stop monitoring and generate report [354.87ms]
(pass) NetworkProfiler > Monitoring Lifecycle > should throw error when starting monitoring twice [350.47ms]
(pass) NetworkProfiler > Monitoring Lifecycle > should throw error when stopping inactive monitoring [0.08ms]
(pass) NetworkProfiler > Latency Measurement > should measure latency for multiple endpoints [58.79ms]
(pass) NetworkProfiler > Latency Measurement > should store latency history [8.26ms]
(pass) NetworkProfiler > Bandwidth Measurement > should measure bandwidth for different protocols [302.37ms]
(pass) NetworkProfiler > Bandwidth Measurement > should store bandwidth history [202.38ms]
(pass) NetworkProfiler > WebSocket Analysis > should analyze WebSocket performance [55.42ms]
(pass) NetworkProfiler > Network Optimizations > should generate network optimizations based on analysis report [0.37ms]
(pass) NetworkProfiler > History Management > should clear all monitoring history [111.65ms]

src/performance/__tests__/PredictivePerformanceAnalyzer.test.ts:
(pass) PredictivePerformanceAnalyzer > Data Management > should add performance data successfully [0.19ms]
(pass) PredictivePerformanceAnalyzer > Data Management > should limit historical data to 90 days [0.07ms]
(pass) PredictivePerformanceAnalyzer > Data Management > should clear historical data successfully [0.06ms]
(pass) PredictivePerformanceAnalyzer > Data Management > should provide data statistics [0.39ms]
(pass) PredictivePerformanceAnalyzer > Synthetic Data Generation > should generate synthetic data for specified days [31.11ms]
(pass) PredictivePerformanceAnalyzer > Synthetic Data Generation > should generate realistic synthetic data with patterns [5.25ms]
(pass) PredictivePerformanceAnalyzer > Synthetic Data Generation > should include contextual factors in synthetic data [1.42ms]
(pass) PredictivePerformanceAnalyzer > Predictive Analysis > should perform full predictive analysis [15.87ms]
(pass) PredictivePerformanceAnalyzer > Predictive Analysis > should throw error with insufficient data
(pass) PredictivePerformanceAnalyzer > Predictive Analysis > should respect analysis configuration flags [112.10ms]
(pass) PredictivePerformanceAnalyzer > Trend Analysis > should analyze trends correctly [0.74ms]
(pass) PredictivePerformanceAnalyzer > Trend Analysis > should sort trends by strength [0.42ms]
(pass) PredictivePerformanceAnalyzer > Trend Analysis > should include confidence intervals [0.52ms]
(pass) PredictivePerformanceAnalyzer > Bottleneck Prediction > should predict bottlenecks correctly [0.81ms]
(pass) PredictivePerformanceAnalyzer > Bottleneck Prediction > should sort predictions by lead time [0.23ms]
(pass) PredictivePerformanceAnalyzer > Bottleneck Prediction > should include impact radius
(pass) PredictivePerformanceAnalyzer > Seasonal Pattern Analysis > should detect seasonal patterns [0.25ms]
(pass) PredictivePerformanceAnalyzer > Seasonal Pattern Analysis > should identify peak and low times [0.28ms]
(pass) PredictivePerformanceAnalyzer > Seasonal Pattern Analysis > should sort patterns by reliability [0.36ms]
(pass) PredictivePerformanceAnalyzer > Anomaly Detection > should detect anomalies [2.19ms]
(pass) PredictivePerformanceAnalyzer > Anomaly Detection > should sort anomalies by deviation score [1.87ms]
(pass) PredictivePerformanceAnalyzer > Anomaly Detection > should classify anomaly types correctly [1.91ms]
(pass) PredictivePerformanceAnalyzer > Risk Assessment > should calculate risk assessment correctly [31.71ms]
(pass) PredictivePerformanceAnalyzer > Risk Assessment > should identify critical components [2.62ms]
(pass) PredictivePerformanceAnalyzer > Recommendations Generation > should generate comprehensive recommendations [33.03ms]
(pass) PredictivePerformanceAnalyzer > Recommendations Generation > should provide specific recommendations for detected issues [2.52ms]
(pass) PredictivePerformanceAnalyzer > Model Performance Evaluation > should evaluate model performance [115.57ms]
(pass) PredictivePerformanceAnalyzer > Model Performance Evaluation > should calculate data quality correctly [1.13ms]
(pass) PredictivePerformanceAnalyzer > Configuration Options > should respect prediction horizon [31.04ms]
(pass) PredictivePerformanceAnalyzer > Configuration Options > should respect confidence threshold [30.40ms]
[PredictivePerformanceAnalyzer] Added data point for test, total points: 1
(pass) PredictivePerformanceAnalyzer > Configuration Options > should handle detailed logging [0.20ms]
(pass) PredictivePerformanceAnalyzer > Error Handling > should handle empty data gracefully [0.11ms]
(pass) PredictivePerformanceAnalyzer > Error Handling > should handle invalid metric values [0.06ms]
(pass) PredictivePerformanceAnalyzer > Error Handling > should handle constant values in trend analysis [0.09ms]
(pass) PredictivePerformanceAnalyzer > Performance Validation > should complete analysis efficiently with large datasets [958.74ms]
(pass) PredictivePerformanceAnalyzer > Performance Validation > should handle concurrent analysis requests [30.32ms]
(pass) PredictivePerformanceAnalyzer > Performance Validation > should maintain memory efficiency [284.99ms]

src/performance/__tests__/RealTimeOptimizer.test.ts:
(pass) RealTimeOptimizer > Lifecycle Management > should start real-time optimization successfully
(pass) RealTimeOptimizer > Lifecycle Management > should throw error when starting already running optimizer [0.06ms]
(pass) RealTimeOptimizer > Lifecycle Management > should stop real-time optimization successfully [0.03ms]
(pass) RealTimeOptimizer > Lifecycle Management > should throw error when stopping non-running optimizer [0.03ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should apply dynamic optimization based on metrics [0.03ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should not apply optimization during cooldown period [0.20ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should generate CPU optimization actions [0.06ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should generate memory optimization actions [0.04ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should generate response time optimization actions [0.05ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should generate throughput optimization actions [65.36ms]
(pass) RealTimeOptimizer > Dynamic Optimization > should throw error when not running [0.12ms]
(pass) RealTimeOptimizer > Emergency Response > should detect CPU spike emergency [248.29ms]
(pass) RealTimeOptimizer > Emergency Response > should detect memory leak emergency [197.34ms]
(pass) RealTimeOptimizer > Emergency Response > should detect error storm emergency [406.35ms]
(pass) RealTimeOptimizer > Emergency Response > should detect latency spike emergency [102.23ms]
(pass) RealTimeOptimizer > Emergency Response > should detect throughput drop emergency [363.12ms]
(pass) RealTimeOptimizer > Emergency Response > should handle emergency response execution [492.20ms]
(pass) RealTimeOptimizer > Emergency Response > should not handle same emergency type if already active [388.33ms]
(pass) RealTimeOptimizer > Configuration Management > should adjust component configuration successfully [147.29ms]
(pass) RealTimeOptimizer > Configuration Management > should reject invalid configuration [0.13ms]
(pass) RealTimeOptimizer > Configuration Management > should throw error when adjusting configuration while not running [0.07ms]
(pass) RealTimeOptimizer > Threshold Management > should update performance thresholds [0.02ms]
(pass) RealTimeOptimizer > Threshold Management > should get active thresholds [0.04ms]
(pass) RealTimeOptimizer > Threshold Management > should use updated thresholds for optimization decisions [0.04ms]
(pass) RealTimeOptimizer > Performance Monitoring > should maintain performance history [0.02ms]
(pass) RealTimeOptimizer > Performance Monitoring > should limit history size [14.25ms]
(pass) RealTimeOptimizer > Performance Monitoring > should calculate recent average throughput [33.58ms]
(pass) RealTimeOptimizer > Error Handling > should handle monitoring cycle errors gracefully [0.12ms]
(pass) RealTimeOptimizer > Error Handling > should handle action execution failures [316.22ms]
(pass) RealTimeOptimizer > Error Handling > should handle invalid metrics gracefully [0.26ms]
(pass) RealTimeOptimizer > Integration Scenarios > should handle multiple simultaneous issues [0.23ms]
(pass) RealTimeOptimizer > Integration Scenarios > should prioritize emergency responses over regular optimizations [244.25ms]
(pass) RealTimeOptimizer > Integration Scenarios > should work with custom emergency thresholds [386.26ms]

src/performance/__tests__/AutomatedOptimizationEngine.test.ts:
(pass) AutomatedOptimizationEngine > Engine Lifecycle > should start engine successfully [0.41ms]
(pass) AutomatedOptimizationEngine > Engine Lifecycle > should throw error when starting already running engine [0.09ms]
(pass) AutomatedOptimizationEngine > Engine Lifecycle > should stop engine successfully [0.04ms]
(pass) AutomatedOptimizationEngine > Engine Lifecycle > should throw error when stopping non-running engine [0.03ms]
(pass) AutomatedOptimizationEngine > Engine Lifecycle > should track engine uptime correctly [101.05ms]
(pass) AutomatedOptimizationEngine > Optimization Execution > should execute optimization recommendations [424.90ms]
(pass) AutomatedOptimizationEngine > Optimization Execution > should prioritize critical optimizations first [392.44ms]
(pass) AutomatedOptimizationEngine > Optimization Execution > should schedule optimizations when at capacity [380.61ms]
(pass) AutomatedOptimizationEngine > Optimization Execution > should handle optimization failures gracefully [144.24ms]
(pass) AutomatedOptimizationEngine > Optimization Execution > should track optimization metrics [336.28ms]
(pass) AutomatedOptimizationEngine > Scheduling Management > should schedule optimization successfully [0.03ms]
(pass) AutomatedOptimizationEngine > Scheduling Management > should cancel scheduled optimization [0.13ms]
(pass) AutomatedOptimizationEngine > Scheduling Management > should return false when cancelling non-existent optimization [0.13ms]
(pass) AutomatedOptimizationEngine > Scheduling Management > should update next scheduled time correctly [0.25ms]
(pass) AutomatedOptimizationEngine > Validation and Rollback > should validate optimization successfully [361.95ms]
(pass) AutomatedOptimizationEngine > Validation and Rollback > should throw error when validating non-existent optimization [0.10ms]
(pass) AutomatedOptimizationEngine > Validation and Rollback > should rollback optimization successfully [460.95ms]
(pass) AutomatedOptimizationEngine > Validation and Rollback > should handle rollback failures gracefully [556.94ms]
(pass) AutomatedOptimizationEngine > Status and Reporting > should provide accurate engine status [0.07ms]
(pass) AutomatedOptimizationEngine > Status and Reporting > should calculate current load correctly [0.11ms]
(pass) AutomatedOptimizationEngine > Status and Reporting > should generate optimization report [401.55ms]
(pass) AutomatedOptimizationEngine > Status and Reporting > should maintain optimization history [487.72ms]
(pass) AutomatedOptimizationEngine > Status and Reporting > should sort history by most recent first [707.64ms]
(pass) AutomatedOptimizationEngine > Error Handling > should throw error when executing optimizations without starting engine [0.17ms]
(pass) AutomatedOptimizationEngine > Error Handling > should throw error when scheduling without starting engine [0.07ms]
(pass) AutomatedOptimizationEngine > Error Handling > should handle invalid optimization data gracefully [0.15ms]
(pass) AutomatedOptimizationEngine > Performance Metrics > should calculate performance impact correctly [418.53ms]
(pass) AutomatedOptimizationEngine > Performance Metrics > should track execution logs [494.78ms]
(pass) AutomatedOptimizationEngine > Performance Metrics > should measure optimization duration [397.58ms]

src/performance/__tests__/AutomatedOptimizationIntegration.test.ts:
(pass) Automated Optimization Integration > Complete Optimization Workflow > should execute complete optimization workflow successfully [350.96ms]
(pass) Automated Optimization Integration > Complete Optimization Workflow > should handle optimization rollback workflow [681.38ms]
(pass) Automated Optimization Integration > Real-Time Optimization Integration > should integrate real-time optimization with validation [0.45ms]
(pass) Automated Optimization Integration > Real-Time Optimization Integration > should handle emergency response with validation [413.44ms]
(pass) Automated Optimization Integration > Real-Time Optimization Integration > should update thresholds and apply new optimization logic [0.16ms]
(pass) Automated Optimization Integration > Engine and Real-Time Optimizer Coordination > should coordinate scheduled and real-time optimizations [0.09ms]
(pass) Automated Optimization Integration > Engine and Real-Time Optimizer Coordination > should handle resource conflicts between systems [0.14ms]
(pass) Automated Optimization Integration > Error Handling and Recovery > should handle validation failures gracefully [0.15ms]
(pass) Automated Optimization Integration > Error Handling and Recovery > should handle system failures and recovery [299.00ms]
(pass) Automated Optimization Integration > Error Handling and Recovery > should maintain audit trail during failures [435.78ms]
(pass) Automated Optimization Integration > Performance and Scalability > should handle multiple concurrent optimizations [1159.92ms]
(pass) Automated Optimization Integration > Performance and Scalability > should maintain performance under load [0.35ms]

src/performance/__tests__/MetricsCollector.test.ts:
[MetricsCollector] Starting metrics collection with 100ms interval
(pass) Phase 6: MetricsCollector > Core Collection Methods > startCollection > should start metrics collection successfully [0.18ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 100ms interval
(pass) Phase 6: MetricsCollector > Core Collection Methods > startCollection > should throw error if collection already started [0.09ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: MetricsCollector > Core Collection Methods > startCollection > should use default interval if not specified [0.02ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 500ms interval
(pass) Phase 6: MetricsCollector > Core Collection Methods > startCollection > should use custom interval when specified [0.02ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 100ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Core Collection Methods > stopCollection > should stop metrics collection successfully [0.02ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > stopCollection > should handle stopping when not collecting [0.02ms]
[MetricsCollector] Starting metrics collection with 100ms interval
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 100ms interval
(pass) Phase 6: MetricsCollector > Core Collection Methods > stopCollection > should allow restarting after stopping [0.03ms]
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should collect metrics snapshot successfully [0.55ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should collect system metrics correctly [0.05ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should collect application metrics correctly [0.05ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should collect network metrics correctly [0.05ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should collect disk metrics correctly [0.04ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should calculate network rates on subsequent calls [101.18ms]
(pass) Phase 6: MetricsCollector > Core Collection Methods > collectSnapshot > should calculate disk rates on subsequent calls [102.02ms]
(pass) Phase 6: MetricsCollector > Historical Data Management > getHistoricalMetrics > should return empty array when no history [0.17ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Historical Data Management > getHistoricalMetrics > should return metrics within time range [201.36ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Historical Data Management > getHistoricalMetrics > should filter metrics by time range correctly [200.45ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Clearing metrics history
(pass) Phase 6: MetricsCollector > Historical Data Management > clearHistory > should clear all historical metrics [150.49ms]
[MetricsCollector] Setting alert threshold for system.cpuUsage: {
  type: "cpu_high",
  value: 80,
  operator: ">",
  severity: "high",
}
(pass) Phase 6: MetricsCollector > Alerting System > setAlertThreshold > should set alert threshold successfully [0.14ms]
[MetricsCollector] Setting alert threshold for system.cpuUsage: {
  type: "cpu_high",
  value: 80,
  operator: ">",
  severity: "high",
}
[MetricsCollector] Setting alert threshold for system.memoryUsage: {
  type: "memory_high",
  value: 104857600,
  operator: ">",
  severity: "medium",
}
(pass) Phase 6: MetricsCollector > Alerting System > setAlertThreshold > should handle multiple thresholds for different metrics [0.06ms]
(pass) Phase 6: MetricsCollector > Alerting System > getActiveAlerts > should return empty array when no alerts [0.04ms]
[MetricsCollector] Setting alert threshold for system.cpuUsage: {
  type: "cpu_low",
  value: -1,
  operator: ">",
  severity: "low",
}
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] ALERT: system.cpuUsage cpu_low threshold exceeded: 6.262472 > -1
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Alerting System > getActiveAlerts > should return active alerts when thresholds exceeded [101.17ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Export Functionality > exportMetrics > should export metrics in JSON format [150.79ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Export Functionality > exportMetrics > should export metrics in CSV format [151.33ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Export Functionality > exportMetrics > should export metrics with time range filter [151.25ms]
(pass) Phase 6: MetricsCollector > Export Functionality > exportMetrics > should handle empty metrics gracefully [0.11ms]
(pass) Phase 6: MetricsCollector > Configuration & Edge Cases > Custom Configuration > should use custom configuration [0.04ms]
(pass) Phase 6: MetricsCollector > Configuration & Edge Cases > Custom Configuration > should handle disabled metrics collection [0.06ms]
[MetricsCollector] Starting metrics collection with 50ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Configuration & Edge Cases > Error Handling > should handle collection errors gracefully [101.16ms]
[MetricsCollector] Setting alert threshold for invalid.metric.path: {
  type: "invalid",
  value: 100,
  operator: ">",
  severity: "low",
}
(pass) Phase 6: MetricsCollector > Configuration & Edge Cases > Error Handling > should handle invalid metric names in alerts [0.15ms]
(pass) Phase 6: MetricsCollector > Configuration & Edge Cases > Performance Validation > should collect metrics efficiently [0.30ms]
[MetricsCollector] Starting metrics collection with 10ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: MetricsCollector > Configuration & Edge Cases > Performance Validation > should handle rapid collection intervals [100.38ms]

src/performance/__tests__/LoadTestManager.test.ts:
[LoadTestManager] Created test scenario: test-scenario
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should create test scenario correctly [0.29ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should validate scenario has required fields [0.13ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should validate virtual users count [0.05ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should validate test duration [0.03ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should validate operations exist [0.03ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should validate operation weights sum to 100 [0.03ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > createTestScenario > should handle scenario creation errors gracefully [0.03ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834280233-574 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834280233-574
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834280233-574
[LoadTestManager] Steady state phase for test: test-scenario-1749834280233-574
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834280233-574
[LoadTestManager] Cleanup phase for test: test-scenario-1749834280233-574
[LoadTestManager] Completed test: test-scenario-1749834280233-574
(pass) Phase 6: LoadTestManager > Test Scenario Management > runTestScenario > should run test scenario successfully [568.56ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > runTestScenario > should handle non-existent scenario [0.06ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834280801-683 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834280801-683
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834280801-683
[LoadTestManager] Steady state phase for test: test-scenario-1749834280801-683
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834280801-683
[LoadTestManager] Cleanup phase for test: test-scenario-1749834280801-683
[LoadTestManager] Completed test: test-scenario-1749834280801-683
[LoadTestManager] Starting test: test-scenario-1749834281370-86 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834281370-86
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834281370-86
[LoadTestManager] Steady state phase for test: test-scenario-1749834281370-86
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834281370-86
[LoadTestManager] Cleanup phase for test: test-scenario-1749834281370-86
[LoadTestManager] Completed test: test-scenario-1749834281370-86
(pass) Phase 6: LoadTestManager > Test Scenario Management > runTestScenario > should generate unique test IDs [1135.87ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834281937-622 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834281937-622
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834281937-622
[LoadTestManager] Steady state phase for test: test-scenario-1749834281937-622
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834281937-622
[LoadTestManager] Cleanup phase for test: test-scenario-1749834281937-622
[LoadTestManager] Completed test: test-scenario-1749834281937-622
(pass) Phase 6: LoadTestManager > Test Scenario Management > runTestScenario > should execute all test phases [513.49ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > runTestScenario > should handle test execution errors [0.23ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834282451-105 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834282451-105
[LoadTestManager] Stopped test: test-scenario-1749834282451-105
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834282451-105
[LoadTestManager] Steady state phase for test: test-scenario-1749834282451-105
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834282451-105
[LoadTestManager] Cleanup phase for test: test-scenario-1749834282451-105
[LoadTestManager] Completed test: test-scenario-1749834282451-105
(pass) Phase 6: LoadTestManager > Test Scenario Management > stopTestScenario > should stop running test scenario [51.64ms]
(pass) Phase 6: LoadTestManager > Test Scenario Management > stopTestScenario > should handle stopping non-existent test [0.12ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834282503-363 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834282503-363
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834282503-363
[LoadTestManager] Steady state phase for test: test-scenario-1749834282503-363
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834282503-363
[LoadTestManager] Cleanup phase for test: test-scenario-1749834282503-363
[LoadTestManager] Completed test: test-scenario-1749834282503-363
(pass) Phase 6: LoadTestManager > Monitoring & Status > monitorPerformance > should collect performance metrics for active test [566.85ms]
(pass) Phase 6: LoadTestManager > Monitoring & Status > monitorPerformance > should handle monitoring non-existent test [0.21ms]
[LoadTestManager] Created test scenario: test-scenario
(pass) Phase 6: LoadTestManager > Monitoring & Status > getTestStatus > should return test status for active test [0.23ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834283070-877 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834283070-877
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834283070-877
[LoadTestManager] Steady state phase for test: test-scenario-1749834283070-877
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834283070-877
[LoadTestManager] Cleanup phase for test: test-scenario-1749834283070-877
[LoadTestManager] Completed test: test-scenario-1749834283070-877
(pass) Phase 6: LoadTestManager > Monitoring & Status > getTestStatus > should calculate progress correctly [566.55ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834283637-653 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834283637-653
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834283637-653
[LoadTestManager] Steady state phase for test: test-scenario-1749834283637-653
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834283637-653
[LoadTestManager] Cleanup phase for test: test-scenario-1749834283637-653
[LoadTestManager] Completed test: test-scenario-1749834283637-653
(pass) Phase 6: LoadTestManager > Results & Reporting > getTestResults > should return test results after completion [583.90ms]
(pass) Phase 6: LoadTestManager > Results & Reporting > getTestResults > should handle non-existent test results [0.13ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834284221-165 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834284221-165
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834284221-165
[LoadTestManager] Steady state phase for test: test-scenario-1749834284221-165
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834284221-165
[LoadTestManager] Cleanup phase for test: test-scenario-1749834284221-165
[LoadTestManager] Completed test: test-scenario-1749834284221-165
(pass) Phase 6: LoadTestManager > Results & Reporting > generateReport > should generate comprehensive test report [565.15ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834284786-529 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834284786-529
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834284786-529
[LoadTestManager] Steady state phase for test: test-scenario-1749834284786-529
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834284786-529
[LoadTestManager] Cleanup phase for test: test-scenario-1749834284786-529
[LoadTestManager] Completed test: test-scenario-1749834284786-529
(pass) Phase 6: LoadTestManager > Results & Reporting > generateReport > should include performance recommendations [566.52ms]
(pass) Phase 6: LoadTestManager > Results & Reporting > generateReport > should handle report generation for non-existent test [0.16ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834285353-938 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834285353-938
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834285353-938
[LoadTestManager] Steady state phase for test: test-scenario-1749834285353-938
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834285353-938
[LoadTestManager] Cleanup phase for test: test-scenario-1749834285353-938
[LoadTestManager] Completed test: test-scenario-1749834285353-938
(pass) Phase 6: LoadTestManager > Performance Metrics > should collect accurate timing metrics using performance.now() [589.99ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834285943-590 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834285943-590
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834285943-590
[LoadTestManager] Steady state phase for test: test-scenario-1749834285943-590
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834285943-590
[LoadTestManager] Cleanup phase for test: test-scenario-1749834285943-590
[LoadTestManager] Completed test: test-scenario-1749834285943-590
(pass) Phase 6: LoadTestManager > Performance Metrics > should calculate percentiles correctly [571.92ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834286515-613 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834286515-613
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834286515-613
[LoadTestManager] Steady state phase for test: test-scenario-1749834286515-613
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834286515-613
[LoadTestManager] Cleanup phase for test: test-scenario-1749834286515-613
[LoadTestManager] Completed test: test-scenario-1749834286515-613
(pass) Phase 6: LoadTestManager > Performance Metrics > should track throughput metrics [570.56ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834287085-942 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834287085-942
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834287085-942
[LoadTestManager] Steady state phase for test: test-scenario-1749834287085-942
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834287085-942
[LoadTestManager] Cleanup phase for test: test-scenario-1749834287085-942
[LoadTestManager] Completed test: test-scenario-1749834287085-942
(pass) Phase 6: LoadTestManager > Performance Metrics > should track error metrics [566.84ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834287652-923 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834287652-923
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834287652-923
[LoadTestManager] Steady state phase for test: test-scenario-1749834287652-923
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834287652-923
[LoadTestManager] Cleanup phase for test: test-scenario-1749834287652-923
[LoadTestManager] Completed test: test-scenario-1749834287652-923
(pass) Phase 6: LoadTestManager > Performance Metrics > should track system metrics [567.52ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834288220-885 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834288220-885
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834288220-885
[LoadTestManager] Steady state phase for test: test-scenario-1749834288220-885
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834288220-885
[LoadTestManager] Cleanup phase for test: test-scenario-1749834288220-885
[LoadTestManager] Completed test: test-scenario-1749834288220-885
(pass) Phase 6: LoadTestManager > Success Criteria Evaluation > should evaluate test success based on criteria [568.23ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834288788-822 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834288788-822
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834288788-822
[LoadTestManager] Steady state phase for test: test-scenario-1749834288788-822
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834288788-822
[LoadTestManager] Cleanup phase for test: test-scenario-1749834288788-822
[LoadTestManager] Completed test: test-scenario-1749834288788-822
(pass) Phase 6: LoadTestManager > Success Criteria Evaluation > should fail test when response time exceeds threshold [568.00ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834289356-313 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834289356-313
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834289356-313
[LoadTestManager] Steady state phase for test: test-scenario-1749834289356-313
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834289356-313
[LoadTestManager] Cleanup phase for test: test-scenario-1749834289356-313
[LoadTestManager] Completed test: test-scenario-1749834289356-313
(pass) Phase 6: LoadTestManager > Success Criteria Evaluation > should provide detailed failure reasons [566.80ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834289923-557 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834289923-557
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834289923-557
[LoadTestManager] Steady state phase for test: test-scenario-1749834289923-557
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834289923-557
[LoadTestManager] Cleanup phase for test: test-scenario-1749834289923-557
[LoadTestManager] Completed test: test-scenario-1749834289923-557
(pass) Phase 6: LoadTestManager > Edge Cases & Error Handling > should handle empty operation results gracefully [411.08ms]
[LoadTestManager] Created test scenario: test-scenario-1
[LoadTestManager] Created test scenario: test-scenario-2
[LoadTestManager] Starting test: test-scenario-1-1749834290334-976 for scenario: test-scenario-1
[LoadTestManager] Preparation phase for test: test-scenario-1-1749834290334-976
[LoadTestManager] Starting test: test-scenario-2-1749834290334-842 for scenario: test-scenario-2
[LoadTestManager] Preparation phase for test: test-scenario-2-1749834290334-842
[LoadTestManager] Ramp-up phase for test: test-scenario-1-1749834290334-976
[LoadTestManager] Ramp-up phase for test: test-scenario-2-1749834290334-842
[LoadTestManager] Steady state phase for test: test-scenario-1-1749834290334-976
[LoadTestManager] Steady state phase for test: test-scenario-2-1749834290334-842
[LoadTestManager] Ramp-down phase for test: test-scenario-1-1749834290334-976
[LoadTestManager] Ramp-down phase for test: test-scenario-2-1749834290334-842
[LoadTestManager] Cleanup phase for test: test-scenario-1-1749834290334-976
[LoadTestManager] Completed test: test-scenario-1-1749834290334-976
[LoadTestManager] Cleanup phase for test: test-scenario-2-1749834290334-842
[LoadTestManager] Completed test: test-scenario-2-1749834290334-842
(pass) Phase 6: LoadTestManager > Edge Cases & Error Handling > should handle concurrent test execution [567.20ms]
[LoadTestManager] Created test scenario: test-scenario
[LoadTestManager] Starting test: test-scenario-1749834290901-285 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834290901-285
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834290901-285
[LoadTestManager] Steady state phase for test: test-scenario-1749834290901-285
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834290901-285
[LoadTestManager] Cleanup phase for test: test-scenario-1749834290901-285
[LoadTestManager] Completed test: test-scenario-1749834290901-285
[LoadTestManager] Starting test: test-scenario-1749834291466-286 for scenario: test-scenario
[LoadTestManager] Preparation phase for test: test-scenario-1749834291466-286
[LoadTestManager] Ramp-up phase for test: test-scenario-1749834291466-286
[LoadTestManager] Steady state phase for test: test-scenario-1749834291466-286
[LoadTestManager] Ramp-down phase for test: test-scenario-1749834291466-286
[LoadTestManager] Cleanup phase for test: test-scenario-1749834291466-286
[LoadTestManager] Completed test: test-scenario-1749834291466-286
(pass) Phase 6: LoadTestManager > Edge Cases & Error Handling > should cleanup resources properly [1134.29ms]

src/performance/__tests__/OptimizationValidator.test.ts:

src/performance/__tests__/TestScenarioBuilder.test.ts:
(pass) Phase 6: TestScenarioBuilder > Fluent API > createScenario > should create scenario builder instance [0.25ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > createScenario > should set scenario name correctly [0.33ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Fluent Builder Chain > should build complete scenario with fluent API [0.18ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Fluent Builder Chain > should validate operation weights sum to 100 [0.52ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Fluent Builder Chain > should validate required fields [0.14ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Operation Builders > should add auth operations correctly [0.06ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Operation Builders > should add query operations correctly [0.09ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Operation Builders > should add realtime operations correctly [0.27ms]
(pass) Phase 6: TestScenarioBuilder > Fluent API > Operation Builders > should handle mixed operations [0.27ms]
(pass) Phase 6: TestScenarioBuilder > Pre-built Scenario Templates > getAuthenticationScenario > should create authentication scenario correctly [0.59ms]
(pass) Phase 6: TestScenarioBuilder > Pre-built Scenario Templates > getAuthenticationScenario > should calculate ramp-up time based on user count [0.05ms]
(pass) Phase 6: TestScenarioBuilder > Pre-built Scenario Templates > getDatabaseScenario > should create database scenario correctly [0.20ms]
(pass) Phase 6: TestScenarioBuilder > Pre-built Scenario Templates > getDatabaseScenario > should handle empty collections array [0.04ms]
(pass) Phase 6: TestScenarioBuilder > Pre-built Scenario Templates > getRealtimeScenario > should create realtime scenario correctly [0.20ms]
(pass) Phase 6: TestScenarioBuilder > Pre-built Scenario Templates > getRealtimeScenario > should handle empty subscription types [0.04ms]
(pass) Phase 6: TestScenarioBuilder > Template Management > getAvailableTemplates > should return built-in templates [0.11ms]
(pass) Phase 6: TestScenarioBuilder > Template Management > getAvailableTemplates > should return template with correct structure [0.11ms]
(pass) Phase 6: TestScenarioBuilder > Template Management > getTemplate > should return specific template [0.04ms]
(pass) Phase 6: TestScenarioBuilder > Template Management > getTemplate > should return undefined for non-existent template [0.02ms]
(pass) Phase 6: TestScenarioBuilder > Template Management > addCustomTemplate > should add custom template [0.11ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should validate correct scenario [0.17ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should detect missing required fields [0.27ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should detect invalid virtual users [0.05ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should detect invalid test duration [0.05ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should detect missing operations [0.09ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should detect incorrect operation weights [0.05ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should generate warnings for high resource usage [0.03ms]
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should generate warnings for strict success criteria
(pass) Phase 6: TestScenarioBuilder > Scenario Validation > validateScenario > should generate optimization suggestions [0.06ms]
(pass) Phase 6: TestScenarioBuilder > Optimization Suggestions > getOptimizationSuggestions > should suggest performance optimizations [0.36ms]
(pass) Phase 6: TestScenarioBuilder > Optimization Suggestions > getOptimizationSuggestions > should suggest reliability optimizations [0.07ms]
(pass) Phase 6: TestScenarioBuilder > Optimization Suggestions > getOptimizationSuggestions > should suggest resource usage optimizations [0.13ms]
(pass) Phase 6: TestScenarioBuilder > Optimization Suggestions > getOptimizationSuggestions > should include impact levels and recommendations [0.12ms]
(pass) Phase 6: TestScenarioBuilder > Import/Export Functionality > exportScenario > should export scenario in JSON format [0.13ms]
(pass) Phase 6: TestScenarioBuilder > Import/Export Functionality > exportScenario > should export scenario in YAML format [0.11ms]
(pass) Phase 6: TestScenarioBuilder > Import/Export Functionality > exportScenario > should default to JSON format [0.05ms]
(pass) Phase 6: TestScenarioBuilder > Import/Export Functionality > importScenario > should import scenario from JSON [0.08ms]
(pass) Phase 6: TestScenarioBuilder > Import/Export Functionality > importScenario > should handle invalid JSON gracefully [0.04ms]
(pass) Phase 6: TestScenarioBuilder > Import/Export Functionality > importScenario > should throw error for YAML import (not implemented) [0.04ms]
(pass) Phase 6: TestScenarioBuilder > Performance Validation > should validate scenarios efficiently [0.36ms]
(pass) Phase 6: TestScenarioBuilder > Performance Validation > should generate optimizations efficiently [0.18ms]

src/performance/__tests__/CrossComponentCorrelationAnalyzer.test.ts:
(pass) CrossComponentCorrelationAnalyzer > Monitoring Lifecycle > should start monitoring successfully [216.70ms]
(pass) CrossComponentCorrelationAnalyzer > Monitoring Lifecycle > should stop monitoring and generate report [267.40ms]
(pass) CrossComponentCorrelationAnalyzer > Monitoring Lifecycle > should throw error when starting monitoring twice [67.06ms]
(pass) CrossComponentCorrelationAnalyzer > Monitoring Lifecycle > should throw error when stopping inactive monitoring [0.30ms]
(pass) CrossComponentCorrelationAnalyzer > Component Metrics Management > should add component metrics successfully [0.13ms]
(pass) CrossComponentCorrelationAnalyzer > Component Metrics Management > should limit history size based on analysis window [0.27ms]
(pass) CrossComponentCorrelationAnalyzer > Component Metrics Management > should clear history successfully [0.07ms]
(pass) CrossComponentCorrelationAnalyzer > Correlation Analysis > should analyze correlations between components [0.59ms]
(pass) CrossComponentCorrelationAnalyzer > Correlation Analysis > should filter correlations by threshold [0.28ms]
(pass) CrossComponentCorrelationAnalyzer > Correlation Analysis > should analyze specific components when provided [0.10ms]
(pass) CrossComponentCorrelationAnalyzer > Cascade Effects Analysis > should detect cascade effects [0.44ms]
(pass) CrossComponentCorrelationAnalyzer > Cascade Effects Analysis > should sort cascade effects by impact magnitude [0.34ms]
(pass) CrossComponentCorrelationAnalyzer > Cascade Effects Analysis > should return empty array when cascade analysis is disabled [0.13ms]
(pass) CrossComponentCorrelationAnalyzer > Critical Path Analysis > should analyze critical paths [0.33ms]
(pass) CrossComponentCorrelationAnalyzer > Critical Path Analysis > should identify bottleneck components correctly [0.32ms]
(pass) CrossComponentCorrelationAnalyzer > Critical Path Analysis > should sort critical paths by total latency [0.32ms]
(pass) CrossComponentCorrelationAnalyzer > Critical Path Analysis > should return empty array when critical path analysis is disabled [0.11ms]
(pass) CrossComponentCorrelationAnalyzer > Resource Dependency Analysis > should analyze resource dependencies [0.38ms]
(pass) CrossComponentCorrelationAnalyzer > Resource Dependency Analysis > should identify high resource usage components [0.31ms]
(pass) CrossComponentCorrelationAnalyzer > Resource Dependency Analysis > should sort dependencies by contention level [0.35ms]
(pass) CrossComponentCorrelationAnalyzer > Resource Dependency Analysis > should return empty array when resource dependency analysis is disabled [0.10ms]
(pass) CrossComponentCorrelationAnalyzer > Optimization Recommendations > should generate correlation optimizations [0.24ms]
(pass) CrossComponentCorrelationAnalyzer > Optimization Recommendations > should provide different recommendations based on correlation patterns [0.13ms]
(pass) CrossComponentCorrelationAnalyzer > Optimization Recommendations > should provide architectural recommendations for many correlations [0.13ms]
(pass) CrossComponentCorrelationAnalyzer > Configuration Options > should respect custom correlation threshold [0.31ms]
(pass) CrossComponentCorrelationAnalyzer > Configuration Options > should handle detailed logging configuration [0.10ms]
(pass) CrossComponentCorrelationAnalyzer > Error Handling > should handle insufficient data gracefully [0.10ms]
(pass) CrossComponentCorrelationAnalyzer > Error Handling > should handle invalid correlation calculations [0.21ms]
(pass) CrossComponentCorrelationAnalyzer > Error Handling > should handle empty component lists [0.22ms]
(pass) CrossComponentCorrelationAnalyzer > Performance Validation > should complete analysis efficiently [167.23ms]
(pass) CrossComponentCorrelationAnalyzer > Performance Validation > should handle concurrent analysis requests [0.47ms]

src/performance/__tests__/PerformanceIntegrator.test.ts:
(pass) Phase 6: PerformanceIntegrator > Initialization > should initialize with default config
[PerformanceIntegrator] PerformanceIntegrator initialized with config: {
  enableMetricsCollection: false,
  baselineTestDuration: 30,
  baselineVirtualUsers: 5,
  resultStoragePath: "./custom-results",
  enableDetailedLogging: true,
  testMode: false,
  fastBaseline: false,
  mockScenarios: false,
  parallelBaseline: false,
}
(pass) Phase 6: PerformanceIntegrator > Initialization > should initialize with custom config [0.07ms]
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Initialization > should initialize successfully [17.02ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Baseline Measurement > should measure baseline metrics successfully [6.30ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Baseline Measurement > should store baseline metrics [5.93ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Performance Test Suite > should run performance test suite successfully [57.57ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Performance Test Suite > should run specific scenarios [11.70ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Performance Comparison > should compare performance with baseline [12.16ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Performance Comparison > should throw error when no baseline available [22.20ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
(pass) Phase 6: PerformanceIntegrator > Scenario Validation > should validate all test scenarios [1.14ms]
[MetricsCollector] Stopping metrics collection
[MetricsCollector] Starting metrics collection with 1000ms interval
[MetricsCollector] Stopping metrics collection
(pass) Phase 6: PerformanceIntegrator > Resource Management > should cleanup resources properly [16.96ms]

src/performance/__tests__/ComputedAttributesProfiler.test.ts:
(pass) ComputedAttributesProfiler > Monitoring Lifecycle > should start monitoring successfully [92.96ms]
(pass) ComputedAttributesProfiler > Monitoring Lifecycle > should stop monitoring and generate report [319.11ms]
(pass) ComputedAttributesProfiler > Monitoring Lifecycle > should throw error when starting monitoring twice [45.30ms]
(pass) ComputedAttributesProfiler > Monitoring Lifecycle > should throw error when stopping inactive monitoring [0.09ms]
(pass) ComputedAttributesProfiler > Computation Profiling > should profile computation performance [95.19ms]
(pass) ComputedAttributesProfiler > Computation Profiling > should generate recommendations for slow computation [144.81ms]
(pass) ComputedAttributesProfiler > Computation Profiling > should handle computation without dependencies [53.84ms]
(pass) ComputedAttributesProfiler > Cache Efficiency Analysis > should analyze cache efficiency [0.23ms]
(pass) ComputedAttributesProfiler > Cache Efficiency Analysis > should generate cache optimization recommendations [0.08ms]
(pass) ComputedAttributesProfiler > Metrics Collection > should collect computation metrics during monitoring [299.18ms]
(pass) ComputedAttributesProfiler > Metrics Collection > should clear history [403.29ms]
(pass) ComputedAttributesProfiler > Performance Analysis Report > should generate comprehensive analysis report [416.11ms]
(pass) ComputedAttributesProfiler > Performance Analysis Report > should identify bottlenecks and provide recommendations [203.97ms]
(pass) ComputedAttributesProfiler > Error Handling > should handle invalid computation configurations gracefully [90.70ms]
(pass) ComputedAttributesProfiler > Error Handling > should handle zero cache size [0.34ms]
(pass) ComputedAttributesProfiler > Error Handling > should handle zero operations [0.15ms]
(pass) ComputedAttributesProfiler > Configuration Options > should respect custom sampling interval [252.37ms]
(pass) ComputedAttributesProfiler > Configuration Options > should handle detailed logging configuration [0.14ms]
(pass) ComputedAttributesProfiler > Complex Scenarios > should handle multiple computation types [115.29ms]
(pass) ComputedAttributesProfiler > Complex Scenarios > should handle cache analysis with different sizes [0.39ms]

src/query/__tests__/bitwise.test.ts:
(pass) Bitwise Operators > BitsAllSetOperator ($bitsAllSet) > should return true if all specified bits (mask) are 1 [0.40ms]
(pass) Bitwise Operators > BitsAllSetOperator ($bitsAllSet) > should return false if any specified bit (mask) is 0 [0.06ms]
(pass) Bitwise Operators > BitsAllSetOperator ($bitsAllSet) > should return true if all specified bits (positions) are 1 [0.11ms]
(pass) Bitwise Operators > BitsAllSetOperator ($bitsAllSet) > should return false if any specified bit (position) is 0 [0.08ms]
(pass) Bitwise Operators > BitsAllSetOperator ($bitsAllSet) > should return false for non-integer or non-numeric values [0.20ms]
(pass) Bitwise Operators > BitsAllSetOperator ($bitsAllSet) > should throw error for invalid constructor arguments [0.48ms]
(pass) Bitwise Operators > BitsAnySetOperator ($bitsAnySet) > should return true if any specified bit (mask) is 1 [0.21ms]
(pass) Bitwise Operators > BitsAnySetOperator ($bitsAnySet) > should return false if all specified bits (mask) are 0 [0.10ms]
(pass) Bitwise Operators > BitsAnySetOperator ($bitsAnySet) > should return true if any specified bit (position) is 1 [0.06ms]
(pass) Bitwise Operators > BitsAnySetOperator ($bitsAnySet) > should return false if all specified bits (position) are 0 [0.04ms]
(pass) Bitwise Operators > BitsAnySetOperator ($bitsAnySet) > should return false for non-integer or non-numeric values [0.05ms]
(pass) Bitwise Operators > BitsAnySetOperator ($bitsAnySet) > should throw error for invalid constructor arguments [0.40ms]
(pass) Bitwise Operators > BitsAllClearOperator ($bitsAllClear) > should return true if all specified bits (mask) are 0 [0.19ms]
(pass) Bitwise Operators > BitsAllClearOperator ($bitsAllClear) > should return false if any specified bit (mask) is 1 [0.03ms]
(pass) Bitwise Operators > BitsAllClearOperator ($bitsAllClear) > should return true if all specified bits (positions) are 0 [0.03ms]
(pass) Bitwise Operators > BitsAllClearOperator ($bitsAllClear) > should return false if any specified bit (position) is 1 [0.03ms]
(pass) Bitwise Operators > BitsAllClearOperator ($bitsAllClear) > should return false for non-integer or non-numeric values [0.05ms]
(pass) Bitwise Operators > BitsAllClearOperator ($bitsAllClear) > should throw error for invalid constructor arguments [0.22ms]
(pass) Bitwise Operators > BitsAnyClearOperator ($bitsAnyClear) > should return true if any specified bit (mask) is 0 [0.13ms]
(pass) Bitwise Operators > BitsAnyClearOperator ($bitsAnyClear) > should return false if all specified bits (mask) are 1 [0.04ms]
(pass) Bitwise Operators > BitsAnyClearOperator ($bitsAnyClear) > should return true if any specified bit (position) is 0 [0.06ms]
(pass) Bitwise Operators > BitsAnyClearOperator ($bitsAnyClear) > should return false if all specified bits (position) are 1 [0.03ms]
(pass) Bitwise Operators > BitsAnyClearOperator ($bitsAnyClear) > should return false for non-integer or non-numeric values [0.03ms]
(pass) Bitwise Operators > BitsAnyClearOperator ($bitsAnyClear) > should throw error for invalid constructor arguments [0.20ms]

src/query/__tests__/logical.test.ts:
(pass) Logical Operators > AndOperator ($and) > should evaluate to true if all sub-conditions evaluate to true [0.68ms]
(pass) Logical Operators > AndOperator ($and) > should evaluate to false if any sub-condition evaluates to false [0.21ms]
(pass) Logical Operators > AndOperator ($and) > should evaluate to true for an empty array of conditions (vacuously true) [0.04ms]
(pass) Logical Operators > AndOperator ($and) > should pass context to sub-conditions if needed [0.17ms]
(pass) Logical Operators > AndOperator ($and) > should throw error if constructor value is not an array [0.11ms]
(pass) Logical Operators > AndOperator ($and) > should throw error if array elements are not objects (potential QueryOperators) [0.10ms]
(pass) Logical Operators > OrOperator ($or) > should evaluate to true if any sub-condition evaluates to true [0.14ms]
(pass) Logical Operators > OrOperator ($or) > should evaluate to false if all sub-conditions evaluate to false [0.05ms]
(pass) Logical Operators > OrOperator ($or) > should evaluate to false for an empty array of conditions (vacuously false) [0.03ms]
(pass) Logical Operators > OrOperator ($or) > should pass context to sub-conditions if needed [0.10ms]
(pass) Logical Operators > OrOperator ($or) > should throw error if constructor value is not an array [0.09ms]
(pass) Logical Operators > OrOperator ($or) > should throw error if array elements are not objects (potential QueryOperators) [0.09ms]
(pass) Logical Operators > NotOperator ($not) > should invert the result of the sub-condition [0.09ms]
(pass) Logical Operators > NotOperator ($not) > should work with regex sub-condition [0.09ms]
(pass) Logical Operators > NotOperator ($not) > should pass context to sub-condition if needed [0.07ms]
(pass) Logical Operators > NotOperator ($not) > should throw error if constructor value is not an object [0.09ms]
(pass) Logical Operators > NorOperator ($nor) > should evaluate to true if all sub-conditions evaluate to false [0.14ms]
(pass) Logical Operators > NorOperator ($nor) > should evaluate to false if any sub-condition evaluates to true [0.05ms]
(pass) Logical Operators > NorOperator ($nor) > should evaluate to true for an empty array of conditions (vacuously true) [0.02ms]
(pass) Logical Operators > NorOperator ($nor) > should pass context to sub-conditions if needed [0.08ms]
(pass) Logical Operators > NorOperator ($nor) > should throw error if constructor value is not an array [0.05ms]
(pass) Logical Operators > NorOperator ($nor) > should throw error if array elements are not objects (potential QueryOperators) [0.08ms]

src/query/__tests__/compile_query.test.ts:
(pass) compileQuery > Field Equality > should compile simple equality check
(pass) compileQuery > Field Equality > should compile nested field equality check [1.36ms]
(pass) compileQuery > Field Equality > should handle field names requiring bracket notation [0.51ms]
(pass) compileQuery > Field Equality > should handle multiple field checks (implicit AND) [0.21ms]
(pass) compileQuery > Comparison Operators > should compile $eq [0.50ms]
(pass) compileQuery > Comparison Operators > should compile $gt [0.29ms]
(pass) compileQuery > Comparison Operators > should compile $gte [0.13ms]
(pass) compileQuery > Comparison Operators > should compile $lt [0.18ms]
(pass) compileQuery > Comparison Operators > should compile $lte [0.29ms]
(pass) compileQuery > Comparison Operators > should compile $ne [0.16ms]
(pass) compileQuery > Comparison Operators > should compile $in [0.09ms]
(pass) compileQuery > Comparison Operators > should compile $in with different types [0.17ms]
(pass) compileQuery > Comparison Operators > should compile $nin [0.11ms]
(pass) compileQuery > Logical Operators > should compile $and [0.09ms]
(pass) compileQuery > Logical Operators > should compile $or [0.10ms]
(pass) compileQuery > Logical Operators > should compile $not [0.13ms]
(pass) compileQuery > Logical Operators > should compile $not with field [0.10ms]
(pass) compileQuery > Logical Operators > should compile $nor [0.08ms]
(pass) compileQuery > Logical Operators > should handle nested logical operators [0.08ms]
(pass) compileQuery > Element Operators > should compile $exists: true [0.13ms]
(pass) compileQuery > Element Operators > should compile $exists: false [0.04ms]
(pass) compileQuery > Element Operators > should compile $exists on nested fields [0.10ms]
(pass) compileQuery > Evaluation Operators > $regex > should compile $regex with string value [0.25ms]
(pass) compileQuery > Evaluation Operators > $regex > should compile $regex with standard RegExp value [0.11ms]
(pass) compileQuery > Evaluation Operators > $regex > should compile implicit $regex with RegExp at field level [0.08ms]
(pass) compileQuery > Evaluation Operators > $regex > should compile $regex with $options [0.08ms]
(pass) compileQuery > Evaluation Operators > $regex > should handle multiple regex on different fields [0.26ms]
(pass) compileQuery > Evaluation Operators > $regex > should return false for invalid $regex pattern at runtime [0.23ms]
Error during query compilation: $regex: $regex: Invalid regex flags specified: invalid (value: {"$regex":"test","$options":"invalid"}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $regex: $regex: Invalid regex flags specified: invalid (value: {"$regex":"test","$options":"invalid"})
 operator: "$regex",
    value: {
  $regex: "test",
  $options: "invalid",
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:678:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:360:32)

(pass) compileQuery > Evaluation Operators > $regex > should return error for invalid $options string during compilation [0.82ms]
Error during query compilation: $regex: $regex: $regex requires a string, RegExp, or { $regex, $options } object (value: 123) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $regex: $regex: $regex requires a string, RegExp, or { $regex, $options } object (value: 123)
 operator: "$regex",
    value: 123,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:669:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:366:32)

(pass) compileQuery > Evaluation Operators > $regex > should return error if $regex value is not string/RegExp/object [0.14ms]
Error during query compilation: $regex: $regex: $options requires a string (value: {"$regex":"test","$options":123}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $regex: $regex: $options requires a string (value: {"$regex":"test","$options":123})
 operator: "$regex",
    value: {
  $regex: "test",
  $options: 123,
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:660:19)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:372:32)

(pass) compileQuery > Evaluation Operators > $regex > should return error if $options value is not string [0.10ms]
(pass) compileQuery > Evaluation Operators > $type > should match type using string alias [0.21ms]
(pass) compileQuery > Evaluation Operators > $type > should match type number [0.06ms]
(pass) compileQuery > Evaluation Operators > $type > should match type using array of type names [0.08ms]
(pass) compileQuery > Evaluation Operators > $type > should match null type [0.04ms]
(pass) compileQuery > Evaluation Operators > $type > should match undefined type [0.05ms]
(pass) compileQuery > Evaluation Operators > $type > should match array type [0.09ms]
(pass) compileQuery > Evaluation Operators > $type > should match object type [0.10ms]
(pass) compileQuery > Evaluation Operators > $type > should match date type [0.05ms]
(pass) compileQuery > Evaluation Operators > $type > should match regexp type [0.06ms]
Error during query compilation: $type: Invalid type name specified for $type: invalidtype (value: "invalidType") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $type: Invalid type name specified for $type: invalidtype (value: "invalidType")
 operator: "$type",
    value: "invalidType",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:618:17)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:474:32)

(pass) compileQuery > Evaluation Operators > $type > should return error for invalid type alias [0.31ms]
Error during query compilation: $type: Invalid type name specified for $type: invalidtype (value: ["string","invalidType"]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $type: Invalid type name specified for $type: invalidtype (value: ["string","invalidType"])
 operator: "$type",
    value: [
  "string", "invalidType"
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:618:17)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:480:32)

(pass) compileQuery > Evaluation Operators > $type > should return error for invalid type in array [0.09ms]
Error during query compilation: $type: $type requires a type name string or an array of type name strings (value: {"invalid":true}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $type: $type requires a type name string or an array of type name strings (value: {"invalid":true})
 operator: "$type",
    value: {
  invalid: true,
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:594:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:486:32)

(pass) compileQuery > Evaluation Operators > $type > should return error if value is not string/array [0.08ms]
(pass) compileQuery > Evaluation Operators > $type > should match special object types (date, regexp, buffer) [0.09ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $mod > should compile $mod operator [0.08ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $mod > should compile $mod with non-zero remainder [0.05ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $mod > should return false for non-integer values with $mod [0.04ms]
Error during query compilation: $mod: $mod divisor cannot be 0 (value: [0,1]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $mod: $mod divisor cannot be 0 (value: [0,1])
 operator: "$mod",
    value: [
  0, 1
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:717:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:537:16)

Error during query compilation: $mod: $mod requires divisor and remainder to be integers (value: [4,1.5]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $mod: $mod requires divisor and remainder to be integers (value: [4,1.5])
 operator: "$mod",
    value: [
  4, 1.5
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:710:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:538:16)

Error during query compilation: $mod: $mod requires an array with [ divisor, remainder ] (value: [4]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $mod: $mod requires an array with [ divisor, remainder ] (value: [4])
 operator: "$mod",
    value: [
  4
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:696:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:539:16)

Error during query compilation: $mod: $mod requires an array with [ divisor, remainder ] (value: "invalid") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $mod: $mod requires an array with [ divisor, remainder ] (value: "invalid")
 operator: "$mod",
    value: "invalid",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:696:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:540:16)

(pass) compileQuery > Evaluation Operators (Compiled) > $mod > should return error for invalid $mod arguments during compilation [0.24ms]
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
(pass) compileQuery > Evaluation Operators (Compiled) > $where > should compile $where with a function string [0.26ms]
Error executing $where function: undefined is not an object (evaluating 'this.tags.includes') {}
(pass) compileQuery > Evaluation Operators (Compiled) > $where > should compile $where with a function object [0.13ms]
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
(pass) compileQuery > Evaluation Operators (Compiled) > $where > should compile query combining $where and other conditions [0.19ms]
Error during query compilation: $where: $where requires a string or function argument (value: 123) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $where: $where requires a string or function argument (value: 123)
 operator: "$where",
    value: 123,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:729:15)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:341:9)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:586:16)

Error during query compilation: $where: $where requires a string or function argument (value: null) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $where: $where requires a string or function argument (value: null)
 operator: "$where",
    value: null,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:729:15)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:341:9)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:587:16)

Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
Error during query compilation: $where: Invalid $where JavaScript expression: Unexpected identifier 'syntax'. Expected ')' to end a compound expression. (value: "invalid syntax ===") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $where: Invalid $where JavaScript expression: Unexpected identifier 'syntax'. Expected ')' to end a compound expression. (value: "invalid syntax ===")
 operator: "$where",
    value: "invalid syntax ===",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at new WhereOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/evaluation.ts:162:15)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:736:25)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:341:9)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:590:16)

(pass) compileQuery > Evaluation Operators (Compiled) > $where > should return error during compilation for invalid $where argument [0.35ms]
Error executing $where function: Oops {
  a: 1,
}
(pass) compileQuery > Evaluation Operators (Compiled) > $where > should handle errors within the $where function execution [0.11ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $text > should compile $text with simple search string [0.30ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $text > should compile $text with $caseSensitive: true [0.07ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $text > should compile $text with $caseSensitive: false [0.08ms]
(pass) compileQuery > Evaluation Operators (Compiled) > $text > should compile $text with search string containing extra spaces
Error during query compilation: $text: $text requires an object with a $search property (value: {"$caseSensitive":false}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $text: $text requires an object with a $search property (value: {"$caseSensitive":false})
 operator: "$text",
    value: {
  $caseSensitive: false,
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:759:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:650:26)

(pass) compileQuery > Evaluation Operators (Compiled) > $text > should return error during compilation for missing $search [0.09ms]
Error during query compilation: $text: $text operator requires $search to be a string (value: {"$search":123}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $text: $text operator requires $search to be a string (value: {"$search":123})
 operator: "$text",
    value: {
  $search: 123,
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:768:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:656:26)

(pass) compileQuery > Evaluation Operators (Compiled) > $text > should return error during compilation for non-string $search [0.12ms]
Error during query compilation: $text: $text operator $search string cannot be empty (value: {"$search":" "}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $text: $text operator $search string cannot be empty (value: {"$search":" "})
 operator: "$text",
    value: {
  $search: " ",
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:776:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:662:26)

(pass) compileQuery > Evaluation Operators (Compiled) > $text > should return error during compilation for empty $search string [0.04ms]
Error during query compilation: $text: $text operator $caseSensitive must be a boolean (value: {"$search":"test","$caseSensitive":"yes"}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $text: $text operator $caseSensitive must be a boolean (value: {"$search":"test","$caseSensitive":"yes"})
 operator: "$text",
    value: {
  $search: "test",
  $caseSensitive: "yes",
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:786:17)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:668:26)

(pass) compileQuery > Evaluation Operators (Compiled) > $text > should return error during compilation for non-boolean $caseSensitive
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAllSet > should compile $bitsAllSet with bitmask [0.21ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAllSet > should compile $bitsAllSet with position array [0.08ms]
Error during query compilation: $bitsAllSet: $bitsAllSet requires a non-negative integer bitmask or an array of non-negative bit positions (value: -1) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $bitsAllSet: $bitsAllSet requires a non-negative integer bitmask or an array of non-negative bit positions (value: -1)
 operator: "$bitsAllSet",
    value: -1,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:837:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:703:16)

Error during query compilation: $bitsAllSet: $bitsAllSet requires a non-negative integer bitmask or an array of non-negative bit positions (value: 1.5) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $bitsAllSet: $bitsAllSet requires a non-negative integer bitmask or an array of non-negative bit positions (value: 1.5)
 operator: "$bitsAllSet",
    value: 1.5,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:837:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:704:16)

Error during query compilation: $bitsAllSet: Bit positions must be non-negative integers in $bitsAllSet (value: [-1]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $bitsAllSet: Bit positions must be non-negative integers in $bitsAllSet (value: [-1])
 operator: "$bitsAllSet",
    value: [
  -1
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:828:19)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:705:16)

Error during query compilation: $bitsAllSet: $bitsAllSet requires a non-negative integer bitmask or an array of non-negative bit positions (value: "invalid") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $bitsAllSet: $bitsAllSet requires a non-negative integer bitmask or an array of non-negative bit positions (value: "invalid")
 operator: "$bitsAllSet",
    value: "invalid",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:837:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:706:16)

(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAllSet > should return error for invalid $bitsAllSet arguments [0.30ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAnySet > should compile $bitsAnySet with bitmask [0.18ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAnySet > should compile $bitsAnySet with position array [0.06ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAllClear > should compile $bitsAllClear with bitmask [0.11ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAllClear > should compile $bitsAllClear with position array [0.05ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAnyClear > should compile $bitsAnyClear with bitmask [0.06ms]
(pass) compileQuery > Bitwise Operators (Compiled) > $bitsAnyClear > should compile $bitsAnyClear with position array [0.04ms]
(pass) compileQuery > Array Operators (Compiled) > $all > should compile $all operator [0.08ms]
(pass) compileQuery > Array Operators (Compiled) > $all > should compile $all with empty array (matches arrays) [0.06ms]
(pass) compileQuery > Array Operators (Compiled) > $all > should compile $all matching non-array field with single-element query array [0.19ms]
(pass) compileQuery > Array Operators (Compiled) > $all > should compile $all NOT matching non-array field with multi-element query array [0.04ms]
Error during query compilation: $all: $all requires an array value (value: "invalid") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $all: $all requires an array value (value: "invalid")
 operator: "$all",
    value: "invalid",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:866:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:839:16)

Error during query compilation: $all: $all requires an array value (value: null) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $all: $all requires an array value (value: null)
 operator: "$all",
    value: null,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:866:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:840:16)

(pass) compileQuery > Array Operators (Compiled) > $all > should return error for invalid $all arguments [0.16ms]
(pass) compileQuery > Array Operators (Compiled) > $size > should compile $size operator [0.10ms]
(pass) compileQuery > Array Operators (Compiled) > $size > should compile $size: 0 [0.03ms]
Error during query compilation: $size: $size requires a non-negative integer (value: -1) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $size: $size requires a non-negative integer (value: -1)
 operator: "$size",
    value: -1,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:892:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:867:16)

Error during query compilation: $size: $size requires a non-negative integer (value: 1.5) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $size: $size requires a non-negative integer (value: 1.5)
 operator: "$size",
    value: 1.5,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:892:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:868:16)

Error during query compilation: $size: $size requires a non-negative integer (value: "3") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $size: $size requires a non-negative integer (value: "3")
 operator: "$size",
    value: "3",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:892:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:869:16)

Error during query compilation: $size: $size requires a non-negative integer (value: null) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $size: $size requires a non-negative integer (value: null)
 operator: "$size",
    value: null,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:892:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:870:16)

(pass) compileQuery > Array Operators (Compiled) > $size > should return error for invalid $size arguments [0.21ms]
(pass) compileQuery > Array Operators (Compiled) > $elemMatch > should compile $elemMatch with simple condition [0.18ms]
(pass) compileQuery > Array Operators (Compiled) > $elemMatch > should compile $elemMatch with multiple conditions [0.18ms]
(pass) compileQuery > Array Operators (Compiled) > $elemMatch > should compile $elemMatch with nested operators [0.10ms]
(pass) compileQuery > Array Operators (Compiled) > $elemMatch > should return false if sub-query execution throws error [0.10ms]
Error during query compilation: $elemMatch: $elemMatch requires a query object (value: 123) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $elemMatch: $elemMatch requires a query object (value: 123)
 operator: "$elemMatch",
    value: 123,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:905:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:924:16)

Error during query compilation: $elemMatch: $elemMatch requires a query object (value: null) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $elemMatch: $elemMatch requires a query object (value: null)
 operator: "$elemMatch",
    value: null,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:905:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:925:16)

Error during query compilation: $elemMatch: $elemMatch requires a query object (value: [1,2]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $elemMatch: $elemMatch requires a query object (value: [1,2])
 operator: "$elemMatch",
    value: [
  1, 2
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:905:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:926:16)

(pass) compileQuery > Array Operators (Compiled) > $elemMatch > should return error for invalid $elemMatch arguments [0.25ms]
Error during query compilation: $and: $and requires an array (value: {"key":"value"}) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $and: $and requires an array (value: {"key":"value"})
 operator: "$and",
    value: {
  key: "value",
},

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:348:19)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:934:28)

(pass) compileQuery > Error Handling > should return error for invalid $and operand [0.19ms]
Error during query compilation: $or: $or requires an array (value: "value") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $or: $or requires an array (value: "value")
 operator: "$or",
    value: "value",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:359:19)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:941:28)

(pass) compileQuery > Error Handling > should return error for invalid $or operand [0.10ms]
Error during query compilation: $in: $in requires an array (value: "active") 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $in: $in requires an array (value: "active")
 operator: "$in",
    value: "active",

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:533:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:948:28)

(pass) compileQuery > Error Handling > should return error for invalid $in operand [0.10ms]
Error during query compilation: $unsupportedOp: Unsupported operator: $unsupportedOp (value: true) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $unsupportedOp: Unsupported operator: $unsupportedOp (value: true)
 operator: "$unsupportedOp",
    value: true,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:941:13)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/compile_query.test.ts:955:28)

(pass) compileQuery > Error Handling > should return error for unsupported operator [0.58ms]
(pass) compileQuery > should compile an empty query to match everything [0.17ms]
(pass) compileQuery > should handle primitive query as implicit $eq [0.12ms]
(pass) compileQuery > should handle array query as implicit $eq [0.07ms]

src/query/__tests__/operators.test.ts:
(pass) Logical Operators > $and > should return true when all conditions are true [2.78ms]
(pass) Logical Operators > $and > should return false when any condition is false [0.06ms]
(pass) Logical Operators > $and > should throw error for invalid input [0.09ms]
(pass) Logical Operators > $or > should return true when any condition is true [0.03ms]
(pass) Logical Operators > $or > should return false when all conditions are false [0.02ms]
(pass) Logical Operators > $not > should negate condition result [0.01ms]
(pass) Logical Operators > $nor > should return true when all conditions are false [0.03ms]
(pass) Logical Operators > $nor > should return false when any condition is true [0.06ms]
(pass) Element Operators > $exists > should return true when field exists [0.02ms]
(pass) Element Operators > $exists > should return false when field does not exist [0.02ms]
(pass) Element Operators > $exists > should throw error for invalid input [0.06ms]
(pass) Element Operators > $type > should correctly identify string type [0.18ms]
(pass) Element Operators > $type > should support multiple types [0.05ms]
(pass) Element Operators > $type > should throw error for invalid type [0.03ms]
(pass) Array Operators > $all > should return true when array contains all elements [0.11ms]
(pass) Array Operators > $all > should return false when array missing elements [0.02ms]
(pass) Array Operators > $all > should throw error for non-array input [0.03ms]
(pass) Array Operators > $elemMatch > should match array elements with condition [0.19ms]
(pass) Array Operators > $elemMatch > should not match when no elements satisfy condition [0.07ms]
(pass) Array Operators > $size > should match arrays of exact size [0.06ms]
(pass) Evaluation Operators > $mod > should correctly check modulo [0.06ms]
(pass) Evaluation Operators > $mod > should throw error for invalid input [0.04ms]
(pass) Evaluation Operators > $regex > should match pattern [0.05ms]
(pass) Evaluation Operators > $regex > should support options [0.03ms]
(pass) Evaluation Operators > $where > should evaluate function [0.04ms]
(pass) Bitwise Operators > $bitsAllSet > should check if all bits are set [0.02ms]
(pass) Bitwise Operators > $bitsAnySet > should check if any bits are set [0.01ms]
(pass) Text Search Operator > $text > should match text search [0.04ms]
(pass) Text Search Operator > $text > should respect case sensitivity [0.03ms]
(pass) Text Search Operator > $text > should throw error for invalid input [0.02ms]

src/query/__tests__/QueryEngine.test.ts:
(pass) QueryEngine > matches > should handle simple equality
(pass) QueryEngine > matches > should handle multiple conditions (implicit AND) [0.49ms]
(pass) QueryEngine > matches > should handle the $eq operator [0.06ms]
(pass) QueryEngine > matches > should handle the $ne operator [0.02ms]
(pass) QueryEngine > matches > should handle the $gt operator [0.01ms]
(pass) QueryEngine > matches > should handle the $gte operator [0.01ms]
(pass) QueryEngine > matches > should handle the $lt operator [0.01ms]
(pass) QueryEngine > matches > should handle the $lte operator [0.14ms]
(pass) QueryEngine > matches > should handle the $in operator [0.02ms]
(pass) QueryEngine > matches > should handle the $nin operator
(pass) QueryEngine > matches > should return false for unknown operators
(pass) QueryEngine > execute > should filter data based on a simple query [0.08ms]
(pass) QueryEngine > execute > should filter data based on a query with operators [0.05ms]
(pass) QueryEngine > execute > should return an empty array if no documents match

src/query/__tests__/element.test.ts:
(pass) Element Operators > ExistsOperator ($exists) > $exists: true > should evaluate to true for defined values (string, number, boolean, object, array, null) [0.06ms]
(pass) Element Operators > ExistsOperator ($exists) > $exists: true > should evaluate to false for undefined [0.02ms]
(pass) Element Operators > ExistsOperator ($exists) > $exists: false > should evaluate to false for defined values (string, number, boolean, object, array, null) [0.04ms]
(pass) Element Operators > ExistsOperator ($exists) > $exists: false > should evaluate to true for undefined
(pass) Element Operators > ExistsOperator ($exists) > should throw error if constructor value is not boolean [0.07ms]
(pass) Element Operators > TypeOperator ($type) > should match basic types using string alias [0.16ms]
(pass) Element Operators > TypeOperator ($type) > should not match incorrect basic types (string alias) [0.06ms]
(pass) Element Operators > TypeOperator ($type) > should match basic types using numeric alias [0.08ms]
(pass) Element Operators > TypeOperator ($type) > should match newly added types (objectId, binData, regex) [0.10ms]
(pass) Element Operators > TypeOperator ($type) > should match if type is in an array of types [0.05ms]
(pass) Element Operators > TypeOperator ($type) > should throw error for invalid constructor arguments [0.13ms]

src/query/__tests__/comparison.test.ts:
(pass) Comparison Utilities > deepCompare > should return true for identical primitive values [0.09ms]
(pass) Comparison Utilities > deepCompare > should return false for different primitive values [0.03ms]
(pass) Comparison Utilities > deepCompare > should return true for identical Date objects [0.06ms]
(pass) Comparison Utilities > deepCompare > should return false for different Date objects [0.08ms]
(pass) Comparison Utilities > deepCompare > should return true for identical arrays (shallow & nested) [0.07ms]
(pass) Comparison Utilities > deepCompare > should return false for arrays with different lengths [0.02ms]
(pass) Comparison Utilities > deepCompare > should return false for arrays with different elements [0.05ms]
(pass) Comparison Utilities > deepCompare > should return false when comparing array with non-array [0.02ms]
(pass) Comparison Utilities > deepCompare > should return false for different objects [0.06ms]
(pass) Comparison Utilities > deepCompare > should return true for identical objects (same reference)
(pass) Comparison Utilities > compareBSONValues > should return null if either argument is undefined [0.06ms]
(pass) Comparison Utilities > compareBSONValues > should return 0 for undefined vs undefined
(pass) Comparison Utilities > compareBSONValues > should return 0 for deeply equal values (primitives, dates, arrays) [0.03ms]
(pass) Comparison Utilities > compareBSONValues > should compare numbers correctly [0.07ms]
(pass) Comparison Utilities > compareBSONValues > should compare strings correctly [0.01ms]
(pass) Comparison Utilities > compareBSONValues > should compare dates correctly [0.04ms]
(pass) Comparison Utilities > compareBSONValues > should compare booleans correctly (false < true) [0.01ms]
(pass) Comparison Utilities > compareBSONValues > should compare arrays element-wise based on BSON order [0.08ms]
(pass) Comparison Utilities > compareBSONValues > should compare arrays by length if elements are equal [0.03ms]
(pass) Comparison Utilities > compareBSONValues > should compare different types based on BSON order [0.06ms]
(pass) Comparison Utilities > compareBSONValues > should return 0 for objects (considered equal for ordering) [0.02ms]
(pass) Comparison Operators > EqOperator ($eq) > should create an EqOperator instance [0.02ms]
(pass) Comparison Operators > EqOperator ($eq) > should evaluate to true for equal values [0.04ms]
(pass) Comparison Operators > EqOperator ($eq) > should evaluate to false for non-equal values [0.03ms]
(pass) Comparison Operators > EqOperator ($eq) > should evaluate to false for different types [0.03ms]
(pass) Comparison Operators > EqOperator ($eq) > should handle undefined correctly (matching MongoDB $eq behavior) [0.03ms]
(pass) Comparison Operators > NeOperator ($ne) > should create an NeOperator instance [0.05ms]
(pass) Comparison Operators > NeOperator ($ne) > should evaluate to false for equal values [0.05ms]
(pass) Comparison Operators > NeOperator ($ne) > should evaluate to true for non-equal values [0.04ms]
(pass) Comparison Operators > NeOperator ($ne) > should evaluate to true for different types [0.02ms]
(pass) Comparison Operators > NeOperator ($ne) > should handle undefined correctly (matching MongoDB $ne behavior) [0.03ms]
(pass) Comparison Operators > GtOperator ($gt) > should create a GtOperator instance [0.02ms]
(pass) Comparison Operators > GtOperator ($gt) > should evaluate to true when value > queryValue (same type) [0.03ms]
(pass) Comparison Operators > GtOperator ($gt) > should evaluate to false when value <= queryValue (same type) [0.04ms]
(pass) Comparison Operators > GtOperator ($gt) > should use BSON comparison order for different types [0.02ms]
(pass) Comparison Operators > GtOperator ($gt) > should evaluate to false if value is incomparable (null/undefined)
(pass) Comparison Operators > GtOperator ($gt) > should evaluate to false if queryValue is incomparable (undefined)
(pass) Comparison Operators > GteOperator ($gte) > should create a GteOperator instance [0.02ms]
(pass) Comparison Operators > GteOperator ($gte) > should evaluate to true when value >= queryValue (same type) [0.05ms]
(pass) Comparison Operators > GteOperator ($gte) > should evaluate to false when value < queryValue (same type) [0.03ms]
(pass) Comparison Operators > GteOperator ($gte) > should use BSON comparison order for different types (>=) [0.03ms]
(pass) Comparison Operators > GteOperator ($gte) > should evaluate to false if value is incomparable (null/undefined)
(pass) Comparison Operators > GteOperator ($gte) > should evaluate correctly if queryValue is incomparable (undefined) [0.02ms]
(pass) Comparison Operators > LtOperator ($lt) > should create an LtOperator instance [0.01ms]
(pass) Comparison Operators > LtOperator ($lt) > should evaluate to true when value < queryValue (same type) [0.04ms]
(pass) Comparison Operators > LtOperator ($lt) > should evaluate to false when value >= queryValue (same type) [0.04ms]
(pass) Comparison Operators > LtOperator ($lt) > should use BSON comparison order for different types (<) [0.03ms]
(pass) Comparison Operators > LtOperator ($lt) > should evaluate to false if value is incomparable (null/undefined)
(pass) Comparison Operators > LtOperator ($lt) > should evaluate to false if queryValue is incomparable (undefined) [0.01ms]
(pass) Comparison Operators > LteOperator ($lte) > should create an LteOperator instance [0.02ms]
(pass) Comparison Operators > LteOperator ($lte) > should evaluate to true when value <= queryValue (same type) [0.05ms]
(pass) Comparison Operators > LteOperator ($lte) > should evaluate to false when value > queryValue (same type) [0.04ms]
(pass) Comparison Operators > LteOperator ($lte) > should use BSON comparison order for different types (<=) [0.03ms]
(pass) Comparison Operators > LteOperator ($lte) > should evaluate to false if value is incomparable (null/undefined) [0.01ms]
(pass) Comparison Operators > LteOperator ($lte) > should evaluate correctly if queryValue is incomparable (undefined) [0.02ms]
(pass) Comparison Operators > InOperator ($in) > should create an InOperator instance
(pass) Comparison Operators > InOperator ($in) > should evaluate to true if value matches any element in the array (BSON comparison) [0.06ms]
(pass) Comparison Operators > InOperator ($in) > should evaluate to false if value matches no element in the array (BSON comparison) [0.06ms]
(pass) Comparison Operators > InOperator ($in) > should handle mixed types in array based on BSON comparison [0.03ms]
(pass) Comparison Operators > InOperator ($in) > should support RegExp elements in the query array [0.05ms]
(pass) Comparison Operators > InOperator ($in) > should evaluate to false if field value is undefined (unless undefined is in array) [0.02ms]
(pass) Comparison Operators > NinOperator ($nin) > should create a NinOperator instance [0.04ms]
(pass) Comparison Operators > NinOperator ($nin) > should evaluate to false if value matches any element in the array (BSON comparison) [0.07ms]
(pass) Comparison Operators > NinOperator ($nin) > should evaluate to true if value matches no element in the array (BSON comparison) [0.04ms]
(pass) Comparison Operators > NinOperator ($nin) > should handle mixed types in array based on BSON comparison [0.04ms]
(pass) Comparison Operators > NinOperator ($nin) > should support RegExp elements in the query array (negated) [0.04ms]
(pass) Comparison Operators > NinOperator ($nin) > should evaluate correctly if field value is undefined (consistent with MongoDB) [0.01ms]

src/query/__tests__/evaluation.test.ts:
(pass) Evaluation Operators > ModOperator ($mod) > should return true if value % divisor === remainder
(pass) Evaluation Operators > ModOperator ($mod) > should return false if value % divisor !== remainder [0.26ms]
(pass) Evaluation Operators > ModOperator ($mod) > should return false for non-numeric values [0.02ms]
(pass) Evaluation Operators > ModOperator ($mod) > should work with BigInt [0.04ms]
(pass) Evaluation Operators > ModOperator ($mod) > should throw error for invalid constructor arguments [0.10ms]
(pass) Evaluation Operators > RegexOperator ($regex) > should match string field using RegExp object [0.01ms]
(pass) Evaluation Operators > RegexOperator ($regex) > should match string field using string pattern (no flags)
(pass) Evaluation Operators > RegexOperator ($regex) > should match string field using object notation with options
(pass) Evaluation Operators > RegexOperator ($regex) > should match string field using object notation without options
(pass) Evaluation Operators > RegexOperator ($regex) > should return false for non-string field values (MongoDB behavior) [0.02ms]
(pass) Evaluation Operators > RegexOperator ($regex) > should throw error for invalid constructor arguments [0.28ms]
(pass) Evaluation Operators > WhereOperator ($where) > should evaluate function using document context ('this' and 'obj') [0.05ms]
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
(pass) Evaluation Operators > WhereOperator ($where) > should evaluate string expression using document context ('this' and 'obj') [0.07ms]
(pass) Evaluation Operators > WhereOperator ($where) > should return false if context is not a valid object [0.02ms]
Error executing $where function: Test fail {
  a: 1,
}
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
Error executing $where function: undefined is not an object (evaluating 'obj.nonExistent.property') {
  a: 1,
}
(pass) Evaluation Operators > WhereOperator ($where) > should return false if function/expression throws an error [0.08ms]
(pass) Evaluation Operators > WhereOperator ($where) > should throw error for invalid constructor argument types [0.06ms]
Using string-based $where is a potential security risk and may impact performance. Ensure the code is trusted.
(pass) Evaluation Operators > WhereOperator ($where) > should throw error for invalid string expression syntax [0.06ms]

src/query/__tests__/array.test.ts:
(pass) Array Operators > AllOperator ($all) > should return true if array contains all specified values (BSON comparison) [1.03ms]
(pass) Array Operators > AllOperator ($all) > should return false if array does not contain all specified values (BSON comparison) [0.05ms]
(pass) Array Operators > AllOperator ($all) > should handle non-array field values according to MongoDB behavior [0.04ms]
(pass) Array Operators > AllOperator ($all) > should handle empty query array (matches any array, including empty)
(pass) Array Operators > AllOperator ($all) > should throw error if constructor argument is not an array [0.04ms]
(pass) Array Operators > ElemMatchOperator ($elemMatch) > should return true if at least one element matches the condition [0.27ms]
(pass) Array Operators > ElemMatchOperator ($elemMatch) > should return true if multiple elements match the condition [0.03ms]
(pass) Array Operators > ElemMatchOperator ($elemMatch) > should return false if no element matches the condition [0.05ms]
(pass) Array Operators > ElemMatchOperator ($elemMatch) > should return false if the target field is not an array [0.05ms]
(pass) Array Operators > ElemMatchOperator ($elemMatch) > should return false for an empty array [0.04ms]
Error during query compilation: $elemMatch: $elemMatch requires a query object (value: 123) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $elemMatch: $elemMatch requires a query object (value: 123)
 operator: "$elemMatch",
    value: 123,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:905:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/array.test.ts:149:37)

Error during query compilation: $elemMatch: $elemMatch requires a query object (value: null) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $elemMatch: $elemMatch requires a query object (value: null)
 operator: "$elemMatch",
    value: null,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:905:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/array.test.ts:153:30)

Error during query compilation: $elemMatch: $elemMatch requires a query object (value: [1,2]) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $elemMatch: $elemMatch requires a query object (value: [1,2])
 operator: "$elemMatch",
    value: [
  1, 2
],

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:905:15)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/array.test.ts:157:31)

Error during query compilation: $invalidOp: Unsupported operator: $invalidOp (value: 1) 53 |         )
54 |       } catch (e) {
55 |         valueString = String(value) // Fallback to simple string conversion
56 |       }
57 |     }
58 |     super(
         ^
QueryOperatorError: $invalidOp: Unsupported operator: $invalidOp (value: 1)
 operator: "$invalidOp",
    value: 1,

      at new QueryOperatorError (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/types.ts:58:5)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:941:13)
      at compileOperator (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:914:28)
      at map (1:11)
      at buildCodeRecursive (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:416:32)
      at compileQuery (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/compile_query.ts:79:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/query/__tests__/array.test.ts:168:35)

(pass) Array Operators > ElemMatchOperator ($elemMatch) > should return error during compilation for invalid $elemMatch condition [0.38ms]
(pass) Array Operators > ElemMatchOperator ($elemMatch) > should handle errors within the sub-query execution gracefully [0.11ms]
(pass) Array Operators > SizeOperator ($size) > should return true if array length matches the specified size [0.03ms]
(pass) Array Operators > SizeOperator ($size) > should return false if array length does not match the specified size [0.02ms]
(pass) Array Operators > SizeOperator ($size) > should return false for non-array field values [0.02ms]
(pass) Array Operators > SizeOperator ($size) > should throw error for invalid constructor arguments [0.07ms]

src/client/offline/day1-summary.test.ts:
âœ… All main classes exported successfully
(pass) Phase 5.3 Day 1: Core Offline Infrastructure - Summary > should have all required exports [0.79ms]
âœ… Basic operations completed in 0.01ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure - Summary > should meet performance requirements [0.08ms]
âœ… Core Offline Infrastructure
âœ… OfflineManager Implementation
âœ… LocalDataCache Implementation
âœ… StorageOptimizer Implementation
âœ… TypeScript Interfaces
âœ… Performance Requirements
âœ… Event System
âœ… Configuration Management
âœ… Network Detection
âœ… Storage Optimization

ðŸ“Š Day 1 Completion: 10/10 (100%)
(pass) Phase 5.3 Day 1: Core Offline Infrastructure - Summary > should validate Day 1 requirements checklist [0.11ms]

ðŸŽ‰ Phase 5.3 Day 1 Achievements:

ðŸ“ Core Infrastructure:
  âœ… OfflineManager: Central offline mode management with event system
  âœ… LocalDataCache: IndexedDB-based caching with compression support
  âœ… StorageOptimizer: Multiple optimization strategies (LRU, size-based, etc.)

ðŸ“ Performance:
  âœ… Cache Operations: <10ms target achieved
  âœ… Initialization: <100ms target achieved
  âœ… Memory Efficiency: Optimized data structures and cleanup

ðŸ“ Features:
  âœ… Network Detection: Automatic online/offline detection
  âœ… Event System: Comprehensive event handling
  âœ… Configuration: Flexible configuration management
  âœ… Storage Management: Automatic cleanup and optimization
(pass) Phase 5.3 Day 1: Core Offline Infrastructure - Summary > should document Day 1 achievements [0.09ms]

ðŸ”® Day 2 Plan: Conflict Resolution System
  ðŸ“‹ Conflict Detection: Implement conflict detection algorithms
  ðŸ“‹ Resolution Strategies: Client-wins, server-wins, manual, timestamp-based
  ðŸ“‹ Custom Resolvers: Support for user-defined resolution logic
  ðŸ“‹ Conflict Storage: Persistent conflict tracking
  ðŸ“‹ Resolution UI: User interface for manual conflict resolution
(pass) Phase 5.3 Day 1: Core Offline Infrastructure - Summary > should prepare for Day 2: Conflict Resolution System [0.04ms]

tests/browser-sdk/storage/BrowserStorageManager.test.ts:
20 |   });
21 | 
22 |   describe('Initialization', () => {
23 |     test('should initialize with default configuration', async () => {
24 |       // Mock IndexedDB as available for initialization
25 |       globalThis.indexedDB.open = mock(() => Promise.resolve({
                      ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.resolve({
        result: {
          createObjectStore: mock(),
          transaction: mock(),
          close: mock()
        }
      }))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:25:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:23:58)
(fail) BrowserStorageManager > Initialization > should initialize with default configuration [0.78ms]
35 |       expect(storageManager.getActiveStorageType()).toBeDefined();
36 |     });
37 | 
38 |     test('should select IndexedDB as primary storage when available', async () => {
39 |       // Mock IndexedDB as available
40 |       globalThis.indexedDB.open = mock(() => Promise.resolve({
                      ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.resolve({
        result: {
          createObjectStore: mock(),
          transaction: mock(),
          close: mock()
        }
      }))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:40:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:38:71)
(fail) BrowserStorageManager > Initialization > should select IndexedDB as primary storage when available [0.09ms]
51 |       expect(storageType).toBe(StorageType.IndexedDB);
52 |     });
53 | 
54 |     test('should fallback to localStorage when IndexedDB fails', async () => {
55 |       // Mock IndexedDB failure
56 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('IndexedDB not available')));
                      ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("IndexedDB not available")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:56:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:54:66)
(fail) BrowserStorageManager > Initialization > should fallback to localStorage when IndexedDB fails [0.06ms]
65 |       expect(storageType).toBe(StorageType.LocalStorage);
66 |     });
67 | 
68 |     test('should fallback to memory storage when all persistent storage fails', async () => {
69 |       // Mock all storage failures
70 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('IndexedDB not available')));
                      ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("IndexedDB not available")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:70:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:68:81)
(fail) BrowserStorageManager > Initialization > should fallback to memory storage when all persistent storage fails [0.05ms]
78 |       expect(storageType).toBe(StorageType.Memory);
79 |     });
80 | 
81 |     test('should throw error if no storage strategy can be initialized', async () => {
82 |       // Mock all storage types as unavailable
83 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('IndexedDB not available')));
                      ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("IndexedDB not available")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:83:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:81:74)
(fail) BrowserStorageManager > Initialization > should throw error if no storage strategy can be initialized [0.12ms]
 96 |   });
 97 | 
 98 |   describe('CRUD Operations', () => {
 99 |     beforeEach(async () => {
100 |       // Initialize with memory storage for predictable testing
101 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('Force memory storage')));
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("Force memory storage")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:101:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:99:16)
(fail) BrowserStorageManager > CRUD Operations > should store and retrieve data [1840463444.21ms]
(fail) BrowserStorageManager > CRUD Operations > should store and retrieve data
 96 |   });
 97 | 
 98 |   describe('CRUD Operations', () => {
 99 |     beforeEach(async () => {
100 |       // Initialize with memory storage for predictable testing
101 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('Force memory storage')));
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("Force memory storage")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:101:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:99:16)
(fail) BrowserStorageManager > CRUD Operations > should handle multiple data types [1840463444.26ms]
(fail) BrowserStorageManager > CRUD Operations > should handle multiple data types
 96 |   });
 97 | 
 98 |   describe('CRUD Operations', () => {
 99 |     beforeEach(async () => {
100 |       // Initialize with memory storage for predictable testing
101 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('Force memory storage')));
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("Force memory storage")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:101:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:99:16)
(fail) BrowserStorageManager > CRUD Operations > should return null for non-existent keys [1840463444.26ms]
(fail) BrowserStorageManager > CRUD Operations > should return null for non-existent keys
 96 |   });
 97 | 
 98 |   describe('CRUD Operations', () => {
 99 |     beforeEach(async () => {
100 |       // Initialize with memory storage for predictable testing
101 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('Force memory storage')));
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("Force memory storage")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:101:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:99:16)
(fail) BrowserStorageManager > CRUD Operations > should delete items correctly [1840463444.26ms]
(fail) BrowserStorageManager > CRUD Operations > should delete items correctly
 96 |   });
 97 | 
 98 |   describe('CRUD Operations', () => {
 99 |     beforeEach(async () => {
100 |       // Initialize with memory storage for predictable testing
101 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('Force memory storage')));
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("Force memory storage")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:101:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:99:16)
(fail) BrowserStorageManager > CRUD Operations > should clear all data [1840463444.26ms]
(fail) BrowserStorageManager >  |  lear all data
177 |   });
178 | 
179 |   describe('Storage Type Detection', () => {
180 |     test('should check storage availability correctly', async () => {
181 |       // Mock IndexedDB as available
182 |       globalThis.indexedDB.open = mock(() => Promise.resolve({
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.resolve({
        result: { close: mock() }
      }))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:182:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:180:57)
(fail) BrowserStorageManager > Storage Type Detection > should check storage availability correctly [0.17ms]
197 |       expect(isMemoryAvailable).toBe(true);
198 |     });
199 | 
200 |     test('should return correct active storage type', async () => {
201 |       // Initialize with memory storage
202 |       globalThis.indexedDB.open = mock(() => Promise.reject(new Error('IndexedDB not available')));
                       ^
TypeError: undefined is not an object (evaluating 'globalThis.indexedDB.open = mock(() => Promise.reject(new Error("IndexedDB not available")))')
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:202:18)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:200:55)
(fail) BrowserStorageManager > Storage Type Detection > should return correct active storage type [0.06ms]
117 |       };
118 |     });
119 |   }
120 | 
121 |   async isAvailable(): Promise<boolean> {
122 |     if (!('indexedDB' in window)) {
                               ^
ReferenceError: window is not defined
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:122:26)
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:121:41)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:37:55)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:34:30)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:23:64)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:22:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:215:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:214:16)
(fail) BrowserStorageManager > Quota Management > should get quota information when available [1840463445.01ms]
(fail) BrowserStorageManager > Quota Management > should get quota information when available
117 |       };
118 |     });
119 |   }
120 | 
121 |   async isAvailable(): Promise<boolean> {
122 |     if (!('indexedDB' in window)) {
                               ^
ReferenceError: window is not defined
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:122:26)
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:121:41)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:37:55)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:34:30)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:23:64)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:22:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:215:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:214:16)
(fail) BrowserStorageManager > Quota Management > should handle quota estimation errors gracefully [1840463445.09ms]
(fail) BrowserStorageManager > Quota Management > should handle quota estimation errors gracefully
117 |       };
118 |     });
119 |   }
120 | 
121 |   async isAvailable(): Promise<boolean> {
122 |     if (!('indexedDB' in window)) {
                               ^
ReferenceError: window is not defined
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:122:26)
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:121:41)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:37:55)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:34:30)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:23:64)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:22:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:215:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:214:16)
(fail) BrowserStorageManager > Quota Management > should return null when storage estimation is not available [1840463445.12ms]
(fail) BrowserStorageManager >         eturn null when storage estimation is not available
117 |       };
118 |     });
119 |   }
120 | 
121 |   async isAvailable(): Promise<boolean> {
122 |     if (!('indexedDB' in window)) {
                               ^
ReferenceError: window is not defined
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:122:26)
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:121:41)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:37:55)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:34:30)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:23:64)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:22:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:270:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:269:57)
(fail) BrowserStorageManager > Performance Benchmarks > should perform write operations efficiently [0.06ms]
117 |       };
118 |     });
119 |   }
120 | 
121 |   async isAvailable(): Promise<boolean> {
122 |     if (!('indexedDB' in window)) {
                               ^
ReferenceError: window is not defined
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:122:26)
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:121:41)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:37:55)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:34:30)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:23:64)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:22:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:280:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:279:56)
(fail) BrowserStorageManager > Performance Benchmarks > should perform read operations efficiently [0.06ms]
117 |       };
118 |     });
119 |   }
120 | 
121 |   async isAvailable(): Promise<boolean> {
122 |     if (!('indexedDB' in window)) {
                               ^
ReferenceError: window is not defined
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:122:26)
      at isAvailable (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/adapters/IndexedDBStorage.ts:121:41)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:37:55)
      at selectOptimalStorage (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/StorageSelectionAlgorithm.ts:34:30)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:23:64)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/browser-sdk/storage/BrowserStorageManager.ts:22:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:291:28)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/storage/BrowserStorageManager.test.ts:290:58)
(fail) BrowserStorageManager > Performance Benchmarks > should perform delete operations efficiently [0.06ms]

tests/browser-sdk/sync/OfflineSyncEngine.test.ts:
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Network State Changes > should process queue when online event fires and engine is online [1840463457.34ms]
(fail) OfflineSyncEngine > Network State Changes > should process queue when online event fires and engine is online
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Network State Changes > should not process queue when offline event fires [1840463457.54ms]
(fail) OfflineSyncEngine > Network State Changes > should not process queue when offline event fires
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Network State Changes > should notify registered network handlers on state change [1840463457.59ms]
(fail) OfflineSyncEngine > €›|  otify registered network handlers on state change
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Enqueue Operations > should add operation to queue [1840463457.62ms]
(fail) OfflineSyncEngine > Enqueue Operations > should add operation to queue
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Enqueue Operations > should process queue immediately if online [1840463457.63ms]
(fail) OfflineSyncEngine > Enqueue Operations > should process queue immediately if online
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Enqueue Operations > should not process queue immediately if offline [1840463457.65ms]
(fail) OfflineSyncEngine >  y|  ot process queue immediately if offline
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Process Queue > should process all operations in the queue when online [1840463457.68ms]
(fail) OfflineSyncEngine > Process Queue > should process all operations in the queue when online
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Process Queue > should handle simulated remote sync failures [1840463457.70ms]
(fail) OfflineSyncEngine > Process Queue > should handle simulated remote sync failures
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Process Queue > should handle simulated conflicts and resolve them [1840463457.73ms]
(fail) OfflineSyncEngine > Process Queue > should handle simulated conflicts and resolve them
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Process Queue > should handle failed conflict resolution [1840463457.74ms]
(fail) OfflineSyncEngine >  x|  andle failed conflict resolution
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Change Tracking > should track changes for a collection [1840463457.76ms]
(fail) OfflineSyncEngine > Change Tracking > should track changes for a collection
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Change Tracking > should retrieve changes since a specific timestamp [1840463457.79ms]
(fail) OfflineSyncEngine > Change Tracking > should retrieve changes since a specific timestamp
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Change Tracking > should return empty array if no changes for collection [1840463457.81ms]
(fail) OfflineSyncEngine > €3›|  eturn empty array if no changes for collection
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Network Status > isOnline should return navigator.onLine if available [1840463457.83ms]
(fail) OfflineSyncEngine > Network Status > isOnline should return navigator.onLine if available
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Network Status > isOnline should return true if navigator is not available (Node.js env) [1840463457.85ms]
(fail) OfflineSyncEngine > åU|   should return true if navigator is not available (Node.js env)
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > Network State Change Handlers > should register and unregister network handlers [1840463457.87ms]
(fail) OfflineSyncEngine > €k|  egister and unregister network handlers
21 |     mockBrowserStorageManager.write = mock(() => Promise.resolve());
22 |     mockBrowserStorageManager.read = mock(() => Promise.resolve(null));
23 |     mockBrowserStorageManager.delete = mock(() => Promise.resolve());
24 |     mockBrowserStorageManager.clear = mock(() => Promise.resolve());
25 | 
26 |     addEventListenerSpy = mock.spyOn(globalThis.window, 'addEventListener');
                                    ^
TypeError: mock.spyOn is not a function. (In 'mock.spyOn(globalThis.window, "addEventListener")', 'mock.spyOn' is undefined)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/sync/OfflineSyncEngine.test.ts:26:32)
(fail) OfflineSyncEngine > should initialize and setup network listeners [1840463457.89ms]
(fail) px|  nitialize and setup network listeners

src/collection/__test__/performance/IndexManager.performance.test.ts:
1000 inserts took 163.63ms (0.16ms per insert)
(pass) IndexManager Performance Tests > Insert Performance > should handle 1000 inserts efficiently [163.95ms]
10000 inserts took 148.66ms (0.01ms per insert)
(pass) IndexManager Performance Tests > Insert Performance > should handle 10000 inserts efficiently [148.93ms]
100 unique index finds took 0.34ms (0.00ms per find)
(pass) IndexManager Performance Tests > Find Performance > should find documents quickly in unique index [0.53ms]
100 non-unique index finds took 0.22ms (0.00ms per find)
(pass) IndexManager Performance Tests > Find Performance > should find documents quickly in non-unique index [0.28ms]
4 range queries took 1.39ms (0.35ms per query)
(pass) IndexManager Performance Tests > Range Query Performance > should perform range queries efficiently [1.16ms]
10 transactions (100 operations total) took 3.80ms (0.04ms per operation)
(pass) IndexManager Performance Tests > Transaction Performance > should handle transactional operations efficiently [3.97ms]
Memory increase: 0.00MB
(pass) IndexManager Performance Tests > Memory Usage > should not leak memory during large operations [8.02ms]
100 concurrent operations took 1.37ms
(pass) IndexManager Performance Tests > Concurrent Operations > should handle concurrent operations without corruption [1.62ms]

src/config/database/__test__/DatabaseInheritanceManager.test.ts:
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
(pass) DatabaseInheritanceManager > Initialization > should initialize with default configuration [0.16ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
(pass) DatabaseInheritanceManager > Initialization > should initialize with custom configuration [0.05ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Database Configuration Management > should set and get database configuration [0.08ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Database Configuration Management > should return null for non-existent database [0.02ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Database Configuration Management > should get all database configurations [0.08ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Database Configuration Management > should validate database configuration [0.06ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Collection Override Management > should add collection override [0.02ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Collection Override Management > should remove collection override [0.07ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Collection Override Management > should get all collection overrides for database [0.07ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Collection Override Management > should reject override for non-existent database [0.03ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Configuration Resolution > should resolve database-level configuration [0.31ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Configuration Resolution > should resolve collection-level configuration with overrides [0.09ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Configuration Resolution > should get specific configuration value [0.07ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Configuration Resolution > should return undefined for non-existent config path [0.04ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Inheritance Rules > should add custom inheritance rule [0.06ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Inheritance Rules > should remove inheritance rule [0.05ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Inheritance Rules > should apply inheritance rules during resolution [0.10ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Validation > should validate inheritance successfully [0.16ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Validation > should detect validation errors [0.08ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Statistics and Monitoring > should provide accurate statistics [0.07ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Statistics and Monitoring > should track cache usage [0.10ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Event System > should emit events for configuration changes [0.06ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Event System > should allow unsubscribing from events [0.06ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Import/Export > should export configurations [0.01ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
(pass) DatabaseInheritanceManager > Import/Export > should import configurations [0.22ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
(pass) DatabaseInheritanceManager > Import/Export > should merge configurations during import [0.08ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Bulk Operations > should bulk update database configurations [0.10ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Bulk Operations > should bulk update collection overrides [0.11ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Configuration Hierarchy > should provide configuration hierarchy for debugging [0.08ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Cache Management > should clear resolution cache [0.04ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
(pass) DatabaseInheritanceManager > Cache Management > should refresh all configurations [0.09ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Starting DatabaseInheritanceManager
Component database-inheritance-manager started successfully
Stopping DatabaseInheritanceManager
Component database-inheritance-manager stopped successfully
(pass) DatabaseInheritanceManager > Health Monitoring > should report healthy status with databases configured [0.33ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed
Initializing DatabaseInheritanceManager
DatabaseInheritanceManager initialized successfully
Component database-inheritance-manager initialized successfully
Starting DatabaseInheritanceManager
Component database-inheritance-manager started successfully
Stopping DatabaseInheritanceManager
Component database-inheritance-manager stopped successfully
(pass) DatabaseInheritanceManager > Health Monitoring > should report warning status with no databases [0.09ms]
Cleaning up DatabaseInheritanceManager
Component database-inheritance-manager cleanup completed

src/config/features/__test__/FeatureToggleManager.test.ts:
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Cache cleared
Component feature-toggle-manager cleanup completed
(pass) FeatureToggleManager > Initialization > should initialize with default configuration [0.13ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Initializing FeatureToggleManager
Cache cleared for feature test-feature
Feature test-feature configuration updated
FeatureToggleManager initialized with 1 features
Component feature-toggle-manager initialized successfully
Cache cleared
Component feature-toggle-manager cleanup completed
(pass) FeatureToggleManager > Initialization > should load features from configuration [0.36ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
(pass) FeatureToggleManager > Feature Management > should create and manage features [0.11ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
(pass) FeatureToggleManager > Feature Management > should prevent duplicate feature creation [0.07ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
Cache cleared for feature test-feature
Feature test-feature configuration updated
Cache cleared for feature test-feature
Feature test-feature configuration updated
(pass) FeatureToggleManager > Feature Management > should enable and disable features [0.22ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
Cache cleared for feature test-feature
Feature test-feature configuration updated
Cache cleared for feature test-feature
Feature test-feature configuration updated
(pass) FeatureToggleManager > Feature Management > should toggle feature state [0.09ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
Cache cleared for feature test-feature
Feature test-feature removed
(pass) FeatureToggleManager > Feature Management > should remove features [0.10ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature feature1
Feature feature1 configuration updated
Feature feature1 created
Cache cleared for feature feature2
Feature feature2 configuration updated
Feature feature2 created
Cache cleared for feature feature3
Feature feature3 configuration updated
Feature feature3 created
Cache cleared for feature feature1
Feature feature1 configuration updated
Cache cleared for feature feature2
Feature feature2 configuration updated
Cache cleared for feature feature3
Feature feature3 configuration updated
Cache cleared for feature feature1
Feature feature1 configuration updated
Cache cleared for feature feature2
Feature feature2 configuration updated
Cache cleared for feature feature3
Feature feature3 configuration updated
(pass) FeatureToggleManager > Feature Management > should handle bulk operations [0.26ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature percentage-feature
Feature percentage-feature configuration updated
Feature percentage-feature created
(pass) FeatureToggleManager > Feature Conditions > should evaluate percentage rollout [0.21ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature group-feature
Feature group-feature configuration updated
Feature group-feature created
(pass) FeatureToggleManager > Feature Conditions > should evaluate user groups [0.11ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature time-feature
Feature time-feature configuration updated
Feature time-feature created
(pass) FeatureToggleManager > Feature Conditions > should evaluate time windows [0.15ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature env-feature
Feature env-feature configuration updated
Feature env-feature created
(pass) FeatureToggleManager > Feature Conditions > should evaluate environment restrictions [0.05ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature dependency-feature
Feature dependency-feature configuration updated
Feature dependency-feature created
Cache cleared for feature dependent-feature
Feature dependent-feature configuration updated
Feature dependent-feature created
Cache cleared for feature dependency-feature
Feature dependency-feature configuration updated
Cache cleared for feature dependent-feature
(pass) FeatureToggleManager > Feature Conditions > should evaluate feature dependencies [0.07ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
(pass) FeatureToggleManager > Feature Evaluation > should provide detailed evaluation results [0.07ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
(pass) FeatureToggleManager > Feature Evaluation > should handle non-existent features [0.02ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature enabled-feature
Feature enabled-feature configuration updated
Feature enabled-feature created
Cache cleared for feature disabled-feature
Feature disabled-feature configuration updated
Feature disabled-feature created
(pass) FeatureToggleManager > Statistics > should track feature statistics [0.06ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
(pass) FeatureToggleManager > Statistics > should track evaluation count [0.06ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
Cache cleared for feature test-feature
Feature test-feature configuration updated
Cache cleared for feature test-feature
Feature test-feature configuration updated
(pass) FeatureToggleManager > Event System > should emit feature change events [0.15ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
Cache cleared for feature test-feature
Feature test-feature configuration updated
Cache cleared for feature test-feature
Feature test-feature configuration updated
(pass) FeatureToggleManager > Event System > should allow unsubscribing from events [0.10ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature feature1
Feature feature1 configuration updated
Feature feature1 created
Cache cleared for feature feature2
Feature feature2 configuration updated
Feature feature2 created
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Cache cleared for feature feature1
Feature feature1 configuration updated
Cache cleared for feature feature2
Feature feature2 configuration updated
Bulk updated 2 features
Imported 2 features (merge: true)
Cache cleared
Component feature-toggle-manager cleanup completed
(pass) FeatureToggleManager > Configuration Management > should export and import configuration [0.37ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature feature1
Feature feature1 configuration updated
Cache cleared for feature feature2
Feature feature2 configuration updated
Cache cleared for feature feature3
Feature feature3 configuration updated
Bulk updated 3 features
(pass) FeatureToggleManager > Configuration Management > should handle bulk updates [0.09ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
(pass) FeatureToggleManager > Health Monitoring > should report healthy status with features [0.09ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
(pass) FeatureToggleManager > Health Monitoring > should report warning status with no features [0.04ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature test-feature
Feature test-feature configuration updated
Feature test-feature created
(pass) FeatureToggleManager > Cache Management > should cache evaluation results [0.05ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature feature1
Feature feature1 configuration updated
Feature feature1 created
Cache cleared for feature feature2
Feature feature2 configuration updated
Feature feature2 created
Cache cleared for feature feature1
(pass) FeatureToggleManager > Cache Management > should clear cache for specific features [0.05ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Cache cleared for feature feature1
Feature feature1 configuration updated
Feature feature1 created
Cache cleared for feature feature2
Feature feature2 configuration updated
Feature feature2 created
Cache cleared
(pass) FeatureToggleManager > Cache Management > should clear all cache [0.04ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed
Initializing FeatureToggleManager
FeatureToggleManager initialized with 0 features
Component feature-toggle-manager initialized successfully
Starting FeatureToggleManager
FeatureToggleManager started successfully
Component feature-toggle-manager started successfully
Updating FeatureToggleManager configuration
Cache cleared for feature initial-feature
Feature initial-feature configuration updated
FeatureToggleManager configuration updated successfully
Component feature-toggle-manager configuration updated successfully
Updating FeatureToggleManager configuration
Cache cleared for feature initial-feature
Feature initial-feature configuration updated
Cache cleared for feature new-feature
Feature new-feature configuration updated
Cache cleared
FeatureToggleManager configuration updated successfully
Component feature-toggle-manager configuration updated successfully
(pass) FeatureToggleManager > Configuration Updates > should handle configuration updates [0.20ms]
Stopping FeatureToggleManager
Cache cleared
FeatureToggleManager stopped successfully
Component feature-toggle-manager stopped successfully
Cache cleared
Component feature-toggle-manager cleanup completed

src/config/conflicts/__test__/ConflictResolutionManager.test.ts:
Component ConflictResolutionManager initialized successfully
Component ConflictResolutionManager initialized successfully
Component ConflictResolutionManager is not running, skipping stop
(pass) ConflictResolutionManager > Lifecycle Management > should initialize with default configuration [0.23ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
Component ConflictResolutionManager started successfully
Component ConflictResolutionManager stopped successfully
(pass) ConflictResolutionManager > Lifecycle Management > should start and stop successfully [0.11ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Lifecycle Management > should report healthy status with no conflicts [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Lifecycle Management > should update configuration [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Detection > should detect value conflicts between configurations [0.22ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Detection > should detect type conflicts between configurations [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Detection > should detect conflicts in specific path [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Detection > should validate configuration against existing conflicts [0.07ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Detection > should scan for existing conflicts [0.04ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Management > should get conflict by ID [0.01ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Management > should get all conflicts [0.02ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Management > should get conflicts by type [0.03ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Management > should get conflicts by severity [0.02ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Management > should remove specific conflict [0.03ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Management > should clear all conflicts [0.03ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Rules Management > should add resolution rule [0.06ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Rules Management > should update resolution rule [0.04ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Rules Management > should remove resolution rule [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Rules Management > should get all resolution rules [0.03ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Rules Management > should enable and disable resolution rules [0.09ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Rules Management > should validate resolution rule [0.07ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Resolution > should resolve conflict with merge strategy [1.43ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Resolution > should resolve conflict with override strategy [1.17ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Resolution > should resolve multiple conflicts [3.89ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Resolution > should resolve all conflicts [4.09ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Conflict Resolution > should auto-resolve conflicts [1.28ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Strategies > should merge configurations deeply [0.18ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Strategies > should merge configurations shallowly [0.04ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Strategies > should select configuration by priority [0.10ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Resolution Strategies > should prompt user for resolution [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Statistics and Monitoring > should track statistics [1.45ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Statistics and Monitoring > should reset statistics [0.06ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Statistics and Monitoring > should export statistics [0.07ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Event System > should emit conflict detected event [0.06ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Event System > should emit conflict resolved event [1.23ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Utility Methods > should compare configurations [0.02ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Utility Methods > should generate conflict report [0.23ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Utility Methods > should simulate resolution [0.13ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Bulk Operations > should add multiple resolution rules [0.05ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Bulk Operations > should update multiple resolution rules [0.06ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Bulk Operations > should remove multiple resolution rules [0.13ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Import/Export > should export configuration [0.13ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Import/Export > should import configuration [0.14ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Import/Export > should export conflict history [0.08ms]
Component ConflictResolutionManager is not running, skipping stop
Component ConflictResolutionManager initialized successfully
(pass) ConflictResolutionManager > Import/Export > should import conflict history [0.06ms]
Component ConflictResolutionManager is not running, skipping stop

src/config/adapters/__test__/AdapterFactoryManager.test.ts:
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 10ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
(pass) AdapterFactoryManager > Initialization > should initialize successfully with valid configuration [22.22ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Built-in adapter types would be registered here
Failed to create adapter 'adapter1': Failed to create adapter 'adapter1': Adapter type 'mock' is not registered
(pass) AdapterFactoryManager > Initialization > should fail initialization with unregistered adapter type [0.22ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Built-in adapter types would be registered here
AdapterFactoryManager initialized with 0 adapters
Component test-factory initialized successfully
(pass) AdapterFactoryManager > Initialization > should handle empty adapter configuration [0.09ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
(pass) AdapterFactoryManager > Adapter Type Registration > should register adapter types successfully [0.04ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
(pass) AdapterFactoryManager > Adapter Type Registration > should prevent duplicate adapter type registration [0.11ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Adapter type 'mock' unregistered successfully
(pass) AdapterFactoryManager > Adapter Type Registration > should unregister adapter types when no instances exist [0.12ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
(pass) AdapterFactoryManager > Adapter Type Registration > should prevent unregistering adapter types with active instances [21.99ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 21ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
(pass) AdapterFactoryManager > Adapter Lifecycle > should start all adapters successfully [21.97ms]
All adapters stopped in 22ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 10ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 22ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
All adapters stopped in 21ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
(pass) AdapterFactoryManager > Adapter Lifecycle > should stop all adapters successfully [43.39ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 10ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 22ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
(pass) AdapterFactoryManager > Adapter Lifecycle > should start adapters in priority order [22.08ms]
All adapters stopped in 22ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 10ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
Adapter 'adapter3' of type 'mock' created successfully in 11ms
(pass) AdapterFactoryManager > Adapter Management > should create new adapters [11.36ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
(pass) AdapterFactoryManager > Adapter Management > should get adapters by type [0.13ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 21ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
Adapter 'adapter1' restarted successfully
(pass) AdapterFactoryManager > Adapter Management > should restart specific adapters [43.00ms]
All adapters stopped in 22ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
Adapter 'adapter1' removed successfully
(pass) AdapterFactoryManager > Adapter Management > should remove adapters [6.84ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 10ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
Adapter 'adapter1' configuration updated successfully
(pass) AdapterFactoryManager > Adapter Management > should update adapter configuration [6.03ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 12ms
Adapter 'adapter2' of type 'mock' created successfully in 10ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 21ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
(pass) AdapterFactoryManager > Health Monitoring > should get health status of specific adapter [0.21ms]
All adapters stopped in 22ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 10ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 22ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
(pass) AdapterFactoryManager > Health Monitoring > should get health status of all adapters [0.41ms]
All adapters stopped in 22ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 12ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
All adapters started successfully in 22ms
AdapterFactoryManager started with 2 adapters
Component test-factory started successfully
(pass) AdapterFactoryManager > Health Monitoring > should report overall factory health [0.32ms]
All adapters stopped in 21ms
AdapterFactoryManager stopped
Component test-factory stopped successfully
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'failing' registered successfully
Built-in adapter types would be registered here
Adapter 'failing-adapter' of type 'failing' created successfully in 11ms
AdapterFactoryManager initialized with 1 adapters
Component test-factory initialized successfully
(pass) AdapterFactoryManager > Error Handling > should handle adapter start failures [11.54ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
(pass) AdapterFactoryManager > Error Handling > should handle missing adapter operations gracefully [0.23ms]
All adapters stopped in 1ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 10ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
(pass) AdapterFactoryManager > Statistics > should track factory statistics [0.13ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 11ms
Adapter 'adapter2' of type 'mock' created successfully in 11ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
Adapter 'adapter3' of type 'mock' created successfully in 11ms
Adapter 'adapter3' removed successfully
(pass) AdapterFactoryManager > Statistics > should update statistics after operations [17.26ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed
Adapter type 'mock' registered successfully
Built-in adapter types would be registered here
Adapter 'adapter1' of type 'mock' created successfully in 10ms
Adapter 'adapter2' of type 'mock' created successfully in 12ms
AdapterFactoryManager initialized with 2 adapters
Component test-factory initialized successfully
Adapter 'adapter3' of type 'mock' created successfully in 11ms
AdapterFactoryManager configuration updated
Component test-factory configuration updated successfully
(pass) AdapterFactoryManager > Configuration Updates > should update factory configuration [22.71ms]
All adapters stopped in 0ms
AdapterFactoryManager cleanup completed
Component test-factory cleanup completed

src/config/browser/__test__/BrowserFallbackManager.test.ts:
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Initialization and Lifecycle > should initialize successfully [0.04ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
Starting BrowserFallbackManager: browser-fallback-test
BrowserFallbackManager started
Component browser-fallback-test started successfully
Stopping BrowserFallbackManager: browser-fallback-test
BrowserFallbackManager stopped
Component browser-fallback-test stopped successfully
(pass) BrowserFallbackManager > Initialization and Lifecycle > should start and stop successfully [0.75ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
Starting BrowserFallbackManager: browser-fallback-test
BrowserFallbackManager started
Component browser-fallback-test started successfully
(pass) BrowserFallbackManager > Initialization and Lifecycle > should get health status [0.35ms]
Stopping BrowserFallbackManager: browser-fallback-test
BrowserFallbackManager stopped
Component browser-fallback-test stopped successfully
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Configuration Management > should get default configuration [0.02ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Configuration Management > should update configuration [0.13ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Quota Monitoring > should check quota status for all storage types [0.09ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Quota Monitoring > should get quota status for specific storage type [0.05ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Quota Monitoring > should start and stop quota monitoring [0.05ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Rules Management > should add fallback rule [0.09ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Rules Management > should update fallback rule [0.19ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Rules Management > should remove fallback rule [0.11ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Rules Management > should enable and disable fallback rules [0.11ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Rules Management > should get all fallback rules [0.01ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Rules Management > should validate fallback rules [0.05ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Execution > should trigger manual fallback [0.50ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Execution > should execute fallback rule [0.25ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Execution > should get active and historical executions [0.09ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Fallback Execution > should handle execution errors gracefully [0.07ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Strategy Implementation > should execute memory-only fallback [0.13ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Strategy Implementation > should execute reduced cache fallback [0.10ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Strategy Implementation > should execute external storage fallback [0.10ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Strategy Implementation > should execute compression fallback [0.03ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Strategy Implementation > should execute selective cleanup fallback [0.06ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Strategy Implementation > should execute graceful degradation fallback [0.05ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Statistics and Monitoring > should track statistics [0.07ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Statistics and Monitoring > should reset statistics [0.06ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Statistics and Monitoring > should export statistics [0.07ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Event System > should emit and handle events [0.07ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Event System > should remove event handlers
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Utility Methods > should estimate quota usage [0.30ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Utility Methods > should simulate fallback strategies [0.07ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Bulk Operations > should add multiple fallback rules [0.05ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Bulk Operations > should update multiple fallback rules [0.18ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
(pass) BrowserFallbackManager > Bulk Operations > should remove multiple fallback rules [0.10ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
Initializing BrowserFallbackManager: browser-fallback-import-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-import-test initialized successfully
(pass) BrowserFallbackManager > Import/Export > should export and import configuration [0.28ms]
Initializing BrowserFallbackManager: browser-fallback-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-test initialized successfully
Initializing BrowserFallbackManager: browser-fallback-history-test
Detected available storage types: localStorage, sessionStorage
BrowserFallbackManager initialized with 2 rules
Component browser-fallback-history-test initialized successfully
(pass) BrowserFallbackManager > Import/Export > should export and import fallback history [0.30ms]

src/config/registry/__test__/ComponentRegistry.test.ts:
Component 'test-1' registered successfully in 0ms
(pass) ComponentRegistry > Component Registration > should register a component successfully [0.57ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
(pass) ComponentRegistry > Component Registration > should throw error when registering duplicate component [0.15ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-1' unregistered successfully in 0ms
(pass) ComponentRegistry > Component Registration > should unregister a component successfully [0.20ms]
Cleaning up registry...
(pass) ComponentRegistry > Component Registration > should throw error when unregistering non-existent component [0.07ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
Component test-1 initialized successfully
Component test-2 initialized successfully
All components initialized successfully in 21ms
(pass) ComponentRegistry > Component Lifecycle > should initialize all components [21.55ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
Component test-1 initialized successfully
Component test-2 initialized successfully
All components initialized successfully in 22ms
Component test-1 started successfully
Component test-2 started successfully
All components started successfully in 22ms
(pass) ComponentRegistry > Component Lifecycle > should start all components after initialization [44.27ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
Component test-1 initialized successfully
Component test-2 initialized successfully
All components initialized successfully in 22ms
Component test-1 started successfully
Component test-2 started successfully
All components started successfully in 22ms
Component test-2 stopped successfully
Component test-1 stopped successfully
All components stopped in 22ms
(pass) ComponentRegistry > Component Lifecycle > should stop all components [66.38ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
(pass) ComponentRegistry > Component Queries > should get components by type [0.20ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
(pass) ComponentRegistry > Component Queries > should get all components [0.09ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
(pass) ComponentRegistry > Component Queries > should get registry statistics [0.08ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
Component test-1 initialized successfully
Component test-2 initialized successfully
All components initialized successfully in 21ms
Component test-1 started successfully
Component test-2 started successfully
All components started successfully in 22ms
(pass) ComponentRegistry > Health Monitoring > should get health status of all components [43.15ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component test-1 initialized successfully
All components initialized successfully in 11ms
Component test-1 started successfully
All components started successfully in 11ms
(pass) ComponentRegistry > Health Monitoring > should get health status of specific component [22.20ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component 'test-2' registered successfully in 0ms
Component test-1 initialized successfully
Component test-2 initialized successfully
All components initialized successfully in 22ms
Component test-1 configuration updated successfully
Component test-2 configuration updated successfully
(pass) ComponentRegistry > Configuration Updates > should update configuration for all components [33.78ms]
Cleaning up registry...
Component 'test-1' registered successfully in 0ms
Component test-1 initialized successfully
All components initialized successfully in 11ms
Component test-1 configuration updated successfully
(pass) ComponentRegistry > Configuration Updates > should update configuration for specific component [16.93ms]
Cleaning up registry...
Component 'failing-1' registered successfully in 0ms
(pass) ComponentRegistry > Error Handling > should handle component initialization failure [0.46ms]
Cleaning up registry...
Component 'failing-1' registered successfully in 0ms
Component failing-1 initialized successfully
All components initialized successfully in 10ms
(pass) ComponentRegistry > Error Handling > should handle component startup failure [11.09ms]
Cleaning up registry...

src/config/collections/__test__/ReadOnlyCollectionManager.test.ts:
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Component readonly-collection-manager cleanup completed
(pass) ReadOnlyCollectionManager > Initialization > should initialize with default configuration [0.13ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 1 read-only collections
Component readonly-collection-manager initialized successfully
Component readonly-collection-manager cleanup completed
(pass) ReadOnlyCollectionManager > Initialization > should load read-only collections from configuration [0.14ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with STRICT protection
(pass) ReadOnlyCollectionManager > Read-Only Collection Management > should mark collection as read-only [0.14ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with STRICT protection
Collection test-collection marked as writable
(pass) ReadOnlyCollectionManager > Read-Only Collection Management > should mark collection as writable [0.08ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection collection1 marked as read-only with STRICT protection
Collection collection2 marked as read-only with WARNING protection
(pass) ReadOnlyCollectionManager > Read-Only Collection Management > should get all read-only collections [0.08ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with WARNING protection
Protection level for test-collection updated to STRICT
(pass) ReadOnlyCollectionManager > Read-Only Collection Management > should update protection level [0.08ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
(pass) ReadOnlyCollectionManager > Read-Only Collection Management > should throw error when updating non-existent collection [0.31ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection strict-collection marked as read-only with STRICT protection
Collection warning-collection marked as read-only with WARNING protection
Collection disabled-collection marked as read-only with DISABLED protection
(pass) ReadOnlyCollectionManager > Write Operation Validation > should allow operations on non-read-only collections [0.12ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection strict-collection marked as read-only with STRICT protection
Collection warning-collection marked as read-only with WARNING protection
Collection disabled-collection marked as read-only with DISABLED protection
(pass) ReadOnlyCollectionManager > Write Operation Validation > should block operations on strict read-only collections [0.10ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection strict-collection marked as read-only with STRICT protection
Collection warning-collection marked as read-only with WARNING protection
Collection disabled-collection marked as read-only with DISABLED protection
(pass) ReadOnlyCollectionManager > Write Operation Validation > should allow with warning on warning-level collections [0.04ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection strict-collection marked as read-only with STRICT protection
Collection warning-collection marked as read-only with WARNING protection
Collection disabled-collection marked as read-only with DISABLED protection
(pass) ReadOnlyCollectionManager > Write Operation Validation > should allow operations on disabled protection collections [0.05ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection strict-collection marked as read-only with STRICT protection
Collection warning-collection marked as read-only with WARNING protection
Collection disabled-collection marked as read-only with DISABLED protection
Collection custom-collection marked as read-only with CUSTOM protection
(pass) ReadOnlyCollectionManager > Write Operation Validation > should handle custom protection level with allowed operations [0.11ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection strict-collection marked as read-only with STRICT protection
Collection warning-collection marked as read-only with WARNING protection
Collection disabled-collection marked as read-only with DISABLED protection
Collection custom-collection marked as read-only with CUSTOM protection
(pass) ReadOnlyCollectionManager > Write Operation Validation > should handle custom protection level with blocked operations [0.06ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
(pass) ReadOnlyCollectionManager > Auto-Detection Rules > should have default detection rules [0.05ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Detection rule 'custom-test-rule' added
(pass) ReadOnlyCollectionManager > Auto-Detection Rules > should add custom detection rule [0.05ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Detection rule 'removable-rule' added
Detection rule 'removable-rule' removed
(pass) ReadOnlyCollectionManager > Auto-Detection Rules > should remove detection rule [0.05ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
(pass) ReadOnlyCollectionManager > Auto-Detection Rules > should test default detection rules [0.05ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with STRICT protection
(pass) ReadOnlyCollectionManager > Event System > should emit write operation events [0.09ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with STRICT protection
(pass) ReadOnlyCollectionManager > Event System > should allow unsubscribing from events [0.08ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection collection1 marked as read-only with WARNING protection
Collection collection2 marked as read-only with STRICT protection
Bulk updated 2 read-only collection configurations
(pass) ReadOnlyCollectionManager > Bulk Operations > should handle bulk configuration updates [0.17ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection collection1 marked as read-only with STRICT protection
Collection collection2 marked as read-only with WARNING protection
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Imported 2 read-only collection configurations (merge: true)
Component readonly-collection-manager cleanup completed
(pass) ReadOnlyCollectionManager > Bulk Operations > should export and import configurations [0.21ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection collection1 marked as read-only with STRICT protection
Collection collection2 marked as read-only with WARNING protection
Cleared 2 read-only collection configurations
(pass) ReadOnlyCollectionManager > Bulk Operations > should clear all configurations [0.11ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection collection1 marked as read-only with STRICT protection
Collection collection2 marked as read-only with WARNING protection
Collection collection3 marked as read-only with DISABLED protection
(pass) ReadOnlyCollectionManager > Statistics > should track collection statistics [0.07ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with STRICT protection
(pass) ReadOnlyCollectionManager > Statistics > should track blocked operations [0.06ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with WARNING protection
(pass) ReadOnlyCollectionManager > Statistics > should track warning operations [0.06ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
Collection test-collection marked as read-only with STRICT protection
(pass) ReadOnlyCollectionManager > Health Monitoring > should report healthy status with normal operations [0.13ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
(pass) ReadOnlyCollectionManager > Health Monitoring > should report warning status with high blocked operations [0.03ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed
Detection rule 'external-adapter-rule' added
Detection rule 'backup-collection-rule' added
Detection rule 'readonly-suffix-rule' added
ReadOnlyCollectionManager initialized with 0 read-only collections
Component readonly-collection-manager initialized successfully
Auto-detection started with 300000ms interval
ReadOnlyCollectionManager started successfully
Component readonly-collection-manager started successfully
ReadOnlyCollectionManager configuration updated successfully
Component readonly-collection-manager configuration updated successfully
Collection test-collection marked as read-only with WARNING protection
(pass) ReadOnlyCollectionManager > Configuration Updates > should handle configuration updates [0.11ms]
Auto-detection stopped
ReadOnlyCollectionManager stopped successfully
Component readonly-collection-manager stopped successfully
Component readonly-collection-manager cleanup completed

src/auth/computed/tests/interfaces.test.ts:
(pass) Computed Attributes Interfaces > Type Definitions > should have proper interface structure for IComputedAttributeEngine [0.08ms]
(pass) Computed Attributes Interfaces > Type Definitions > should have proper interface structure for IComputedAttributeCache [0.07ms]
(pass) Computed Attributes Interfaces > Type Definitions > should have proper ComputedAttributeDefinition structure [0.03ms]
(pass) Computed Attributes Interfaces > Type Definitions > should have proper ComputationContext structure [0.05ms]
(pass) Computed Attributes Interfaces > Type Safety > should enforce correct target types
(pass) Computed Attributes Interfaces > Type Safety > should enforce correct cache eviction policies [0.01ms]
(pass) Computed Attributes Module Export > should export version and module information [4.12ms]
(pass) Computed Attributes Module Export > should export all required interfaces and types [1.20ms]

src/auth/computed/tests/types.test.ts:
(pass) Computed Attributes Types - Day 2 > Dependency Types > should have proper AttributeDependencyDetailed structure
(pass) Computed Attributes Types - Day 2 > Dependency Types > should have proper DependencyGraph structure [0.48ms]
(pass) Computed Attributes Types - Day 2 > Dependency Types > should have proper DependencyChangeEvent structure [0.05ms]
(pass) Computed Attributes Types - Day 2 > Dependency Types > should have proper IDependencyResolver interface structure
(pass) Computed Attributes Types - Day 2 > Error Types > should have proper ComputedAttributeErrorDetailed structure [0.03ms]
(pass) Computed Attributes Types - Day 2 > Error Types > should have proper error code enumeration
(pass) Computed Attributes Types - Day 2 > Error Types > should have proper error categories
(pass) Computed Attributes Types - Day 2 > Error Types > should have proper error severity levels
(pass) Computed Attributes Types - Day 2 > Error Types > should create errors using ComputedAttributeErrorFactory [0.10ms]
(pass) Computed Attributes Types - Day 2 > Error Types > should have proper IErrorHandler interface structure [0.02ms]
(pass) Computed Attributes Types - Day 2 > Monitoring Types > should have proper ComputedAttributeMetrics structure [0.03ms]
(pass) Computed Attributes Types - Day 2 > Monitoring Types > should have proper PerformanceMonitor structure [0.02ms]
(pass) Computed Attributes Types - Day 2 > Monitoring Types > should have proper HealthCheckResult structure [0.05ms]
(pass) Computed Attributes Types - Day 2 > Monitoring Types > should have proper IMonitoringService interface structure [0.08ms]
(pass) Computed Attributes Types - Day 2 > Type Safety and Validation > should enforce correct dependency types [0.06ms]
(pass) Computed Attributes Types - Day 2 > Type Safety and Validation > should enforce correct priority levels [0.04ms]
(pass) Computed Attributes Types - Day 2 > Type Safety and Validation > should enforce correct health status values [0.08ms]
(pass) Computed Attributes Module Export - Day 2 > should export all new types and interfaces [0.20ms]
(pass) Computed Attributes Module Export - Day 2 > should export error factory class

src/auth/computed/tests/ComputedAttributeEngine.test.ts:
(pass) ComputedAttributeEngine > Initialization > should initialize successfully [0.12ms]
(pass) ComputedAttributeEngine > Initialization > should throw error when initializing twice [0.09ms]
(pass) ComputedAttributeEngine > Attribute Registration > should register a simple attribute [0.08ms]
(pass) ComputedAttributeEngine > Attribute Registration > should throw error for duplicate attribute ID [0.08ms]
(pass) ComputedAttributeEngine > Attribute Registration > should validate attribute definition [0.04ms]
(pass) ComputedAttributeEngine > Attribute Registration > should unregister an attribute [0.09ms]
(pass) ComputedAttributeEngine > Attribute Registration > should throw error when unregistering non-existent attribute [0.04ms]
(pass) ComputedAttributeEngine > Attribute Listing > should list all attributes [0.07ms]
(pass) ComputedAttributeEngine > Attribute Listing > should filter attributes by target type [0.04ms]
(pass) ComputedAttributeEngine > Attribute Computation > should compute a single attribute [0.31ms]
(pass) ComputedAttributeEngine > Attribute Computation > should compute multiple attributes [0.05ms]
(pass) ComputedAttributeEngine > Attribute Computation > should compute all attributes for target type [0.04ms]
ComputedAttributeEngine internal error: {
  type: "error",
  attributeId: "non-existent",
  targetId: "user-123",
  timestamp: 1749834297481,
  data: {
    error: 295 |       context?: ErrorContext
296 |       recoverable?: boolean
297 |       suggestedAction?: string
298 |     }
299 |   ): ComputedAttributeErrorDetailed {
300 |     const error = new Error(message) as ComputedAttributeErrorDetailed
                        ^
ComputedAttributeError: Attribute not found: non-existent
   category: "validation",
   severity: "low",
  timestamp: 2025-06-13T17:04:57.481Z,
 recoverable: true,
 attributeId: "non-existent",
       code: "ATTRIBUTE_NOT_FOUND"

      at create (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/types/ErrorTypes.ts:300:19)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:211:45)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:202:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:244:22)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:243:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:245:10)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:241:59)
,
    computeTime: 0,
  },
  error: 295 |       context?: ErrorContext
296 |       recoverable?: boolean
297 |       suggestedAction?: string
298 |     }
299 |   ): ComputedAttributeErrorDetailed {
300 |     const error = new Error(message) as ComputedAttributeErrorDetailed
                        ^
ComputedAttributeError: Attribute not found: non-existent
   category: "validation",
   severity: "low",
  timestamp: 2025-06-13T17:04:57.481Z,
 recoverable: true,
 attributeId: "non-existent",
       code: "ATTRIBUTE_NOT_FOUND"

      at create (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/types/ErrorTypes.ts:300:19)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:211:45)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:202:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:244:22)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:243:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:245:10)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:241:59)
,
  computeTime: 0,
  cacheKey: "non-existent:user-123",
}
(pass) ComputedAttributeEngine > Attribute Computation > should throw error for non-existent attribute [0.04ms]
ComputedAttributeEngine internal error: {
  type: "error",
  attributeId: "error-attr",
  targetId: "user-123",
  timestamp: 1749834297481,
  data: {
    error: 295 |       context?: ErrorContext
296 |       recoverable?: boolean
297 |       suggestedAction?: string
298 |     }
299 |   ): ComputedAttributeErrorDetailed {
300 |     const error = new Error(message) as ComputedAttributeErrorDetailed
                        ^
ComputedAttributeError: Computation failed: Error: Computation failed
   category: "computation",
   severity: "medium",
  timestamp: 2025-06-13T17:04:57.481Z,
 recoverable: true,
 attributeId: "error-attr",
       code: "COMPUTATION_FAILED"

      at create (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/types/ErrorTypes.ts:300:19)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:570:43)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:263:10)

249 |       const errorAttr = createTestAttribute(
250 |         'error-attr',
251 |         'Error Attribute',
252 |         'user',
253 |         async () => {
254 |           throw new Error('Computation failed')
                      ^
error: Computation failed
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:254:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:253:21)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:560:45)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:544:5)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:239:39)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:202:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:262:22)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:261:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:263:10)
,
    computeTime: 0,
  },
  error: 295 |       context?: ErrorContext
296 |       recoverable?: boolean
297 |       suggestedAction?: string
298 |     }
299 |   ): ComputedAttributeErrorDetailed {
300 |     const error = new Error(message) as ComputedAttributeErrorDetailed
                        ^
ComputedAttributeError: Computation failed: Error: Computation failed
   category: "computation",
   severity: "medium",
  timestamp: 2025-06-13T17:04:57.481Z,
 recoverable: true,
 attributeId: "error-attr",
       code: "COMPUTATION_FAILED"

      at create (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/types/ErrorTypes.ts:300:19)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:570:43)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:263:10)

249 |       const errorAttr = createTestAttribute(
250 |         'error-attr',
251 |         'Error Attribute',
252 |         'user',
253 |         async () => {
254 |           throw new Error('Computation failed')
                      ^
error: Computation failed
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:254:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:253:21)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:560:45)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:544:5)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:239:39)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:202:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:262:22)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:261:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:263:10)
,
  computeTime: 0,
  cacheKey: "error-attr:user-123",
}
(pass) ComputedAttributeEngine > Attribute Computation > should handle computation errors gracefully [0.30ms]
(pass) ComputedAttributeEngine > Cache Management > should get cache stats [0.04ms]
(pass) ComputedAttributeEngine > Cache Management > should clear all cache [0.07ms]
(pass) ComputedAttributeEngine > Cache Management > should invalidate cache for specific attribute [0.09ms]
(pass) ComputedAttributeEngine > Cache Management > should invalidate cache for specific attribute and target [0.03ms]
(pass) ComputedAttributeEngine > Validation > should validate valid definition [0.08ms]
(pass) ComputedAttributeEngine > Validation > should detect invalid definition [0.06ms]
(pass) ComputedAttributeEngine > Validation > should provide warnings for missing description [0.03ms]
(pass) ComputedAttributeEngine > Health Status > should report healthy status [0.03ms]
(pass) ComputedAttributeEngine > Event Handling > should emit computed events [0.07ms]
ComputedAttributeEngine internal error: {
  type: "error",
  attributeId: "error-event-attr",
  targetId: "user-123",
  timestamp: 1749834297482,
  data: {
    error: 295 |       context?: ErrorContext
296 |       recoverable?: boolean
297 |       suggestedAction?: string
298 |     }
299 |   ): ComputedAttributeErrorDetailed {
300 |     const error = new Error(message) as ComputedAttributeErrorDetailed
                        ^
ComputedAttributeError: Computation failed: Error: Test error
   category: "computation",
   severity: "medium",
  timestamp: 2025-06-13T17:04:57.482Z,
 recoverable: true,
 attributeId: "error-event-attr",
       code: "COMPUTATION_FAILED"

      at create (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/types/ErrorTypes.ts:300:19)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:570:43)

370 |       const definition = createTestAttribute(
371 |         'error-event-attr',
372 |         'Error Event Attribute',
373 |         'user',
374 |         async () => {
375 |           throw new Error('Test error')
                      ^
error: Test error
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:375:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:374:21)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:560:45)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:544:5)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:239:39)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:202:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:392:22)
,
    computeTime: 0,
  },
  error: 295 |       context?: ErrorContext
296 |       recoverable?: boolean
297 |       suggestedAction?: string
298 |     }
299 |   ): ComputedAttributeErrorDetailed {
300 |     const error = new Error(message) as ComputedAttributeErrorDetailed
                        ^
ComputedAttributeError: Computation failed: Error: Test error
   category: "computation",
   severity: "medium",
  timestamp: 2025-06-13T17:04:57.482Z,
 recoverable: true,
 attributeId: "error-event-attr",
       code: "COMPUTATION_FAILED"

      at create (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/types/ErrorTypes.ts:300:19)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:570:43)

370 |       const definition = createTestAttribute(
371 |         'error-event-attr',
372 |         'Error Event Attribute',
373 |         'user',
374 |         async () => {
375 |           throw new Error('Test error')
                      ^
error: Test error
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:375:17)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:374:21)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:560:45)
      at performComputation (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:544:5)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:239:39)
      at computeAttribute (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/core/ComputedAttributeEngine.ts:202:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/computed/tests/ComputedAttributeEngine.test.ts:392:22)
,
  computeTime: 0,
  cacheKey: "error-event-attr:user-123",
}
(pass) ComputedAttributeEngine > Event Handling > should emit error events [0.27ms]
(pass) ComputedAttributeEngine > Configuration > should use default configuration [0.01ms]
(pass) ComputedAttributeEngine > Configuration > should use custom configuration [0.04ms]

src/auth/computed/tests/Day8Schema.test.ts:
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Configuration > should initialize with default configuration [0.01ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Configuration > should update configuration [0.04ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Configuration > should use custom configuration [0.03ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Extension > should extend schema with computed attributes [0.73ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Extension > should validate base schema [0.04ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Extension > should enforce attribute limit [0.19ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Extension > should generate schema documentation [0.30ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Validation > should validate field definitions [0.05ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Validation > should detect reserved field names [0.04ms]
(pass) Day 8 Schema Integration Implementation > SchemaExtensions > Schema Validation > should validate indexes [0.04ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Configuration > should initialize with default configuration [0.01ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Configuration > should update configuration [0.02ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Attribute Validation > should validate valid attribute [0.96ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Attribute Validation > should detect missing required fields [0.12ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Attribute Validation > should validate ID format [0.06ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Attribute Validation > should validate target type [0.05ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Attribute Validation > should validate document-level attributes require target collection [0.06ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Dependency Validation > should validate field dependencies [0.05ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Dependency Validation > should validate collection dependencies [0.07ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Dependency Validation > should validate external API dependencies [0.06ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Dependency Validation > should warn about high dependency count [0.12ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Security Validation > should validate external request security [0.05ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Security Validation > should validate timeout settings [0.05ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Security Validation > should validate memory usage limits [0.04ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Performance Validation > should warn about disabled caching [0.04ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Performance Validation > should warn about short cache TTL [0.05ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Performance Validation > should warn about long cache TTL [0.04ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Business Logic Validation > should detect duplicate attribute IDs [0.04ms]
(pass) Day 8 Schema Integration Implementation > AttributeValidator > Business Logic Validation > should warn about similar attribute names [0.04ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Configuration > should initialize with default configuration
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Configuration > should update configuration [0.02ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Collection Integration > should integrate computed attributes with collection [0.06ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Collection Integration > should handle validation errors [0.46ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Collection Integration > should handle schema extension errors [0.05ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Schema Versioning > should create schema versions [0.04ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Schema Versioning > should increment version numbers [0.06ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Schema Cache > should cache extended schemas [0.08ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Schema Cache > should clear cache [0.05ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Attribute Updates > should add new attributes [0.48ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Attribute Updates > should remove attributes [0.10ms]
(pass) Day 8 Schema Integration Implementation > SchemaIntegration > Attribute Updates > should modify attributes [0.19ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > User-level Attributes > should provide user-level attributes [0.14ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > User-level Attributes > should have valid user attribute definitions [0.03ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Document-level Attributes > should provide document-level attributes [0.04ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Collection-level Attributes > should provide collection-level attributes [0.04ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Database-level Attributes > should provide database-level attributes [0.10ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Utility Methods > should get all built-in attributes [0.05ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Utility Methods > should get attributes by target type [0.06ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Utility Methods > should get attribute by ID [0.03ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Utility Methods > should return undefined for non-existent attribute ID [0.02ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Attribute Computation > should compute user profile completeness [0.07ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Attribute Computation > should compute partial user profile completeness
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Attribute Computation > should compute document age [0.08ms]
(pass) Day 8 Schema Integration Implementation > BuiltInAttributes > Attribute Computation > should handle missing data gracefully [0.03ms]

src/auth/computed/tests/Day5Cache.test.ts:
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Initialization and Configuration > should initialize successfully [0.06ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Initialization and Configuration > should throw error when initializing twice [0.05ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Initialization and Configuration > should update configuration [0.05ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Initialization and Configuration > should shutdown properly [0.03ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Basic Cache Operations > should set and get cache values [0.27ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Basic Cache Operations > should return null for non-existent keys [0.11ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Basic Cache Operations > should check if key exists [0.06ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Basic Cache Operations > should delete specific cache entries [0.09ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Basic Cache Operations > should clear all cache [0.04ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > TTL and Expiration > should expire entries after TTL [150.45ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > TTL and Expiration > should use default TTL when not specified [1101.23ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > TTL and Expiration > should handle different TTL values [352.25ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Dependencies and Invalidation > should store and retrieve dependencies [0.21ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Dependencies and Invalidation > should invalidate by attribute ID [0.12ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Dependencies and Invalidation > should invalidate by attribute ID and target ID [0.08ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Dependencies and Invalidation > should invalidate by dependency [0.06ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Dependencies and Invalidation > should invalidate by target [0.10ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Cache Management and Cleanup > should perform cleanup of expired entries [151.14ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Cache Management and Cleanup > should compact cache and free memory [151.54ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Cache Management and Cleanup > should handle cache size limits with eviction [0.55ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Statistics and Monitoring > should provide cache statistics [0.10ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Statistics and Monitoring > should provide health status [0.13ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Statistics and Monitoring > should track operation results [0.09ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Advanced Features > should get all cache keys [0.10ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Advanced Features > should filter keys by pattern [0.12ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Advanced Features > should inspect cache entries [0.08ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Advanced Features > should export and import cache data [0.41ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Advanced Features > should skip expired entries during import [151.14ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Event Handling > should emit cache hit events [0.26ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Event Handling > should emit cache miss events [0.13ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Event Handling > should emit set events [0.10ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Event Handling > should emit invalidated events [0.09ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Error Handling > should handle initialization errors [0.12ms]
(pass) Day 5 Cache Implementation > ComputedAttributeCache > Error Handling > should handle invalid cache operations gracefully [0.05ms]

src/auth/computed/tests/Day6Invalidator.test.ts:
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Initialization and Configuration > should initialize successfully [0.18ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Initialization and Configuration > should throw error when initializing twice [0.09ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Initialization and Configuration > should update configuration [0.14ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Initialization and Configuration > should use default configuration [0.03ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Basic Invalidation Operations > should invalidate by attribute ID [0.82ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Basic Invalidation Operations > should invalidate by attribute ID and target ID [0.17ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Basic Invalidation Operations > should invalidate by dependency [1.02ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Basic Invalidation Operations > should invalidate by target [0.10ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Basic Invalidation Operations > should invalidate by collection [0.18ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Batch Invalidation > should process batch invalidation [0.46ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Batch Invalidation > should queue invalidations for batch processing [151.19ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Batch Invalidation > should process batch when size limit reached [51.47ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Dependency-based Invalidation > should handle cascading invalidations [203.42ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Dependency-based Invalidation > should prevent infinite cascading [0.94ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Database Integration > should handle database change events [150.80ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Database Integration > should handle collection change events [151.31ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Metrics and Monitoring > should track invalidation metrics [0.81ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Metrics and Monitoring > should track failed invalidations [0.42ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Metrics and Monitoring > should clear metrics [0.45ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Metrics and Monitoring > should track batch invalidations [0.23ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Event Handling > should emit invalidated events [1.81ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Event Handling > should emit batch invalidated events [0.24ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Event Handling > should emit configuration updated events [0.41ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Event Handling > should emit error events for cascading failures [101.34ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Error Handling > should handle invalidation without cache set [0.14ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Error Handling > should handle batch invalidation errors gracefully [0.09ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Error Handling > should handle shutdown with pending invalidations [0.11ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Configuration Validation > should work with different batch configurations [0.07ms]
(pass) Day 6 Cache Invalidator Implementation > CacheInvalidator > Configuration Validation > should work with dependency tracking disabled [0.09ms]

src/auth/computed/tests/Day4Components.test.ts:
(pass) Day 4 Components > DependencyTracker > should initialize successfully
(pass) Day 4 Components > DependencyTracker > should throw error when initializing twice
(pass) Day 4 Components > DependencyTracker > should add dependency successfully [0.03ms]
(pass) Day 4 Components > DependencyTracker > should detect circular dependencies [0.25ms]
(pass) Day 4 Components > DependencyTracker > should resolve dependency order [0.25ms]
(pass) Day 4 Components > DependencyTracker > should validate dependencies [0.06ms]
(pass) Day 4 Components > DependencyTracker > should get affected attributes [0.13ms]
(pass) Day 4 Components > DependencyTracker > should emit dependency change events [0.15ms]
(pass) Day 4 Components > MemoryLimitManager > should initialize successfully [0.12ms]
(pass) Day 4 Components > MemoryLimitManager > should start and end computation tracking [0.23ms]
(pass) Day 4 Components > MemoryLimitManager > should provide memory statistics [0.05ms]
(pass) Day 4 Components > MemoryLimitManager > should track active computations [0.14ms]
(pass) Day 4 Components > MemoryLimitManager > should handle timeout protection [101.42ms]
(pass) Day 4 Components > MemoryLimitManager > should emit computation events [0.17ms]
(pass) Day 4 Components > MemoryLimitManager > should cleanup all computations [0.05ms]
(pass) Day 4 Components > ComputationContextBuilder > should initialize successfully
(pass) Day 4 Components > ComputationContextBuilder > should build basic context [0.22ms]
(pass) Day 4 Components > ComputationContextBuilder > should build user context [0.14ms]
(pass) Day 4 Components > ComputationContextBuilder > should build document context [0.10ms]
(pass) Day 4 Components > ComputationContextBuilder > should validate required fields [0.09ms]
(pass) Day 4 Components > ComputationContextBuilder > should create auth context [0.03ms]
(pass) Day 4 Components > ComputationContextBuilder > should handle custom data size limits [2.09ms]
(pass) Day 4 Components > ComputationContextBuilder > should update configuration [0.22ms]
(pass) Day 4 Components > SimpleHttpClient > should create http client [0.02ms]
(pass) Day 4 Components > SimpleHttpClient > should have correct method signatures [0.01ms]

src/auth/functions/tests/ESBuildTranspiler.test.ts:
(pass) ESBuildTranspiler > Basic Functionality > should initialize successfully
(pass) ESBuildTranspiler > Basic Functionality > should transpile simple TypeScript code [40.80ms]
(pass) ESBuildTranspiler > Basic Functionality > should handle TypeScript with return statement [0.82ms]
(pass) ESBuildTranspiler > Basic Functionality > should detect syntax errors [0.86ms]
(pass) ESBuildTranspiler > Configuration > should support different targets [1.21ms]
(pass) ESBuildTranspiler > Configuration > should support source maps [0.41ms]
(pass) ESBuildTranspiler > Validation > should validate correct TypeScript code [0.39ms]
(pass) ESBuildTranspiler > Validation > should detect validation errors [1.75ms]
(pass) ESBuildTranspiler > Features Support > should support TypeScript features [0.28ms]
(pass) ESBuildTranspiler > Features Support > should not support unsupported features [0.02ms]
(pass) ESBuildTranspiler > Default Configuration > should provide sensible defaults [0.07ms]
(pass) ESBuildTranspiler > Multiple Files > should transpile multiple files [3.32ms]
(pass) ESBuildTranspiler > Caching > should cache transpilation results [0.62ms]

src/auth/functions/tests/StoredFunctionEngine.test.ts:
[SimpleFunctionSandbox] Initialized with esbuild transpiler
(pass) StoredFunctionEngine Integration > Function Definition Validation > should validate basic function definition structure [0.06ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: 
        interface CalculationParams {
          x: number
          y: number
        }

        const params = parameters as CalculationParams
        return params.x + params.y
      
[SimpleFunctionSandbox] Compiled code: const params = parameters;
return params.x + params.y;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4gICAgICAgIGludGVyZmFjZSBDYWxjdWxhdGlvblBhcmFtcyB7XG4gICAgICAgICAgeDogbnVtYmVyXG4gICAgICAgICAgeTogbnVtYmVyXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJhbXMgPSBwYXJhbWV0ZXJzIGFzIENhbGN1bGF0aW9uUGFyYW1zXG4gICAgICAgIHJldHVybiBwYXJhbXMueCArIHBhcmFtcy55XG4gICAgICAiXSwKICAibWFwcGluZ3MiOiAiQUFNUSxNQUFNLFNBQVM7QUFDZixPQUFPLE9BQU8sSUFBSSxPQUFPOyIsCiAgIm5hbWVzIjogW10KfQo=

[SimpleFunctionSandbox] TypeScript compilation successful
(pass) StoredFunctionEngine Integration > Function Definition Validation > should validate TypeScript code compilation [1.44ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
(pass) StoredFunctionEngine Integration > Function Definition Validation > should detect security violations in code [0.08ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return parameters.x + parameters.y
[SimpleFunctionSandbox] Compiled code: return parameters.x + parameters.y;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIHBhcmFtZXRlcnMueCArIHBhcmFtZXRlcnMueSJdLAogICJtYXBwaW5ncyI6ICJBQUFBLE9BQU8sV0FBVyxJQUFJLFdBQVc7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834300564_gqa3e7shz
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834300564_gqa3e7shz completed in 1.1184579999971902ms
(pass) StoredFunctionEngine Integration > Function Execution > should execute simple scalar function [1.92ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: 
        interface User {
          id: number
          name: string
          age: number
        }

        const user: User = parameters.user
        const isAdult = user.age >= 18

        return {
          userId: user.id,
          userName: user.name,
          isAdult,
          category: isAdult ? 'adult' : 'minor'
        }
      
[SimpleFunctionSandbox] Compiled code: const user = parameters.user;
const isAdult = user.age >= 18;
return {
  userId: user.id,
  userName: user.name,
  isAdult,
  category: isAdult ? "adult" : "minor"
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4gICAgICAgIGludGVyZmFjZSBVc2VyIHtcbiAgICAgICAgICBpZDogbnVtYmVyXG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgYWdlOiBudW1iZXJcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXI6IFVzZXIgPSBwYXJhbWV0ZXJzLnVzZXJcbiAgICAgICAgY29uc3QgaXNBZHVsdCA9IHVzZXIuYWdlID49IDE4XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgdXNlck5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICBpc0FkdWx0LFxuICAgICAgICAgIGNhdGVnb3J5OiBpc0FkdWx0ID8gJ2FkdWx0JyA6ICdtaW5vcidcbiAgICAgICAgfVxuICAgICAgIl0sCiAgIm1hcHBpbmdzIjogIkFBT1EsTUFBTSxPQUFhLFdBQVc7QUFDOUIsTUFBTSxVQUFVLEtBQUssT0FBTztBQUU1QixPQUFPO0FBQUEsRUFDTCxRQUFRLEtBQUs7QUFBQSxFQUNiLFVBQVUsS0FBSztBQUFBLEVBQ2Y7QUFBQSxFQUNBLFVBQVUsVUFBVSxVQUFVO0FBQ2hDOyIsCiAgIm5hbWVzIjogW10KfQo=

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834300566_8y7fnf4s7
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834300566_8y7fnf4s7 completed in 0.3050829999992857ms
(pass) StoredFunctionEngine Integration > Function Execution > should execute function with complex TypeScript [1.25ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: throw new Error("Test error")
[SimpleFunctionSandbox] Compiled code: throw new Error("Test error");
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsidGhyb3cgbmV3IEVycm9yKFwiVGVzdCBlcnJvclwiKSJdLAogICJtYXBwaW5ncyI6ICJBQUFBLE1BQU0sSUFBSSxNQUFNLFlBQVk7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834300567_ns75kkyzi
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution error: 602 | 
603 |         // Debug: log available context keys
604 |         this.logger.debug('[SimpleFunctionSandbox] Available context keys:', Object.keys(context))
605 | 
606 |         const script = new vm.Script(wrappedCode)
607 |         const result = script.runInContext(context, {
                                    ^
SyntaxError: Unexpected keyword 'throw'
      at <parse> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:607:31)

[SimpleFunctionSandbox] Execution exec_1749834300567_ns75kkyzi failed after 0.5444160000042757ms: 602 | 
603 |         // Debug: log available context keys
604 |         this.logger.debug('[SimpleFunctionSandbox] Available context keys:', Object.keys(context))
605 | 
606 |         const script = new vm.Script(wrappedCode)
607 |         const result = script.runInContext(context, {
                                    ^
SyntaxError: Unexpected keyword 'throw'
      at <parse> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:607:31)

(pass) StoredFunctionEngine Integration > Function Execution > should handle execution errors gracefully [1.11ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: 
        const start = Date.now()
        while (Date.now() - start < 2000) {
          // Busy wait for 2 seconds
        }
        return 'completed'
      
[SimpleFunctionSandbox] Compiled code: const start = Date.now();
while (Date.now() - start < 2e3) {
}
return "completed";
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICAgICB3aGlsZSAoRGF0ZS5ub3coKSAtIHN0YXJ0IDwgMjAwMCkge1xuICAgICAgICAgIC8vIEJ1c3kgd2FpdCBmb3IgMiBzZWNvbmRzXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdjb21wbGV0ZWQnXG4gICAgICAiXSwKICAibWFwcGluZ3MiOiAiQUFDUSxNQUFNLFFBQVEsS0FBSyxJQUFJO0FBQ3ZCLE9BQU8sS0FBSyxJQUFJLElBQUksUUFBUSxLQUFNO0FBRWxDO0FBQ0EsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834300571_rv8hoe2i5
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution error: 602 | 
603 |         // Debug: log available context keys
604 |         this.logger.debug('[SimpleFunctionSandbox] Available context keys:', Object.keys(context))
605 | 
606 |         const script = new vm.Script(wrappedCode)
607 |         const result = script.runInContext(context, {
                                    ^
error: Script execution timed out after 990ms
 code: "ERR_SCRIPT_EXECUTION_TIMEOUT"

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:607:31)
      at new Promise (1:11)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:561:12)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:556:5)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:224:33)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:198:5)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/tests/StoredFunctionEngine.test.ts:259:17)

[SimpleFunctionSandbox] Execution exec_1749834300571_rv8hoe2i5 failed after 1044.4614579999907ms: 602 | 
603 |         // Debug: log available context keys
604 |         this.logger.debug('[SimpleFunctionSandbox] Available context keys:', Object.keys(context))
605 | 
606 |         const script = new vm.Script(wrappedCode)
607 |         const result = script.runInContext(context, {
                                    ^
error: Script execution timed out after 990ms
 code: "ERR_SCRIPT_EXECUTION_TIMEOUT"

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:607:31)
      at new Promise (1:11)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:561:12)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:556:5)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:224:33)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:198:5)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/tests/StoredFunctionEngine.test.ts:259:17)

(pass) StoredFunctionEngine Integration > Function Execution > should enforce execution timeout [1048.13ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return parameters.value * 2
[SimpleFunctionSandbox] Compiled code: return parameters.value * 2;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIHBhcmFtZXRlcnMudmFsdWUgKiAyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTyxXQUFXLFFBQVE7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using cached compilation result
(pass) StoredFunctionEngine Integration > Caching > should cache compilation results [3.45ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return 42
[SimpleFunctionSandbox] Compiled code: return 42;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIDQyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Compilation cache cleared
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return 42
[SimpleFunctionSandbox] Compiled code: return 42;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIDQyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
(pass) StoredFunctionEngine Integration > Caching > should clear compilation cache [0.89ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return parameters.x + parameters.y
[SimpleFunctionSandbox] Compiled code: return parameters.x + parameters.y;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIHBhcmFtZXRlcnMueCArIHBhcmFtZXRlcnMueSJdLAogICJtYXBwaW5ncyI6ICJBQUFBLE9BQU8sV0FBVyxJQUFJLFdBQVc7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301621_afnio6upv
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301621_afnio6upv completed in 0.27749999999650754ms
(pass) StoredFunctionEngine Integration > Performance Monitoring > should track execution statistics [0.85ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
(pass) StoredFunctionEngine Integration > Security Features > should block dangerous Node.js APIs [0.12ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
(pass) StoredFunctionEngine Integration > Security Features > should block prototype pollution attempts [0.05ms]
[SimpleFunctionSandbox] Sandbox disposed
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: 
        console.log('Test message')
        console.warn('Test warning')
        return 'logged'
      
[SimpleFunctionSandbox] Compiled code: console.log("Test message");
console.warn("Test warning");
return "logged";
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXN0IG1lc3NhZ2UnKVxuICAgICAgICBjb25zb2xlLndhcm4oJ1Rlc3Qgd2FybmluZycpXG4gICAgICAgIHJldHVybiAnbG9nZ2VkJ1xuICAgICAgIl0sCiAgIm1hcHBpbmdzIjogIkFBQ1EsUUFBUSxJQUFJLGNBQWM7QUFDMUIsUUFBUSxLQUFLLGNBQWM7QUFDM0IsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301622_9v4rzgs6g
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[Function] Test message
[Function] Test warning
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301622_9v4rzgs6g completed in 0.26900000000023283ms
(pass) StoredFunctionEngine Integration > Security Features > should provide restricted console access [0.94ms]
[SimpleFunctionSandbox] Sandbox disposed
(pass) Function Engine Architecture > should support pluggable transpiler providers [0.04ms]
(pass) Function Engine Architecture > should validate function definition schema [0.04ms]

src/auth/functions/tests/SimpleFunctionSandbox.test.ts:
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return 42
[SimpleFunctionSandbox] Compiled code: return 42;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIDQyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
(pass) SimpleFunctionSandbox > Compilation > should compile simple JavaScript code successfully [1.29ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: 
        interface TestInterface {
          value: number
        }
        const test: TestInterface = { value: 42 }
        return test.value
      
[SimpleFunctionSandbox] Compiled code: const test = { value: 42 };
return test.value;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4gICAgICAgIGludGVyZmFjZSBUZXN0SW50ZXJmYWNlIHtcbiAgICAgICAgICB2YWx1ZTogbnVtYmVyXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGVzdDogVGVzdEludGVyZmFjZSA9IHsgdmFsdWU6IDQyIH1cbiAgICAgICAgcmV0dXJuIHRlc3QudmFsdWVcbiAgICAgICJdLAogICJtYXBwaW5ncyI6ICJBQUlRLE1BQU0sT0FBc0IsRUFBRSxPQUFPLEdBQUc7QUFDeEMsT0FBTyxLQUFLOyIsCiAgIm5hbWVzIjogW10KfQo=

[SimpleFunctionSandbox] TypeScript compilation successful
(pass) SimpleFunctionSandbox > Compilation > should compile simple TypeScript-like code [0.50ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return 42
[SimpleFunctionSandbox] Compiled code: return 42;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIDQyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Using cached compilation result
(pass) SimpleFunctionSandbox > Compilation > should cache compilation results [0.41ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
(pass) SimpleFunctionSandbox > Compilation > should reject code with security issues [0.12ms]
(pass) SimpleFunctionSandbox > Security Validation > should detect eval usage [0.04ms]
(pass) SimpleFunctionSandbox > Security Validation > should detect Function constructor usage [0.03ms]
(pass) SimpleFunctionSandbox > Security Validation > should detect process object access [0.04ms]
(pass) SimpleFunctionSandbox > Security Validation > should detect prototype pollution attempts [0.03ms]
(pass) SimpleFunctionSandbox > Security Validation > should allow safe code [0.03ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return parameters.x + parameters.y
[SimpleFunctionSandbox] Compiled code: return parameters.x + parameters.y;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIHBhcmFtZXRlcnMueCArIHBhcmFtZXRlcnMueSJdLAogICJtYXBwaW5ncyI6ICJBQUFBLE9BQU8sV0FBVyxJQUFJLFdBQVc7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301628_4ay78pj7t
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301628_4ay78pj7t completed in 0.18900000001303852ms
(pass) SimpleFunctionSandbox > Execution > should execute simple function successfully [0.61ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return parameters.a * parameters.b
[SimpleFunctionSandbox] Compiled code: return parameters.a * parameters.b;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIHBhcmFtZXRlcnMuYSAqIHBhcmFtZXRlcnMuYiJdLAogICJtYXBwaW5ncyI6ICJBQUFBLE9BQU8sV0FBVyxJQUFJLFdBQVc7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301629_zj18td1qo
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301629_zj18td1qo completed in 0.1507500000006985ms
(pass) SimpleFunctionSandbox > Execution > should execute TypeScript code end-to-end [0.93ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: while(true) { /* infinite loop */ }
[SimpleFunctionSandbox] Compiled code: while (true) {
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsid2hpbGUodHJ1ZSkgeyAvKiBpbmZpbml0ZSBsb29wICovIH0iXSwKICAibWFwcGluZ3MiOiAiQUFBQSxPQUFNLE1BQU07QUFBc0I7IiwKICAibmFtZXMiOiBbXQp9Cg==

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301630_y7wpxsw7g
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution error: 602 | 
603 |         // Debug: log available context keys
604 |         this.logger.debug('[SimpleFunctionSandbox] Available context keys:', Object.keys(context))
605 | 
606 |         const script = new vm.Script(wrappedCode)
607 |         const result = script.runInContext(context, {
                                    ^
error: Script execution timed out after 40ms
 code: "ERR_SCRIPT_EXECUTION_TIMEOUT"

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:607:31)
      at new Promise (1:11)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:561:12)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:556:5)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:224:33)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:198:5)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/tests/SimpleFunctionSandbox.test.ts:268:17)

[SimpleFunctionSandbox] Execution exec_1749834301630_y7wpxsw7g failed after 45.79337500000838ms: 602 | 
603 |         // Debug: log available context keys
604 |         this.logger.debug('[SimpleFunctionSandbox] Available context keys:', Object.keys(context))
605 | 
606 |         const script = new vm.Script(wrappedCode)
607 |         const result = script.runInContext(context, {
                                    ^
error: Script execution timed out after 40ms
 code: "ERR_SCRIPT_EXECUTION_TIMEOUT"

      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:607:31)
      at new Promise (1:11)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:561:12)
      at executeWithTimeout (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:556:5)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:224:33)
      at executeInSandbox (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/core/SimpleFunctionSandbox.ts:198:5)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/functions/tests/SimpleFunctionSandbox.test.ts:268:17)

(pass) SimpleFunctionSandbox > Execution > should handle execution timeout [46.24ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: 
        // Test console access
        console.log('Test message')

        // Test utils access
        const id = utils.generateId()
        const hash = utils.hash('test')

        // Test user context
        const result = {
          userId: currentUser.id,
          userEmail: currentUser.email,
          generatedId: id,
          hash: hash
        }
        return result
      
[SimpleFunctionSandbox] Compiled code: console.log("Test message");
const id = utils.generateId();
const hash = utils.hash("test");
const result = {
  userId: currentUser.id,
  userEmail: currentUser.email,
  generatedId: id,
  hash
};
return result;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4gICAgICAgIC8vIFRlc3QgY29uc29sZSBhY2Nlc3NcbiAgICAgICAgY29uc29sZS5sb2coJ1Rlc3QgbWVzc2FnZScpXG5cbiAgICAgICAgLy8gVGVzdCB1dGlscyBhY2Nlc3NcbiAgICAgICAgY29uc3QgaWQgPSB1dGlscy5nZW5lcmF0ZUlkKClcbiAgICAgICAgY29uc3QgaGFzaCA9IHV0aWxzLmhhc2goJ3Rlc3QnKVxuXG4gICAgICAgIC8vIFRlc3QgdXNlciBjb250ZXh0XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICB1c2VySWQ6IGN1cnJlbnRVc2VyLmlkLFxuICAgICAgICAgIHVzZXJFbWFpbDogY3VycmVudFVzZXIuZW1haWwsXG4gICAgICAgICAgZ2VuZXJhdGVkSWQ6IGlkLFxuICAgICAgICAgIGhhc2g6IGhhc2hcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAiXSwKICAibWFwcGluZ3MiOiAiQUFFUSxRQUFRLElBQUksY0FBYztBQUcxQixNQUFNLEtBQUssTUFBTSxXQUFXO0FBQzVCLE1BQU0sT0FBTyxNQUFNLEtBQUssTUFBTTtBQUc5QixNQUFNLFNBQVM7QUFBQSxFQUNiLFFBQVEsWUFBWTtBQUFBLEVBQ3BCLFdBQVcsWUFBWTtBQUFBLEVBQ3ZCLGFBQWE7QUFBQSxFQUNiO0FBQ0Y7QUFDQSxPQUFPOyIsCiAgIm5hbWVzIjogW10KfQo=

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301677_0jdvu4ayv
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[Function] Test message
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301677_0jdvu4ayv completed in 0.3550000000104774ms
(pass) SimpleFunctionSandbox > Execution > should provide sandbox environment [2.22ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return 42
[SimpleFunctionSandbox] Compiled code: return 42;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIDQyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301678_gchceo9lc
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301678_gchceo9lc completed in 0.1300000000046566ms
(pass) SimpleFunctionSandbox > Monitoring > should track execution statistics [0.70ms]
[SimpleFunctionSandbox] Starting TypeScript compilation
[SimpleFunctionSandbox] Initialized with esbuild transpiler
[SimpleFunctionSandbox] Using transpiler for compilation
[SimpleFunctionSandbox] Original code: return 42
[SimpleFunctionSandbox] Compiled code: return 42;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPHN0ZGluPiJdLAogICJzb3VyY2VzQ29udGVudCI6IFsicmV0dXJuIDQyIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTzsiLAogICJuYW1lcyI6IFtdCn0K

[SimpleFunctionSandbox] TypeScript compilation successful
[SimpleFunctionSandbox] Starting execution exec_1749834301679_51abtc3g9
[SimpleFunctionSandbox] Available context keys: [ "console", "database", "currentUser",
  "utils", "global", "process", "Buffer", "parameters", "exports", "module"
]
[SimpleFunctionSandbox] Execution completed successfully
[SimpleFunctionSandbox] Execution exec_1749834301679_51abtc3g9 completed in 0.12175000000570435ms
(pass) SimpleFunctionSandbox > Monitoring > should handle execution termination [0.72ms]
(pass) SimpleFunctionSandbox > Cache Management > should cache and retrieve compiled code [0.06ms]
[SimpleFunctionSandbox] Compilation cache cleared
(pass) SimpleFunctionSandbox > Cache Management > should clear compilation cache [0.05ms]
(pass) SimpleFunctionSandbox > Configuration > should return sandbox configuration [0.03ms]
(pass) SimpleFunctionSandbox > Configuration > should check module permissions [0.03ms]
(pass) SimpleFunctionSandbox > Type Validation > should validate correct syntax [0.05ms]
(pass) SimpleFunctionSandbox > Type Validation > should detect syntax errors [0.11ms]
(pass) SimpleFunctionSandbox > Type Validation > should get diagnostics for code [0.04ms]

src/auth/authorization/tests/RBACEngine.test.ts:
(pass) RBACEngine > Basic Permission Checking > should allow access when RBAC is disabled
(pass) RBACEngine > Basic Permission Checking > should deny access when user has no roles [0.69ms]
(pass) RBACEngine > Basic Permission Checking > should handle permission matching correctly [1.41ms]
(pass) RBACEngine > Admin Override > should allow admin override when not in strict mode [0.15ms]
(pass) RBACEngine > Admin Override > should not allow admin override in strict mode [0.11ms]
(pass) RBACEngine > Resource String Conversion > should convert database resource correctly [0.08ms]
(pass) RBACEngine > Resource String Conversion > should convert document resource correctly [0.09ms]
(pass) RBACEngine > Resource String Conversion > should convert field resource correctly [0.08ms]
(pass) RBACEngine > Configuration Management > should get current configuration [0.04ms]
(pass) RBACEngine > Configuration Management > should update configuration [0.02ms]
(pass) RBACEngine > Health Check > should perform health check successfully [0.05ms]
(pass) RBACEngine > Error Handling > should handle evaluation errors gracefully [0.27ms]
(pass) RBACEngine > Default Deny Policy > should respect default deny configuration [0.08ms]

src/auth/authorization/tests/ABACEngine.test.ts:
(pass) ABACEngine > Basic ABAC Functionality > should allow access when ABAC is disabled [0.72ms]
(pass) ABACEngine > Basic ABAC Functionality > should evaluate user attributes [0.63ms]
Error evaluating authorization attributes: warn: collection users not found
      at collection (/Users/vedmalex/work/collection-store/packages/collection-store/src/core/Database.ts:152:11)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:270:46)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:227:5)
      at evaluateABACPermission (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:193:48)

(pass) ABACEngine > Basic ABAC Functionality > should handle document attributes for document resources [0.23ms]
(pass) ABACEngine > Access Level Control > should deny access to high security resources for medium access users [0.09ms]
(pass) ABACEngine > Access Level Control > should allow access to high security resources for high access users [0.09ms]
(pass) ABACEngine > Time-Based Access Control > should deny sensitive operations outside business hours [0.05ms]
(pass) ABACEngine > Time-Based Access Control > should allow sensitive operations during business hours [0.08ms]
(pass) ABACEngine > Region-Based Access Control > should deny access from unauthorized regions [0.11ms]
(pass) ABACEngine > Region-Based Access Control > should allow access from authorized regions [0.08ms]
(pass) ABACEngine > Activity-Based Access Control > should deny sensitive operations for stale sessions [0.09ms]
Error evaluating authorization attributes: warn: collection user-documents not found
      at collection (/Users/vedmalex/work/collection-store/packages/collection-store/src/core/Database.ts:152:11)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:270:46)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:227:5)
      at evaluateABACPermission (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:193:48)

(pass) ABACEngine > Document Ownership > should allow access to owned documents [0.08ms]
(pass) ABACEngine > Configuration Management > should get current configuration [0.02ms]
(pass) ABACEngine > Configuration Management > should update configuration [0.03ms]
(pass) ABACEngine > Health Check > should perform health check successfully [0.04ms]
(pass) ABACEngine > Error Handling > should handle attribute evaluation errors gracefully [0.09ms]
Error evaluating authorization attributes: warn: collection non-existent-collection not found
      at collection (/Users/vedmalex/work/collection-store/packages/collection-store/src/core/Database.ts:152:11)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:270:46)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:227:5)
      at evaluateABACPermission (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:193:48)

(pass) ABACEngine > Error Handling > should handle ComputedAttributeEngine errors [0.08ms]
(pass) ABACEngine > Default Deny Policy > should respect default deny configuration [0.07ms]
(pass) ABACEngine > Sensitive Actions Detection > should identify sensitive actions correctly [0.26ms]
(pass) ABACEngine > High Security Resources Detection > should identify high security resources correctly [0.13ms]

src/auth/authorization/tests/Integration.test.ts:
(pass) Phase 2 Authorization System Integration > Core Engine Initialization > should initialize all engines successfully
(pass) Phase 2 Authorization System Integration > Core Engine Initialization > should create individual engines [0.09ms]
(pass) Phase 2 Authorization System Integration > Basic Permission Checking > should handle permission requests without errors [1.11ms]
Error evaluating authorization attributes: warn: collection users not found
      at collection (/Users/vedmalex/work/collection-store/packages/collection-store/src/core/Database.ts:152:11)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:270:46)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:227:5)
      at evaluateABACPermission (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:193:48)

(pass) Phase 2 Authorization System Integration > Basic Permission Checking > should handle different resource types [0.53ms]
(pass) Phase 2 Authorization System Integration > Cache Functionality > should provide cache statistics [0.16ms]
(pass) Phase 2 Authorization System Integration > Cache Functionality > should clear cache without errors [0.04ms]
(pass) Phase 2 Authorization System Integration > Cache Functionality > should invalidate cache by pattern [0.12ms]
(pass) Phase 2 Authorization System Integration > Dynamic Rules > should add and remove dynamic rules [0.09ms]
(pass) Phase 2 Authorization System Integration > Dynamic Rules > should validate dynamic rules [0.13ms]
(pass) Phase 2 Authorization System Integration > Configuration Management > should get and update configuration [0.06ms]
(pass) Phase 2 Authorization System Integration > Health Monitoring > should provide health status [0.10ms]
(pass) Phase 2 Authorization System Integration > Batch Operations > should handle batch permission checks [0.31ms]
(pass) Phase 2 Authorization System Integration > Error Handling > should handle invalid resource types gracefully [0.24ms]
(pass) Phase 2 Authorization System Integration > Error Handling > should handle missing context gracefully [0.16ms]
(pass) Phase 2 Authorization System Integration > Security Policies > should handle admin override detection [0.04ms]
(pass) Phase 2 Authorization System Integration > Performance > should handle multiple concurrent requests [0.60ms]
(pass) Phase 2 Authorization System Integration > Performance > should track performance metrics [0.24ms]

src/auth/authorization/tests/PolicyEvaluator.test.ts:
(pass) PolicyEvaluator > Basic Policy Evaluation > should allow when policies are disabled [0.05ms]
(pass) PolicyEvaluator > Basic Policy Evaluation > should apply deny by default principle [0.14ms]
(pass) PolicyEvaluator > Basic Policy Evaluation > should allow when all engines allow [0.05ms]
(pass) PolicyEvaluator > Basic Policy Evaluation > should apply default policy when no explicit allows [0.04ms]
(pass) PolicyEvaluator > Evaluation Order > should apply evaluation order correctly [0.04ms]
(pass) PolicyEvaluator > Evaluation Order > should handle missing engines in evaluation order [0.03ms]
(pass) PolicyEvaluator > Security Policies > should allow admin override [0.04ms]
(pass) PolicyEvaluator > Security Policies > should allow emergency access [0.03ms]
(pass) PolicyEvaluator > Security Policies > should deny during maintenance mode [0.03ms]
(pass) PolicyEvaluator > Security Policies > should deny when rate limited [0.02ms]
(pass) PolicyEvaluator > Security Policies > should allow when no security policies apply [0.02ms]
(pass) PolicyEvaluator > Engine Identification > should identify engines from metadata [0.02ms]
(pass) PolicyEvaluator > Engine Identification > should identify engines from applied rules [0.07ms]
(pass) PolicyEvaluator > Engine Identification > should handle unknown engines [0.04ms]
(pass) PolicyEvaluator > Applied Rules Combination > should combine applied rules from all engines [0.07ms]
(pass) PolicyEvaluator > Applied Rules Combination > should deduplicate applied rules [0.04ms]
(pass) PolicyEvaluator > Configuration Management > should get current configuration [0.01ms]
(pass) PolicyEvaluator > Configuration Management > should update configuration [0.01ms]
(pass) PolicyEvaluator > Health Check > should perform health check successfully
(pass) PolicyEvaluator > Health Check > should fail health check with invalid configuration [0.02ms]
(pass) PolicyEvaluator > Edge Cases > should handle empty results array [0.01ms]
(pass) PolicyEvaluator > Edge Cases > should handle results with no metadata [0.02ms]
(pass) PolicyEvaluator > Edge Cases > should handle mixed allow/deny results [0.02ms]
(pass) PolicyEvaluator > Admin Override Detection > should detect system super admin [0.01ms]
(pass) PolicyEvaluator > Admin Override Detection > should detect admin roles [0.02ms]
(pass) PolicyEvaluator > Admin Override Detection > should not detect admin for regular users [0.01ms]

src/auth/authorization/tests/AuthorizationEngine.test.ts:
(pass) AuthorizationEngine > Basic Permission Checking > should allow access when no restrictions apply [0.51ms]
Error evaluating authorization attributes: warn: collection test-collection not found
      at collection (/Users/vedmalex/work/collection-store/packages/collection-store/src/core/Database.ts:152:11)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:270:46)
      at evaluateAuthorizationAttributes (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:227:5)
      at evaluateABACPermission (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/ABACEngine.ts:193:48)

(pass) AuthorizationEngine > Basic Permission Checking > should cache permission results [0.27ms]
(pass) AuthorizationEngine > Basic Permission Checking > should handle batch permission checks [0.75ms]
(pass) AuthorizationEngine > Dynamic Rules > should add and evaluate dynamic rules [0.76ms]
(pass) AuthorizationEngine > Dynamic Rules > should remove dynamic rules [0.20ms]
(pass) AuthorizationEngine > Cache Management > should clear permission cache [0.20ms]
(pass) AuthorizationEngine > Cache Management > should provide cache statistics [0.12ms]
(pass) AuthorizationEngine > Cache Management > should invalidate cache by pattern [0.27ms]
(pass) AuthorizationEngine > Configuration Management > should update configuration [0.08ms]
(pass) AuthorizationEngine > Configuration Management > should perform health check [0.06ms]
(pass) AuthorizationEngine > Error Handling > should handle invalid dynamic rules [0.12ms]
Error evaluating rule error-rule: warn: Rule evaluation error
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/tests/AuthorizationEngine.test.ts:410:17)
      at evaluator (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/tests/AuthorizationEngine.test.ts:409:32)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/AuthorizationEngine.ts:528:29)
      at new Promise (1:11)
      at evaluateRule (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/AuthorizationEngine.ts:522:12)
      at evaluateRule (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/AuthorizationEngine.ts:515:5)
      at evaluateRules (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/AuthorizationEngine.ts:271:41)
      at evaluateRules (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/AuthorizationEngine.ts:242:5)
      at evaluateAllEngines (/Users/vedmalex/work/collection-store/packages/collection-store/src/auth/authorization/core/AuthorizationEngine.ts:225:38)

(pass) AuthorizationEngine > Error Handling > should handle rule evaluation errors gracefully [0.38ms]

src/__test__/core/wal/wal-transaction-coordination.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALTransactionManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/core/wal/wal-transaction-coordination.test.ts'
-------------------------------


src/__test__/core/wal/wal-basic.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../wal/FileWALManager' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/core/wal/wal-basic.test.ts'
-------------------------------


src/__test__/core/wal/wal-storage-integration.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../WALCollection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/core/wal/wal-storage-integration.test.ts'
-------------------------------


src/__test__/storage/adapters/memory-adapter.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../core/Collection' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/storage/adapters/memory-adapter.test.ts'
-------------------------------


src/__test__/query/engine/compile-query-compatibility.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../query' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/query/engine/compile-query-compatibility.test.ts'
-------------------------------


src/__test__/query/engine/query-integration.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../query' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/query/engine/query-integration.test.ts'
-------------------------------


src/__test__/query/engine/query-simple-integration.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../query' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/query/engine/query-simple-integration.test.ts'
-------------------------------


src/__test__/query/engine/query-advanced.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find module '../query' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/__test__/query/engine/query-advanced.test.ts'
-------------------------------


src/__test__/client/pagination/QueryOptimizer.test.ts:
(pass) QueryOptimizer > optimizeForPagination > should apply index hints when enabled [0.31ms]
(pass) QueryOptimizer > optimizeForPagination > should apply maxScanDocuments limit [0.02ms]
(pass) QueryOptimizer > optimizeForPagination > should apply preferred indexes [0.03ms]
(pass) QueryOptimizer > optimizeForPagination > should optimize for large datasets [0.02ms]
(pass) QueryOptimizer > optimizeForPagination > should optimize complex sorting [0.12ms]
(pass) QueryOptimizer > optimizeForPagination > should not modify query when no optimization needed [0.02ms]
(pass) QueryOptimizer > generateIndexHints > should generate compound index hints for multi-field sorting [0.07ms]
(pass) QueryOptimizer > generateIndexHints > should generate single field hints for single field sorting [0.03ms]
(pass) QueryOptimizer > generateIndexHints > should generate filter-based hints [0.03ms]
(pass) QueryOptimizer > generateIndexHints > should ignore MongoDB operators in filters [0.03ms]
(pass) QueryOptimizer > generateIndexHints > should handle empty sort and filters [0.03ms]
(pass) QueryOptimizer > analyzeQueryPerformance > should analyze simple query performance [0.14ms]
(pass) QueryOptimizer > analyzeQueryPerformance > should suggest optimization for complex sorting [0.03ms]
(pass) QueryOptimizer > analyzeQueryPerformance > should suggest optimization for large page sizes [0.02ms]
(pass) QueryOptimizer > analyzeQueryPerformance > should suggest optimization for complex filters [0.07ms]
(pass) QueryOptimizer > analyzeQueryPerformance > should suggest optimization for complex sorting complexity [0.04ms]
(pass) QueryOptimizer > generateQueryPlan > should generate plan for simple query [0.06ms]
(pass) QueryOptimizer > generateQueryPlan > should include cursor step when cursor provided [0.04ms]
(pass) QueryOptimizer > generateQueryPlan > should handle query without filters [0.03ms]
(pass) QueryOptimizer > generateQueryPlan > should handle query without sorting [0.02ms]
(pass) QueryOptimizer > complexity calculations > should calculate sort complexity correctly [0.06ms]
(pass) QueryOptimizer > complexity calculations > should calculate filter complexity correctly [0.03ms]
(pass) QueryOptimizer > optimization strategies > should optimize for large datasets correctly [0.03ms]
(pass) QueryOptimizer > optimization strategies > should optimize complex sorting correctly [0.02ms]
(pass) QueryOptimizer > edge cases > should handle empty sort configuration [0.02ms]
(pass) QueryOptimizer > edge cases > should handle empty query [0.01ms]
(pass) QueryOptimizer > edge cases > should handle very small limits [0.01ms]

src/__test__/client/pagination/FactoryFunction.test.ts:
(pass) createAdvancedPagination Factory Function > should create all pagination components [0.11ms]
(pass) createAdvancedPagination Factory Function > should create working cursor manager [0.08ms]
(pass) createAdvancedPagination Factory Function > should create working sorting engine [0.25ms]
(pass) createAdvancedPagination Factory Function > should create working query optimizer [0.06ms]
(pass) createAdvancedPagination Factory Function > should create independent instances [0.02ms]
(pass) createAdvancedPagination Factory Function > should work in complete workflow [0.09ms]

src/__test__/client/pagination/CursorPaginationManager.test.ts:
(pass) CursorPaginationManager > encodeCursor > should encode cursor in simple_id format
(pass) CursorPaginationManager > encodeCursor > should encode cursor in base64_json format [0.06ms]
(pass) CursorPaginationManager > encodeCursor > should include timestamp by default in base64_json format [0.03ms]
(pass) CursorPaginationManager > encodeCursor > should default to base64_json format when no options provided [0.03ms]
(pass) CursorPaginationManager > decodeCursor > should decode simple_id format cursor [0.21ms]
(pass) CursorPaginationManager > decodeCursor > should decode base64_json format cursor [0.02ms]
(pass) CursorPaginationManager > decodeCursor > should handle invalid base64 as simple_id
(pass) CursorPaginationManager > decodeCursor > should handle malformed JSON as simple_id [0.02ms]
(pass) CursorPaginationManager > decodeCursor > should throw error for empty cursor [0.02ms]
(pass) CursorPaginationManager > validateCursor > should validate simple_id cursor [0.01ms]
(pass) CursorPaginationManager > validateCursor > should validate base64_json cursor
(pass) CursorPaginationManager > validateCursor > should reject empty cursor [0.02ms]
(pass) CursorPaginationManager > validateCursor > should handle any string as valid (fallback to simple_id)
(pass) CursorPaginationManager > paginate > should validate collection name [0.03ms]
(pass) CursorPaginationManager > paginate > should validate limit bounds [0.03ms]
(pass) CursorPaginationManager > paginate > should validate limit upper bound [0.03ms]
(pass) CursorPaginationManager > paginate > should validate sort configuration [0.03ms]
(pass) CursorPaginationManager > paginate > should handle pagination without cursor [0.05ms]
(pass) CursorPaginationManager > paginate > should handle pagination with hasMore [0.05ms]
(pass) CursorPaginationManager > paginate > should handle pagination with cursor [0.04ms]
(pass) CursorPaginationManager > paginate > should apply filters to query [0.05ms]
(pass) CursorPaginationManager > optimizePaginationQuery > should apply index hints when enabled [0.04ms]
(pass) CursorPaginationManager > optimizePaginationQuery > should apply maxScanDocuments limit [0.02ms]
(pass) CursorPaginationManager > optimizePaginationQuery > should apply preferred indexes [0.02ms]
(pass) CursorPaginationManager > optimizePaginationQuery > should not modify query when no optimization options provided [0.01ms]
(pass) CursorPaginationManager > cursor conditions > should handle simple_id cursor conditions [0.01ms]
(pass) CursorPaginationManager > cursor conditions > should handle multi-field cursor conditions [0.05ms]
(pass) CursorPaginationManager > edge cases > should handle missing document ID extraction [0.02ms]
(pass) CursorPaginationManager > edge cases > should handle nested field extraction [0.02ms]
(pass) CursorPaginationManager > edge cases > should handle missing nested fields [0.01ms]

src/__test__/client/pagination/SortingEngine.test.ts:
(pass) SortingEngine > validateSortConfig > should validate correct sort configuration
(pass) SortingEngine > validateSortConfig > should reject empty sort configuration
(pass) SortingEngine > validateSortConfig > should reject invalid field names [0.03ms]
(pass) SortingEngine > validateSortConfig > should reject invalid direction [0.02ms]
(pass) SortingEngine > validateSortConfig > should reject invalid type [0.01ms]
(pass) SortingEngine > normalizeSortConfig > should normalize sort configuration with defaults [0.02ms]
(pass) SortingEngine > normalizeSortConfig > should preserve explicit configuration
(pass) SortingEngine > applySortToQuery > should apply single field sort to query [0.02ms]
(pass) SortingEngine > applySortToQuery > should apply multi-field sort to query [0.03ms]
(pass) SortingEngine > applySortToQuery > should throw error for invalid sort configuration [0.03ms]
(pass) SortingEngine > createSortComparator > should create comparator for string sorting [0.13ms]
(pass) SortingEngine > createSortComparator > should create comparator for number sorting [0.04ms]
(pass) SortingEngine > createSortComparator > should create comparator for date sorting [0.05ms]
(pass) SortingEngine > createSortComparator > should create comparator for boolean sorting [0.03ms]
(pass) SortingEngine > createSortComparator > should handle null values with nullsFirst option
(pass) SortingEngine > createSortComparator > should handle null values without nullsFirst option [0.01ms]
(pass) SortingEngine > createSortComparator > should handle multi-field sorting correctly [0.04ms]
(pass) SortingEngine > createSortComparator > should handle nested field paths [0.03ms]
(pass) SortingEngine > optimizeSortForIndexes > should prioritize indexed fields [0.05ms]
(pass) SortingEngine > optimizeSortForIndexes > should preserve order when no indexes available
(pass) SortingEngine > getSortPerformanceHint > should return hint for no sorting [0.02ms]
(pass) SortingEngine > getSortPerformanceHint > should return hint for single field sort
(pass) SortingEngine > getSortPerformanceHint > should return hint for multi-field sort [0.01ms]
(pass) SortingEngine > getSortPerformanceHint > should return hint for complex sort
(pass) SortingEngine > edge cases > should handle invalid numbers gracefully [0.02ms]
(pass) SortingEngine > edge cases > should handle invalid dates gracefully [0.03ms]
(pass) SortingEngine > edge cases > should handle missing nested fields [0.03ms]

src/__test__/client/pagination/Integration.test.ts:
(pass) Pagination Integration > Complete Pagination Workflow > should handle complete pagination workflow with sorting and optimization [0.56ms]
(pass) Pagination Integration > Complete Pagination Workflow > should handle cursor-based pagination flow [0.10ms]
(pass) Pagination Integration > Complete Pagination Workflow > should handle simple_id format workflow [0.04ms]
(pass) Pagination Integration > Performance Optimization Integration > should integrate sorting optimization with query optimization [0.07ms]
(pass) Pagination Integration > Performance Optimization Integration > should handle complex query optimization workflow [0.06ms]
(pass) Pagination Integration > Multi-field Sorting Integration > should handle complex multi-field sorting with different types [0.08ms]
(pass) Pagination Integration > Multi-field Sorting Integration > should handle nested field sorting integration [0.08ms]
(pass) Pagination Integration > Error Handling Integration > should handle invalid configurations gracefully [0.06ms]
(pass) Pagination Integration > Error Handling Integration > should handle cursor validation errors [0.05ms]
(pass) Pagination Integration > Error Handling Integration > should handle pagination validation errors [0.07ms]
(pass) Pagination Integration > Factory Function Integration > should work with factory function pattern [0.05ms]
(pass) Pagination Integration > Real-world Scenarios > should handle e-commerce product listing scenario [0.06ms]
(pass) Pagination Integration > Real-world Scenarios > should handle user search with filters scenario [0.05ms]

src/__test__/client/sdk/ClientSDK.test.ts:
(pass) ClientSDK > Initialization > should create SDK instance with default config
(pass) ClientSDK > Initialization > should create SDK instance with custom config
(pass) ClientSDK > Initialization > should initialize SDK successfully [0.03ms]
(pass) ClientSDK > Initialization > should handle initialization errors gracefully
(pass) ClientSDK > Connection Management > should connect to server [11.34ms]
(pass) ClientSDK > Connection Management > should disconnect from server [11.07ms]
(pass) ClientSDK > Connection Management > should handle connection without initialization
(pass) ClientSDK > Authentication > should authenticate with username and password [0.16ms]
(pass) ClientSDK > Authentication > should authenticate with email and password [0.04ms]
(pass) ClientSDK > Authentication > should authenticate with token [0.02ms]
State removed for session session_1749834301935_8cjf2nhdk
(pass) ClientSDK > Authentication > should logout successfully [0.24ms]
(pass) ClientSDK > Authentication > should get current user
(pass) ClientSDK > Configuration Management > should get current config [0.02ms]
(pass) ClientSDK > Configuration Management > should update config [0.09ms]
Failed to get connection stats: warn: Connection session_1749834301936_hiv6k3yn9 not found
      at getConnectionStats (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/session/connections/ConnectionManager.ts:284:13)
      at getConnectionStats (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/session/connections/ConnectionManager.ts:281:28)
      at getStats (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/sdk/core/ClientSDK.ts:483:51)

(pass) ClientSDK > Statistics and Monitoring > should get SDK statistics [0.46ms]
Failed to get connection stats: warn: Connection session_1749834301936_5ip0xspc9 not found
      at getConnectionStats (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/session/connections/ConnectionManager.ts:284:13)
      at getConnectionStats (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/session/connections/ConnectionManager.ts:281:28)
      at getStats (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/sdk/core/ClientSDK.ts:483:51)

(pass) ClientSDK > Statistics and Monitoring > should track request statistics [0.08ms]
(pass) ClientSDK > Event System > should emit and handle SDK events [10.54ms]
(pass) ClientSDK > Event System > should unsubscribe from events [0.03ms]
(pass) ClientSDK > Component Managers > should have all required managers
(pass) ClientSDK > Component Managers > should access collection manager [0.08ms]
(pass) ClientSDK > Component Managers > should access file manager [104.25ms]
(pass) ClientSDK > Component Managers > should access subscription manager [0.34ms]
(pass) ClientSDK > Component Managers > should access cache manager [0.09ms]
(pass) ClientSDK > Shutdown and Cleanup > should shutdown gracefully [11.28ms]
(pass) ClientSDK > Shutdown and Cleanup > should handle multiple shutdown calls [0.25ms]
(pass) ClientSDK > Error Handling > should handle network errors gracefully [0.19ms]
(pass) ClientSDK > Error Handling > should track error statistics [0.08ms]

src/__test__/client/session/SessionManager.test.ts:
(pass) SessionManager > createSession > should create a new session with valid config
(pass) SessionManager > createSession > should create session with custom sessionId [0.05ms]
(pass) SessionManager > createSession > should create session with userId [0.04ms]
(pass) SessionManager > createSession > should validate session config [0.05ms]
(pass) SessionManager > createSession > should emit session_created event [0.04ms]
(pass) SessionManager > getSession > should return session info for existing session [0.04ms]
(pass) SessionManager > getSession > should return null for non-existent session [0.03ms]
(pass) SessionManager > getSession > should return null for expired session [0.07ms]
(pass) SessionManager > updateSession > should update session info [10.64ms]
(pass) SessionManager > updateSession > should throw error for non-existent session [0.14ms]
(pass) SessionManager > updateSession > should emit session_updated event [0.16ms]
(pass) SessionManager > terminateSession > should terminate existing session [0.07ms]
(pass) SessionManager > terminateSession > should not throw error for non-existent session [0.02ms]
(pass) SessionManager > terminateSession > should emit session_terminated event [0.06ms]
(pass) SessionManager > recoverSession > should recover suspended session [0.31ms]
(pass) SessionManager > recoverSession > should fail to recover non-existent session [0.04ms]
(pass) SessionManager > getActiveSessions > should return only active sessions [0.15ms]
(pass) SessionManager > getActiveSessions > should return empty array when no active sessions [0.03ms]
(pass) SessionManager > cleanupExpiredSessions > should clean up expired sessions [0.15ms]
(pass) SessionManager > getSessionMetrics > should return session metrics [51.08ms]
(pass) SessionManager > getSessionMetrics > should throw error for non-existent session [0.16ms]
(pass) SessionManager > validateSession > should validate active session [0.13ms]
(pass) SessionManager > validateSession > should not validate non-existent session [0.06ms]
(pass) SessionManager > validateSession > should not validate expired session [0.07ms]
(pass) SessionManager > updateActivity > should update session activity [51.21ms]
(pass) SessionManager > event handling > should handle session events [0.20ms]
(pass) SessionManager > event handling > should unsubscribe from events [0.07ms]
(pass) SessionManager > shutdown > should shutdown cleanly [0.06ms]

src/adapters/markdown/__test__/MarkdownAdapter.test.ts:
(pass) MarkdownAdapter > Initialization > should create adapter with valid configuration [1.14ms]
(pass) MarkdownAdapter > Initialization > should create adapter with default configuration
(pass) MarkdownAdapter > Initialization > should validate configuration on creation
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > File Watching Integration > should start watching directory [23.55ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > File Watching Integration > should stop watching directory [5.34ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > File Watching Integration > should detect new markdown files [430.98ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > File Watching Integration > should detect file modifications [467.24ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Document Operations > should find all markdown documents [6.67ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Document Operations > should find document by ID [5.92ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Document Operations > should find documents by query [5.94ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Document Operations > should create new document [6.63ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Document Operations > should update existing document [8.98ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Document Operations > should delete document [25.15ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Search Functionality > should search documents by content [5.53ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Search Functionality > should search with filters [6.89ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Search Functionality > should handle empty search query [5.77ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Batch Operations > should process multiple documents in batch [6.90ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Batch Operations > should handle batch operation errors gracefully [8.40ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Performance Monitoring > should track performance metrics [5.02ms]
(pass) MarkdownAdapter > Performance Monitoring > should report resource usage [0.13ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Error Handling > should handle invalid file paths [4.28ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Error Handling > should handle file system errors [5.68ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Error Handling > should handle malformed markdown gracefully [5.40ms]
Git initialization error: Cannot use simple-git on a directory that does not exist
(pass) MarkdownAdapter > Error Handling > should emit error events [1001.71ms]
(pass) MarkdownAdapter > Status and Monitoring > should report correct status when stopped [0.04ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Status and Monitoring > should report correct status when running [6.30ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Status and Monitoring > should track document count [507.51ms]
(pass) MarkdownAdapter > Configuration > should use default configuration when none provided [0.29ms]
(pass) MarkdownAdapter > Configuration > should merge partial configuration with defaults [0.07ms]
(pass) MarkdownAdapter > Configuration > should validate configuration values [0.02ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Cleanup and Resource Management > should clean up resources on stop [7.32ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Cleanup and Resource Management > should handle multiple start/stop cycles [7.16ms]
Git initialization error: fatal: Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ git Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²): .git

(pass) MarkdownAdapter > Cleanup and Resource Management > should clear cache when requested [8.64ms]

src/adapters/markdown/__test__/MarkdownWatcher.test.ts:
(pass) MarkdownWatcher > Initialization > should create watcher with valid configuration [0.04ms]
(pass) MarkdownWatcher > Initialization > should create watcher with default configuration
(pass) MarkdownWatcher > Initialization > should create watcher with partial configuration [0.01ms]
(pass) MarkdownWatcher > File Watching > should start watching successfully [0.88ms]
(pass) MarkdownWatcher > File Watching > should stop watching successfully [0.73ms]
(pass) MarkdownWatcher > File Watching > should watch multiple paths [0.82ms]
(pass) MarkdownWatcher > File Watching > should handle non-existent paths gracefully [0.19ms]
(pass) MarkdownWatcher > Event Handling > should emit change events for markdown files [0.70ms]
(pass) MarkdownWatcher > Event Handling > should emit error events [3.66ms]
(pass) MarkdownWatcher > Event Handling > should emit fallback events [4.11ms]
(pass) MarkdownWatcher > Real File Operations > should detect real file changes [417.13ms]
(pass) MarkdownWatcher > Real File Operations > should detect file modifications [213.10ms]
(pass) MarkdownWatcher > Status Reporting > should report correct status when not watching
(pass) MarkdownWatcher > Status Reporting > should report correct status when watching [0.84ms]
(pass) MarkdownWatcher > Status Reporting > should track event count [0.75ms]
(pass) MarkdownWatcher > Configuration > should use chokidar strategy by default [0.04ms]
(pass) MarkdownWatcher > Configuration > should respect polling strategy configuration [0.02ms]
(pass) MarkdownWatcher > Configuration > should handle auto strategy configuration
(pass) MarkdownWatcher > Resource Management > should clean up resources on stop [0.71ms]
(pass) MarkdownWatcher > Resource Management > should handle multiple start/stop cycles [4.31ms]
(pass) MarkdownWatcher > Resource Management > should handle stop when not watching [0.06ms]
(pass) MarkdownWatcher > Error Handling > should handle invalid watch paths [0.07ms]
(pass) MarkdownWatcher > Error Handling > should handle non-existent directories [0.05ms]
(pass) MarkdownWatcher > Error Handling > should continue working after errors [0.62ms]
(pass) MarkdownWatcher > Performance > should start watching within reasonable time [0.69ms]
(pass) MarkdownWatcher > Performance > should stop watching quickly [0.77ms]

src/adapters/markdown/__test__/MarkdownParser.test.ts:
(pass) MarkdownParser > Initialization > should create parser with valid configuration
(pass) MarkdownParser > Initialization > should create parser with default configuration [0.04ms]
(pass) MarkdownParser > Initialization > should validate configuration on creation
(pass) MarkdownParser > Basic Parsing > should parse simple markdown content [0.31ms]
(pass) MarkdownParser > Basic Parsing > should parse markdown with frontmatter [1.45ms]
(pass) MarkdownParser > Basic Parsing > should handle empty content
(pass) MarkdownParser > Basic Parsing > should handle content without headers
(pass) MarkdownParser > Frontmatter Parsing > should parse YAML frontmatter [0.20ms]
(pass) MarkdownParser > Frontmatter Parsing > should parse JSON frontmatter [0.20ms]
(pass) MarkdownParser > Frontmatter Parsing > should handle invalid frontmatter gracefully [0.09ms]
(pass) MarkdownParser > Content Indexing > should extract headers for indexing
(pass) MarkdownParser > Content Indexing > should extract links for indexing [0.31ms]
(pass) MarkdownParser > Content Indexing > should create full-text search index [0.21ms]
(pass) MarkdownParser > Search Functionality > should search content and return results [0.44ms]
(pass) MarkdownParser > Search Functionality > should handle case-insensitive search [0.15ms]
(pass) MarkdownParser > Search Functionality > should return empty results for non-matching search [0.09ms]
(pass) MarkdownParser > Search Functionality > should handle multiple documents in search [0.20ms]
(pass) MarkdownParser > File Operations > should parse file from disk [0.47ms]
(pass) MarkdownParser > File Operations > should handle non-existent files [0.14ms]
(pass) MarkdownParser > File Operations > should handle large files [5.36ms]
(pass) MarkdownParser > HTML Generation > should generate HTML from markdown [0.30ms]
(pass) MarkdownParser > HTML Generation > should handle complex markdown structures [0.64ms]
(pass) MarkdownParser > Caching > should cache parsed results [0.35ms]
(pass) MarkdownParser > Caching > should respect cache TTL [150.87ms]
(pass) MarkdownParser > Caching > should clear cache when requested [0.70ms]
(pass) MarkdownParser > Performance > should parse content within reasonable time [0.71ms]
(pass) MarkdownParser > Performance > should handle concurrent parsing [0.29ms]
(pass) MarkdownParser > Error Handling > should handle malformed markdown gracefully [0.16ms]
(pass) MarkdownParser > Error Handling > should handle special characters [1.67ms]
(pass) MarkdownParser > Error Handling > should handle extremely large content [44.95ms]
(pass) MarkdownParser > Cache Statistics > should report correct cache statistics
(pass) MarkdownParser > Cache Statistics > should track cache usage [0.37ms]

src/adapters/markdown/__test__/GitManager.test.ts:

# Unhandled error between tests
-------------------------------
error: Cannot find package 'mock-fs' from '/Users/vedmalex/work/collection-store/packages/collection-store/src/adapters/markdown/__test__/GitManager.test.ts'
-------------------------------


src/client/offline/__tests__/compilation.test.ts:
(pass) Phase 5.3 Day 1: Compilation Test > should import types successfully [1.21ms]
(pass) Phase 5.3 Day 1: Compilation Test > should create instances successfully [0.29ms]
(pass) Phase 5.3 Day 1: Compilation Test > should have correct default configurations [0.21ms]

src/client/offline/__tests__/day1-core-infrastructure.test.ts:
OfflineManager initialized in 0.38ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should initialize with default configuration [1.53ms]
OfflineManager shutdown in 0.02ms
OfflineManager initialized in 0.01ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should initialize with custom configuration [0.05ms]
OfflineManager shutdown in 0.00ms
OfflineManager initialized in 0.01ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should handle enable/disable offline mode [0.09ms]
OfflineManager shutdown in 0.00ms
OfflineManager initialized in 0.00ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should provide network information [0.05ms]
OfflineManager shutdown in 0.00ms
OfflineManager initialized in 0.00ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should handle event listeners [0.09ms]
OfflineManager shutdown in 0.00ms
OfflineManager initialized in 0.00ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should update configuration [0.11ms]
OfflineManager shutdown in 0.00ms
OfflineManager initialized in 0.00ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > OfflineManager > should provide storage and sync statistics [0.12ms]
OfflineManager shutdown in 0.00ms
Failed to initialize LocalDataCache: 537 |   private async initializeIndexedDB(): Promise<void> {
538 |     return new Promise((resolve, reject) => {
539 |       // Check if we're in a browser environment with IndexedDB support
540 |       if (typeof globalThis === 'undefined' ||
541 |           typeof (globalThis as any).indexedDB === 'undefined') {
542 |         reject(new Error('IndexedDB not supported in this environment'));
                     ^
error: IndexedDB not supported in this environment
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:542:16)
      at new Promise (1:11)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:538:12)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:537:54)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:51:18)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:37:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:153:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:143:58)

(pass) Phase 5.3 Day 1: Core Offline Infrastructure > LocalDataCache > should initialize with default configuration [0.85ms]
Failed to initialize LocalDataCache: 537 |   private async initializeIndexedDB(): Promise<void> {
538 |     return new Promise((resolve, reject) => {
539 |       // Check if we're in a browser environment with IndexedDB support
540 |       if (typeof globalThis === 'undefined' ||
541 |           typeof (globalThis as any).indexedDB === 'undefined') {
542 |         reject(new Error('IndexedDB not supported in this environment'));
                     ^
error: IndexedDB not supported in this environment
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:542:16)
      at new Promise (1:11)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:538:12)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:537:54)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:51:18)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:37:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:168:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:166:49)

(pass) Phase 5.3 Day 1: Core Offline Infrastructure > LocalDataCache > should handle configuration updates [0.12ms]
Failed to initialize LocalDataCache: 537 |   private async initializeIndexedDB(): Promise<void> {
538 |     return new Promise((resolve, reject) => {
539 |       // Check if we're in a browser environment with IndexedDB support
540 |       if (typeof globalThis === 'undefined' ||
541 |           typeof (globalThis as any).indexedDB === 'undefined') {
542 |         reject(new Error('IndexedDB not supported in this environment'));
                     ^
error: IndexedDB not supported in this environment
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:542:16)
      at new Promise (1:11)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:538:12)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:537:54)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:51:18)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:37:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:188:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:186:45)

(pass) Phase 5.3 Day 1: Core Offline Infrastructure > LocalDataCache > should provide cache statistics [0.10ms]
Failed to initialize LocalDataCache: 537 |   private async initializeIndexedDB(): Promise<void> {
538 |     return new Promise((resolve, reject) => {
539 |       // Check if we're in a browser environment with IndexedDB support
540 |       if (typeof globalThis === 'undefined' ||
541 |           typeof (globalThis as any).indexedDB === 'undefined') {
542 |         reject(new Error('IndexedDB not supported in this environment'));
                     ^
error: IndexedDB not supported in this environment
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:542:16)
      at new Promise (1:11)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:538:12)
      at initializeIndexedDB (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:537:54)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:51:18)
      at initialize (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/core/local-data-cache.ts:37:20)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:203:26)
      at <anonymous> (/Users/vedmalex/work/collection-store/packages/collection-store/src/client/offline/__tests__/day1-core-infrastructure.test.ts:201:52)

(pass) Phase 5.3 Day 1: Core Offline Infrastructure > LocalDataCache > should handle export/import operations [0.09ms]
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > StorageOptimizer > should initialize with default strategy
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > StorageOptimizer > should handle strategy changes [0.11ms]
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > StorageOptimizer > should validate target utilization [0.03ms]
Storage optimization completed in 0.06ms, selected 2 entries for removal
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > StorageOptimizer > should optimize storage entries [0.22ms]
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > StorageOptimizer > should provide optimization statistics [0.04ms]
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > StorageOptimizer > should check if optimization is needed [0.02ms]
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > Performance Requirements > should meet cache operation performance (<10ms) [0.18ms]
OfflineManager initialized in 0.02ms
OfflineManager shutdown in 0.00ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > Performance Requirements > should meet initialization performance requirements [0.13ms]
OfflineManager initialized in 0.01ms
OfflineManager shutdown in 0.00ms
(pass) Phase 5.3 Day 1: Core Offline Infrastructure > Integration Tests > should integrate OfflineManager with dependencies [0.22ms]

src/client/offline/conflict/__tests__/day2-basic.test.ts:
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should import ConflictDetector successfully [0.24ms]
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should import all strategies successfully [0.05ms]
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should create strategy instances [0.30ms]
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should detect basic conflicts [0.08ms]
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should resolve conflicts with client-wins strategy [0.52ms]
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should meet performance targets [0.09ms]
âœ… ConflictDetector
âœ… ClientWinsStrategy
âœ… ServerWinsStrategy
âœ… TimestampBasedStrategy
âœ… MergeStrategy
âœ… StrategyFactory
âœ… Performance < 5ms detection
âœ… Performance < 50ms resolution

ðŸ“Š Day 2 Basic Components: 8/8 (100%)
(pass) Phase 5.3 Day 2: Conflict Resolution System - Basic Tests > should validate Day 2 requirements [0.06ms]

src/client/offline/sync/__tests__/network-detector-mocks.test.ts:
Slow network quality test: 51.14ms
Slow network check: 102.52ms
NetworkDetector initialized in 102.69ms
(pass) NetworkDetector with Mocks > Browser Environment > should initialize successfully in browser environment [102.88ms]
Network monitoring stopped
NetworkDetector initialized in 0.01ms
(pass) NetworkDetector with Mocks > Browser Environment > should detect online status correctly [0.17ms]
Network monitoring stopped
NetworkDetector initialized in 0.01ms
Browser network change: online
Browser network change: offline
(pass) NetworkDetector with Mocks > Browser Environment > should handle network events [202.56ms]
Network monitoring stopped
NetworkDetector initialized in 50.41ms
(pass) NetworkDetector with Mocks > Browser Environment > should measure network latency [101.70ms]
Network monitoring stopped
Slow network quality test: 51.03ms
Slow network check: 102.16ms
NetworkDetector initialized in 102.19ms
Slow network quality test: 51.02ms
(pass) NetworkDetector with Mocks > Browser Environment > should test network quality [153.40ms]
Network monitoring stopped
NetworkDetector initialized in 0.01ms
(pass) NetworkDetector with Mocks > Browser Environment > should get recommended sync strategy [0.21ms]
Network monitoring stopped
NetworkDetector initialized in 0.00ms
(pass) NetworkDetector with Mocks > Node.js Environment > should initialize successfully in Node.js environment [0.07ms]
Network monitoring stopped
NetworkDetector initialized in 0.00ms
(pass) NetworkDetector with Mocks > Node.js Environment > should handle missing browser APIs gracefully [0.13ms]
Network monitoring stopped
NetworkDetector initialized in 0.00ms
(pass) NetworkDetector with Mocks > Node.js Environment > should return appropriate fallback values [0.11ms]
Network monitoring stopped
NetworkDetector initialized in 0.01ms
(pass) NetworkDetector with Mocks > Performance Requirements > should meet initialization performance target (<100ms)
Network monitoring stopped
Slow network quality test: 51.10ms
Slow network check: 102.26ms
NetworkDetector initialized in 102.29ms
Slow network quality test: 51.06ms
(pass) NetworkDetector with Mocks > Performance Requirements > should meet network quality test performance target (<50ms) [153.36ms]
Network monitoring stopped
NetworkDetector initialized in 51.00ms
(pass) NetworkDetector with Mocks > Performance Requirements > should meet latency measurement performance target (<30ms) [101.58ms]
Network monitoring stopped
NetworkDetector initialized in 0.11ms
(pass) NetworkDetector with Mocks > Error Handling > should handle fetch errors gracefully [0.31ms]
Network monitoring stopped
Slow network check: 500.84ms
NetworkDetector initialized in 500.87ms
(pass) NetworkDetector with Mocks > Error Handling > should handle timeout scenarios [1001.25ms]
Network monitoring stopped

src/client/offline/sync/__tests__/day3-basic.test.ts:
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should import OperationQueue successfully [0.32ms]
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should import NetworkDetector successfully [0.17ms]
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should import SyncManager successfully [0.17ms]
OperationQueue initialized in 0.04ms
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should initialize OperationQueue with config [0.28ms]
NetworkDetector initialized in 0.01ms
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should initialize NetworkDetector with config [0.09ms]
SyncManager initialized in 0.00ms
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should initialize SyncManager with config [0.21ms]
OperationQueue initialized in 0.02ms
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should enqueue and dequeue operations [0.35ms]
OperationQueue initialized in 0.00ms
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should meet performance targets [0.39ms]
âœ… OperationQueue
âœ… NetworkDetector
âœ… SyncManager
âœ… Queue Performance < 5ms enqueue
âœ… Network Detection < 50ms
âœ… Sync Processing < 100ms
âœ… Batch Operations
âœ… Priority Queuing
âœ… Network Quality Assessment
âœ… Adaptive Sync Strategies

ðŸ“Š Day 3 Basic Components: 10/10 (100%)
(pass) Phase 5.3 Day 3: Sync Management System - Basic Tests > should validate Day 3 requirements [0.10ms]

tests/browser-sdk/adapters/react/hooks/useCollection.test.tsx:

# Unhandled error between tests
-------------------------------
error: Cannot find module '@testing-library/react-hooks' from '/Users/vedmalex/work/collection-store/packages/collection-store/tests/browser-sdk/adapters/react/hooks/useCollection.test.tsx'
-------------------------------


107 tests failed:
(fail) CollectionFactory > should create a new collection if it does not exist [1.93ms]
(fail) CollectionFactory > should create collections with the specified indexes [0.24ms]
(fail) ConfigurationManager > loadFromFile > should load and validate a correct YAML configuration file
(fail) ConfigurationManager > loadFromFile > should load and validate a correct JSON configuration file [0.49ms]
(fail) ConfigurationManager > loadFromFile > should throw an error for a file with invalid syntax [0.38ms]
(fail) ConfigurationManager > loadFromFile > should throw a validation error for a file with invalid structure [0.06ms]
(fail) ConfigurationManager > loadFromFile > should throw an error for unsupported file formats [0.05ms]
(fail) ConfigurationManager > getConfig > should return the loaded configuration [0.04ms]
(fail) TransactionManager > should commit a successful transaction [0.01ms]
(fail) TransactionManager > should rollback a failed transaction [0.18ms]
(fail) TransactionManager > should correctly handle rollbacks on storage and indexes [0.12ms]
(fail) BrowserStorageManager > Initialization > should initialize with default configuration [0.78ms]
(fail) BrowserStorageManager > Initialization > should select IndexedDB as primary storage when available [0.09ms]
(fail) BrowserStorageManager > Initialization > should fallback to localStorage when IndexedDB fails [0.06ms]
(fail) BrowserStorageManager > Initialization > should fallback to memory storage when all persistent storage fails [0.05ms]
(fail) BrowserStorageManager > Initialization > should throw error if no storage strategy can be initialized [0.12ms]
(fail) BrowserStorageManager > CRUD Operations > should store and retrieve data [1840463444.21ms]
(fail) BrowserStorageManager > CRUD Operations > should store and retrieve data
(fail) BrowserStorageManager > CRUD Operations > should handle multiple data types [1840463444.26ms]
(fail) BrowserStorageManager > CRUD Operations > should handle multiple data types
(fail) BrowserStorageManager > CRUD Operations > should return null for non-existent keys [1840463444.26ms]
(fail) BrowserStorageManager > CRUD Operations > should return null for non-existent keys
(fail) BrowserStorageManager > CRUD Operations > should delete items correctly [1840463444.26ms]
(fail) BrowserStorageManager > CRUD Operations > should delete items correctly
(fail) BrowserStorageManager > CRUD Operations > should clear all data [1840463444.26ms]
(fail) BrowserStorageManager >  |  lear all data
(fail) BrowserStorageManager > Storage Type Detection > should check storage availability correctly [0.17ms]
(fail) BrowserStorageManager > Storage Type Detection > should return correct active storage type [0.06ms]
(fail) BrowserStorageManager > Quota Management > should get quota information when available [1840463445.01ms]
(fail) BrowserStorageManager > Quota Management > should get quota information when available
(fail) BrowserStorageManager > Quota Management > should handle quota estimation errors gracefully [1840463445.09ms]
(fail) BrowserStorageManager > Quota Management > should handle quota estimation errors gracefully
(fail) BrowserStorageManager > Quota Management > should return null when storage estimation is not available [1840463445.12ms]
(fail) BrowserStorageManager >         eturn null when storage estimation is not available
(fail) BrowserStorageManager > Performance Benchmarks > should perform write operations efficiently [0.06ms]
(fail) BrowserStorageManager > Performance Benchmarks > should perform read operations efficiently [0.06ms]
(fail) BrowserStorageManager > Performance Benchmarks > should perform delete operations efficiently [0.06ms]
(fail) OfflineSyncEngine > Network State Changes > should process queue when online event fires and engine is online [1840463457.34ms]
(fail) OfflineSyncEngine > Network State Changes > should process queue when online event fires and engine is online
(fail) OfflineSyncEngine > Network State Changes > should not process queue when offline event fires [1840463457.54ms]
(fail) OfflineSyncEngine > Network State Changes > should not process queue when offline event fires
(fail) OfflineSyncEngine > Network State Changes > should notify registered network handlers on state change [1840463457.59ms]
(fail) OfflineSyncEngine > €›|  otify registered network handlers on state change
(fail) OfflineSyncEngine > Enqueue Operations > should add operation to queue [1840463457.62ms]
(fail) OfflineSyncEngine > Enqueue Operations > should add operation to queue
(fail) OfflineSyncEngine > Enqueue Operations > should process queue immediately if online [1840463457.63ms]
(fail) OfflineSyncEngine > Enqueue Operations > should process queue immediately if online
(fail) OfflineSyncEngine > Enqueue Operations > should not process queue immediately if offline [1840463457.65ms]
(fail) OfflineSyncEngine >  y|  ot process queue immediately if offline
(fail) OfflineSyncEngine > Process Queue > should process all operations in the queue when online [1840463457.68ms]
(fail) OfflineSyncEngine > Process Queue > should process all operations in the queue when online
(fail) OfflineSyncEngine > Process Queue > should handle simulated remote sync failures [1840463457.70ms]
(fail) OfflineSyncEngine > Process Queue > should handle simulated remote sync failures
(fail) OfflineSyncEngine > Process Queue > should handle simulated conflicts and resolve them [1840463457.73ms]
(fail) OfflineSyncEngine > Process Queue > should handle simulated conflicts and resolve them
(fail) OfflineSyncEngine > Process Queue > should handle failed conflict resolution [1840463457.74ms]
(fail) OfflineSyncEngine >  x|  andle failed conflict resolution
(fail) OfflineSyncEngine > Change Tracking > should track changes for a collection [1840463457.76ms]
(fail) OfflineSyncEngine > Change Tracking > should track changes for a collection
(fail) OfflineSyncEngine > Change Tracking > should retrieve changes since a specific timestamp [1840463457.79ms]
(fail) OfflineSyncEngine > Change Tracking > should retrieve changes since a specific timestamp
(fail) OfflineSyncEngine > Change Tracking > should return empty array if no changes for collection [1840463457.81ms]
(fail) OfflineSyncEngine > €3›|  eturn empty array if no changes for collection
(fail) OfflineSyncEngine > Network Status > isOnline should return navigator.onLine if available [1840463457.83ms]
(fail) OfflineSyncEngine > Network Status > isOnline should return navigator.onLine if available
(fail) OfflineSyncEngine > Network Status > isOnline should return true if navigator is not available (Node.js env) [1840463457.85ms]
(fail) OfflineSyncEngine > åU|   should return true if navigator is not available (Node.js env)
(fail) OfflineSyncEngine > Network State Change Handlers > should register and unregister network handlers [1840463457.87ms]
(fail) OfflineSyncEngine > €k|  egister and unregister network handlers
(fail) OfflineSyncEngine > should initialize and setup network listeners [1840463457.89ms]
(fail) px|  nitialize and setup network listeners

 2684 pass
 107 fail
 35 errors
 221553 expect() calls
Ran 2791 tests across 162 files. [106.94s]
